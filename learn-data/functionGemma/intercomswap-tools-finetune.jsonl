{"id":"intercomswap_app_info__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_app_info","tools":[{"type":"function","function":{"name":"intercomswap_app_info","description":"Get app binding info (app_tag, Solana program id, derived app_hash).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_app_info with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_app_info_1","type":"function","function":{"name":"intercomswap_app_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_app_info_1","name":"intercomswap_app_info","content":"{\"ok\":true,\"app_tag\":\"intercomswap\",\"app_hash\":\"9f2c4d6e8a1b3c5d7e9f00112233445566778899aabbccddeeff001122334455\",\"solana_program_id\":\"4RS6xpspM1V2K7FKSqeSH6VVaZbtzHzhJqacwrz8gJrF\"}"},{"role":"assistant","content":"intercomswap_app_info completed successfully."}]}
{"id":"intercomswap_app_info__success_variant","scenario":"success_variant","tool_name":"intercomswap_app_info","tools":[{"type":"function","function":{"name":"intercomswap_app_info","description":"Get app binding info (app_tag, Solana program id, derived app_hash).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_app_info with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_app_info_2","type":"function","function":{"name":"intercomswap_app_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_app_info_2","name":"intercomswap_app_info","content":"{\"ok\":true,\"app_tag\":\"intercomswap\",\"app_hash\":\"9f2c4d6e8a1b3c5d7e9f00112233445566778899aabbccddeeff001122334455\",\"solana_program_id\":\"4RS6xpspM1V2K7FKSqeSH6VVaZbtzHzhJqacwrz8gJrF\"}"},{"role":"assistant","content":"intercomswap_app_info succeeded with the expanded parameter set."}]}
{"id":"intercomswap_app_info__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_app_info","tools":[{"type":"function","function":{"name":"intercomswap_app_info","description":"Get app binding info (app_tag, Solana program id, derived app_hash).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_app_info now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_app_info_3","type":"function","function":{"name":"intercomswap_app_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_app_info_3","name":"intercomswap_app_info","content":"{\"ok\":false,\"code\":\"RUNTIME_ERROR\",\"error\":\"intercomswap_app_info failed due to backend/runtime error\"}"},{"role":"assistant","content":"intercomswap_app_info failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_app_info__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_app_info","tools":[{"type":"function","function":{"name":"intercomswap_app_info","description":"Get app binding info (app_tag, Solana program id, derived app_hash).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_app_info with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_app_info with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_env_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_env_get","tools":[{"type":"function","function":{"name":"intercomswap_env_get","description":"Get local environment/config summary (LN network, Solana RPC, receipts DB path). Does not touch the network.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_env_get with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_env_get_1","type":"function","function":{"name":"intercomswap_env_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_env_get_1","name":"intercomswap_env_get","content":"{\"ok\":true,\"ln_network\":\"mainnet\",\"solana_rpc\":\"https://api.mainnet-beta.solana.com\",\"receipts_db\":\"onchain/receipts/mainnet.sqlite\"}"},{"role":"assistant","content":"intercomswap_env_get completed successfully."}]}
{"id":"intercomswap_env_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_env_get","tools":[{"type":"function","function":{"name":"intercomswap_env_get","description":"Get local environment/config summary (LN network, Solana RPC, receipts DB path). Does not touch the network.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_env_get with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_env_get_2","type":"function","function":{"name":"intercomswap_env_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_env_get_2","name":"intercomswap_env_get","content":"{\"ok\":true,\"ln_network\":\"mainnet\",\"solana_rpc\":\"https://api.mainnet-beta.solana.com\",\"receipts_db\":\"onchain/receipts/mainnet.sqlite\"}"},{"role":"assistant","content":"intercomswap_env_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_env_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_env_get","tools":[{"type":"function","function":{"name":"intercomswap_env_get","description":"Get local environment/config summary (LN network, Solana RPC, receipts DB path). Does not touch the network.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_env_get now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_env_get_3","type":"function","function":{"name":"intercomswap_env_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_env_get_3","name":"intercomswap_env_get","content":"{\"ok\":false,\"code\":\"RUNTIME_ERROR\",\"error\":\"intercomswap_env_get failed due to backend/runtime error\"}"},{"role":"assistant","content":"intercomswap_env_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_env_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_env_get","tools":[{"type":"function","function":{"name":"intercomswap_env_get","description":"Get local environment/config summary (LN network, Solana RPC, receipts DB path). Does not touch the network.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_env_get with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_env_get with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_stack_start__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_stack_start","tools":[{"type":"function","function":{"name":"intercomswap_stack_start","description":"Start/bootstrap the local stack (peer + SC-Bridge, LN regtest channel on docker, Solana local validator, receipts DB).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"peer_store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Sidechannels to join on startup (rendezvous)."},"ln_bootstrap":{"type":"boolean","description":"If true, ensure LN readiness (docker+regtest: fund + open channel if needed)."},"sol_bootstrap":{"type":"boolean","description":"If true, ensure Solana readiness (localhost: start validator if needed)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_start with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_start_1","type":"function","function":{"name":"intercomswap_stack_start","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_start_1","name":"intercomswap_stack_start","content":"{\"ok\":true,\"action\":\"started\",\"peer\":\"maker\",\"sc_port\":9334,\"ln\":\"ready\",\"solana\":\"ready\"}"},{"role":"assistant","content":"intercomswap_stack_start completed successfully."}]}
{"id":"intercomswap_stack_start__success_variant","scenario":"success_variant","tool_name":"intercomswap_stack_start","tools":[{"type":"function","function":{"name":"intercomswap_stack_start","description":"Start/bootstrap the local stack (peer + SC-Bridge, LN regtest channel on docker, Solana local validator, receipts DB).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"peer_store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Sidechannels to join on startup (rendezvous)."},"ln_bootstrap":{"type":"boolean","description":"If true, ensure LN readiness (docker+regtest: fund + open channel if needed)."},"sol_bootstrap":{"type":"boolean","description":"If true, ensure Solana readiness (localhost: start validator if needed)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_start with an expanded/edge argument set: {\"peer_name\":\"sample_value\",\"peer_store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ln_bootstrap\":true,\"sol_bootstrap\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_start_2","type":"function","function":{"name":"intercomswap_stack_start","arguments":"{\"peer_name\":\"sample_value\",\"peer_store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ln_bootstrap\":true,\"sol_bootstrap\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_start_2","name":"intercomswap_stack_start","content":"{\"ok\":true,\"action\":\"started\",\"peer\":\"sample_value\",\"sc_port\":9344,\"ln\":\"already_ready\",\"solana\":\"already_ready\"}"},{"role":"assistant","content":"intercomswap_stack_start succeeded with the expanded parameter set."}]}
{"id":"intercomswap_stack_start__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_stack_start","tools":[{"type":"function","function":{"name":"intercomswap_stack_start","description":"Start/bootstrap the local stack (peer + SC-Bridge, LN regtest channel on docker, Solana local validator, receipts DB).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"peer_store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Sidechannels to join on startup (rendezvous)."},"ln_bootstrap":{"type":"boolean","description":"If true, ensure LN readiness (docker+regtest: fund + open channel if needed)."},"sol_bootstrap":{"type":"boolean","description":"If true, ensure Solana readiness (localhost: start validator if needed)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_start now with this valid argument set even if backend conditions may fail: {\"peer_name\":\"sample_value\",\"peer_store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ln_bootstrap\":true,\"sol_bootstrap\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_start_3","type":"function","function":{"name":"intercomswap_stack_start","arguments":"{\"peer_name\":\"sample_value\",\"peer_store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ln_bootstrap\":true,\"sol_bootstrap\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_start_3","name":"intercomswap_stack_start","content":"{\"ok\":false,\"code\":\"STACK_BOOTSTRAP_FAILED\",\"error\":\"stack_start failed: unable to reach local SC bridge port within timeout\"}"},{"role":"assistant","content":"intercomswap_stack_start failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_stack_start__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_stack_start","tools":[{"type":"function","function":{"name":"intercomswap_stack_start","description":"Start/bootstrap the local stack (peer + SC-Bridge, LN regtest channel on docker, Solana local validator, receipts DB).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"peer_store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Sidechannels to join on startup (rendezvous)."},"ln_bootstrap":{"type":"boolean","description":"If true, ensure LN readiness (docker+regtest: fund + open channel if needed)."},"sol_bootstrap":{"type":"boolean","description":"If true, ensure Solana readiness (localhost: start validator if needed)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_start with these arguments: {\"peer_name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_stack_start with that payload. peer_name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_stack_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_stack_stop","tools":[{"type":"function","function":{"name":"intercomswap_stack_stop","description":"Stop the local stack (peer + Solana local validator + LN docker). Does not delete state.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"ln_stop":{"type":"boolean","description":"If true and ln.backend=docker, stop the docker compose stack."},"sol_stop":{"type":"boolean","description":"If true and Solana is localhost, stop the managed local validator."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_stop with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_stop_1","type":"function","function":{"name":"intercomswap_stack_stop","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_stop_1","name":"intercomswap_stack_stop","content":"{\"ok\":true,\"action\":\"stopped\",\"peer\":\"maker\",\"sc_port\":9334,\"ln\":\"ready\",\"solana\":\"ready\"}"},{"role":"assistant","content":"intercomswap_stack_stop completed successfully."}]}
{"id":"intercomswap_stack_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_stack_stop","tools":[{"type":"function","function":{"name":"intercomswap_stack_stop","description":"Stop the local stack (peer + Solana local validator + LN docker). Does not delete state.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"ln_stop":{"type":"boolean","description":"If true and ln.backend=docker, stop the docker compose stack."},"sol_stop":{"type":"boolean","description":"If true and Solana is localhost, stop the managed local validator."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_stop with an expanded/edge argument set: {\"peer_name\":\"sample_value\",\"sc_port\":9344,\"ln_stop\":true,\"sol_stop\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_stop_2","type":"function","function":{"name":"intercomswap_stack_stop","arguments":"{\"peer_name\":\"sample_value\",\"sc_port\":9344,\"ln_stop\":true,\"sol_stop\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_stop_2","name":"intercomswap_stack_stop","content":"{\"ok\":true,\"action\":\"stopped\",\"peer\":\"sample_value\",\"sc_port\":9344,\"ln\":\"already_ready\",\"solana\":\"already_ready\"}"},{"role":"assistant","content":"intercomswap_stack_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_stack_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_stack_stop","tools":[{"type":"function","function":{"name":"intercomswap_stack_stop","description":"Stop the local stack (peer + Solana local validator + LN docker). Does not delete state.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"ln_stop":{"type":"boolean","description":"If true and ln.backend=docker, stop the docker compose stack."},"sol_stop":{"type":"boolean","description":"If true and Solana is localhost, stop the managed local validator."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_stop now with this valid argument set even if backend conditions may fail: {\"peer_name\":\"sample_value\",\"sc_port\":9344,\"ln_stop\":true,\"sol_stop\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_stack_stop_3","type":"function","function":{"name":"intercomswap_stack_stop","arguments":"{\"peer_name\":\"sample_value\",\"sc_port\":9344,\"ln_stop\":true,\"sol_stop\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_stack_stop_3","name":"intercomswap_stack_stop","content":"{\"ok\":false,\"code\":\"STACK_BOOTSTRAP_FAILED\",\"error\":\"stack_start failed: unable to reach local SC bridge port within timeout\"}"},{"role":"assistant","content":"intercomswap_stack_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_stack_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_stack_stop","tools":[{"type":"function","function":{"name":"intercomswap_stack_stop","description":"Stop the local stack (peer + Solana local validator + LN docker). Does not delete state.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer_name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"ln_stop":{"type":"boolean","description":"If true and ln.backend=docker, stop the docker compose stack."},"sol_stop":{"type":"boolean","description":"If true and Solana is localhost, stop the managed local validator."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_stack_stop with these arguments: {\"peer_name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_stack_stop with that payload. peer_name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_info__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_info","tools":[{"type":"function","function":{"name":"intercomswap_sc_info","description":"Get peer info via SC-Bridge (safe fields only).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_info with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_info_1","type":"function","function":{"name":"intercomswap_sc_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_info_1","name":"intercomswap_sc_info","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"info\",\"message_id\":\"0d706a92d0800030\"}"},{"role":"assistant","content":"intercomswap_sc_info completed successfully."}]}
{"id":"intercomswap_sc_info__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_info","tools":[{"type":"function","function":{"name":"intercomswap_sc_info","description":"Get peer info via SC-Bridge (safe fields only).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_info with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_info_2","type":"function","function":{"name":"intercomswap_sc_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_info_2","name":"intercomswap_sc_info","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"info\",\"message_id\":\"00f0002455d1b152\"}"},{"role":"assistant","content":"intercomswap_sc_info succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_info__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_info","tools":[{"type":"function","function":{"name":"intercomswap_sc_info","description":"Get peer info via SC-Bridge (safe fields only).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_info now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_info_3","type":"function","function":{"name":"intercomswap_sc_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_info_3","name":"intercomswap_sc_info","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_info failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_info__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_info","tools":[{"type":"function","function":{"name":"intercomswap_sc_info","description":"Get peer info via SC-Bridge (safe fields only).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_info with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sc_info with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_stats__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_stats","tools":[{"type":"function","function":{"name":"intercomswap_sc_stats","description":"Get SC-Bridge stats.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_stats with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_stats_1","type":"function","function":{"name":"intercomswap_sc_stats","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_stats_1","name":"intercomswap_sc_stats","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"stats\",\"message_id\":\"53cd60a79a8cf433\"}"},{"role":"assistant","content":"intercomswap_sc_stats completed successfully."}]}
{"id":"intercomswap_sc_stats__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_stats","tools":[{"type":"function","function":{"name":"intercomswap_sc_stats","description":"Get SC-Bridge stats.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_stats with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_stats_2","type":"function","function":{"name":"intercomswap_sc_stats","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_stats_2","name":"intercomswap_sc_stats","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"stats\",\"message_id\":\"0da270f50b85003b\"}"},{"role":"assistant","content":"intercomswap_sc_stats succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_stats__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_stats","tools":[{"type":"function","function":{"name":"intercomswap_sc_stats","description":"Get SC-Bridge stats.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_stats now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_stats_3","type":"function","function":{"name":"intercomswap_sc_stats","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_stats_3","name":"intercomswap_sc_stats","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_stats failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_stats__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_stats","tools":[{"type":"function","function":{"name":"intercomswap_sc_stats","description":"Get SC-Bridge stats.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_stats with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sc_stats with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_price_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_price_get","tools":[{"type":"function","function":{"name":"intercomswap_sc_price_get","description":"Get latest price snapshot from local price feature/oracle.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_price_get with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_price_get_1","type":"function","function":{"name":"intercomswap_sc_price_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_price_get_1","name":"intercomswap_sc_price_get","content":"{\"ok\":true,\"pair\":\"BTC/USDT\",\"source\":\"local_oracle\",\"price\":67000,\"ts_unix\":1771000000}"},{"role":"assistant","content":"intercomswap_sc_price_get completed successfully."}]}
{"id":"intercomswap_sc_price_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_price_get","tools":[{"type":"function","function":{"name":"intercomswap_sc_price_get","description":"Get latest price snapshot from local price feature/oracle.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_price_get with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_price_get_2","type":"function","function":{"name":"intercomswap_sc_price_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_price_get_2","name":"intercomswap_sc_price_get","content":"{\"ok\":true,\"pair\":\"BTC/USDT\",\"source\":\"local_oracle\",\"price\":67650.12,\"ts_unix\":1771000000}"},{"role":"assistant","content":"intercomswap_sc_price_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_price_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_price_get","tools":[{"type":"function","function":{"name":"intercomswap_sc_price_get","description":"Get latest price snapshot from local price feature/oracle.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_price_get now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_price_get_3","type":"function","function":{"name":"intercomswap_sc_price_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_price_get_3","name":"intercomswap_sc_price_get","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_price_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_price_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_price_get","tools":[{"type":"function","function":{"name":"intercomswap_sc_price_get","description":"Get latest price snapshot from local price feature/oracle.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_price_get with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sc_price_get with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_subscribe__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_subscribe","tools":[{"type":"function","function":{"name":"intercomswap_sc_subscribe","description":"Subscribe this prompt session to sidechannel message events for specific channels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to receive events for."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_subscribe with these arguments (minimal valid shape): {\"channels\":[\"0000intercomswapbtcusdt\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_subscribe_1","type":"function","function":{"name":"intercomswap_sc_subscribe","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_subscribe_1","name":"intercomswap_sc_subscribe","content":"{\"ok\":true,\"subscribed\":[\"0000intercomswapbtcusdt\"],\"session_subscriptions\":1}"},{"role":"assistant","content":"intercomswap_sc_subscribe completed successfully."}]}
{"id":"intercomswap_sc_subscribe__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_subscribe","tools":[{"type":"function","function":{"name":"intercomswap_sc_subscribe","description":"Subscribe this prompt session to sidechannel message events for specific channels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to receive events for."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_subscribe with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_subscribe_2","type":"function","function":{"name":"intercomswap_sc_subscribe","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_subscribe_2","name":"intercomswap_sc_subscribe","content":"{\"ok\":true,\"subscribed\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"session_subscriptions\":2}"},{"role":"assistant","content":"intercomswap_sc_subscribe succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_subscribe__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_subscribe","tools":[{"type":"function","function":{"name":"intercomswap_sc_subscribe","description":"Subscribe this prompt session to sidechannel message events for specific channels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to receive events for."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_subscribe now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_subscribe_3","type":"function","function":{"name":"intercomswap_sc_subscribe","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_subscribe_3","name":"intercomswap_sc_subscribe","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_subscribe failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_subscribe__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_subscribe","tools":[{"type":"function","function":{"name":"intercomswap_sc_subscribe","description":"Subscribe this prompt session to sidechannel message events for specific channels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to receive events for."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_subscribe with these arguments: {\"channels\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_subscribe with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_wait_envelope__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_wait_envelope","tools":[{"type":"function","function":{"name":"intercomswap_sc_wait_envelope","description":"Wait for the next signed swap envelope seen on subscribed sidechannels. Returns a handle to the full envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Optional channel allowlist. If omitted/empty, any subscribed channel is accepted."},"kinds":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":64},"description":"Optional swap envelope kind allowlist (e.g. swap.rfq, swap.quote, swap.swap_invite)."},"timeout_ms":{"type":"integer","minimum":10,"maximum":120000,"description":"Long-poll timeout in ms."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_wait_envelope with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_wait_envelope_1","type":"function","function":{"name":"intercomswap_sc_wait_envelope","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_wait_envelope_1","name":"intercomswap_sc_wait_envelope","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"envelope_kind\":\"swap.rfq\",\"handle\":\"secret:4a20b861-18c0-4574\",\"envelope_id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","content":"intercomswap_sc_wait_envelope completed successfully."}]}
{"id":"intercomswap_sc_wait_envelope__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_wait_envelope","tools":[{"type":"function","function":{"name":"intercomswap_sc_wait_envelope","description":"Wait for the next signed swap envelope seen on subscribed sidechannels. Returns a handle to the full envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Optional channel allowlist. If omitted/empty, any subscribed channel is accepted."},"kinds":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":64},"description":"Optional swap envelope kind allowlist (e.g. swap.rfq, swap.quote, swap.swap_invite)."},"timeout_ms":{"type":"integer","minimum":10,"maximum":120000,"description":"Long-poll timeout in ms."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_wait_envelope with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"kinds\":[\"sample_value\",\"sample_value\"],\"timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_wait_envelope_2","type":"function","function":{"name":"intercomswap_sc_wait_envelope","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"kinds\":[\"sample_value\",\"sample_value\"],\"timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_wait_envelope_2","name":"intercomswap_sc_wait_envelope","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"envelope_kind\":\"swap.rfq\",\"handle\":\"secret:4a20b861-18c0-4574\",\"envelope_id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","content":"intercomswap_sc_wait_envelope succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_wait_envelope__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_wait_envelope","tools":[{"type":"function","function":{"name":"intercomswap_sc_wait_envelope","description":"Wait for the next signed swap envelope seen on subscribed sidechannels. Returns a handle to the full envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Optional channel allowlist. If omitted/empty, any subscribed channel is accepted."},"kinds":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":64},"description":"Optional swap envelope kind allowlist (e.g. swap.rfq, swap.quote, swap.swap_invite)."},"timeout_ms":{"type":"integer","minimum":10,"maximum":120000,"description":"Long-poll timeout in ms."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_wait_envelope now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"kinds\":[\"sample_value\",\"sample_value\"],\"timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_wait_envelope_3","type":"function","function":{"name":"intercomswap_sc_wait_envelope","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"kinds\":[\"sample_value\",\"sample_value\"],\"timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_wait_envelope_3","name":"intercomswap_sc_wait_envelope","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_wait_envelope failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_wait_envelope__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_wait_envelope","tools":[{"type":"function","function":{"name":"intercomswap_sc_wait_envelope","description":"Wait for the next signed swap envelope seen on subscribed sidechannels. Returns a handle to the full envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Optional channel allowlist. If omitted/empty, any subscribed channel is accepted."},"kinds":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":64},"description":"Optional swap envelope kind allowlist (e.g. swap.rfq, swap.quote, swap.swap_invite)."},"timeout_ms":{"type":"integer","minimum":10,"maximum":120000,"description":"Long-poll timeout in ms."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_wait_envelope with these arguments: {\"channels\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_wait_envelope with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_join__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_join","tools":[{"type":"function","function":{"name":"intercomswap_sc_join","description":"Join a sidechannel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_1","type":"function","function":{"name":"intercomswap_sc_join","arguments":"{\"channel\":\"0000intercomswapbtcusdt\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_1","name":"intercomswap_sc_join","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"join\",\"message_id\":\"7aa21b13d9efb19e\"}"},{"role":"assistant","content":"intercomswap_sc_join completed successfully."}]}
{"id":"intercomswap_sc_join__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_join","tools":[{"type":"function","function":{"name":"intercomswap_sc_join","description":"Join a sidechannel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_2","type":"function","function":{"name":"intercomswap_sc_join","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_2","name":"intercomswap_sc_join","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"action\":\"join\",\"message_id\":\"1eb48884934867ba\"}"},{"role":"assistant","content":"intercomswap_sc_join succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_join__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_join","tools":[{"type":"function","function":{"name":"intercomswap_sc_join","description":"Join a sidechannel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_3","type":"function","function":{"name":"intercomswap_sc_join","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_3","name":"intercomswap_sc_join","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_join failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_join__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_join","tools":[{"type":"function","function":{"name":"intercomswap_sc_join","description":"Join a sidechannel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join with these arguments: {\"channel\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_join with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_join_many__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_join_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_join_many","description":"Join multiple sidechannels (public rendezvous style).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to join."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join_many with these arguments (minimal valid shape): {\"channels\":[\"0000intercomswapbtcusdt\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_many_1","type":"function","function":{"name":"intercomswap_sc_join_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_many_1","name":"intercomswap_sc_join_many","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"join_many\",\"message_id\":\"30f0a1c94abd92c8\"}"},{"role":"assistant","content":"intercomswap_sc_join_many completed successfully."}]}
{"id":"intercomswap_sc_join_many__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_join_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_join_many","description":"Join multiple sidechannels (public rendezvous style).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to join."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join_many with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_many_2","type":"function","function":{"name":"intercomswap_sc_join_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_many_2","name":"intercomswap_sc_join_many","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"join_many\",\"message_id\":\"4b8c8a9966d45208\"}"},{"role":"assistant","content":"intercomswap_sc_join_many succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_join_many__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_join_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_join_many","description":"Join multiple sidechannels (public rendezvous style).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to join."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join_many now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_join_many_3","type":"function","function":{"name":"intercomswap_sc_join_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_join_many_3","name":"intercomswap_sc_join_many","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_join_many failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_join_many__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_join_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_join_many","description":"Join multiple sidechannels (public rendezvous style).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to join."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_join_many with these arguments: {\"channels\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_join_many with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_leave__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_leave","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave","description":"Leave a sidechannel locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_1","type":"function","function":{"name":"intercomswap_sc_leave","arguments":"{\"channel\":\"0000intercomswapbtcusdt\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_1","name":"intercomswap_sc_leave","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"leave\",\"message_id\":\"3ac4b1f2b12a8093\"}"},{"role":"assistant","content":"intercomswap_sc_leave completed successfully."}]}
{"id":"intercomswap_sc_leave__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_leave","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave","description":"Leave a sidechannel locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_2","type":"function","function":{"name":"intercomswap_sc_leave","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_2","name":"intercomswap_sc_leave","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"action\":\"leave\",\"message_id\":\"d45998b62c3ddea9\"}"},{"role":"assistant","content":"intercomswap_sc_leave succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_leave__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_leave","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave","description":"Leave a sidechannel locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_3","type":"function","function":{"name":"intercomswap_sc_leave","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_3","name":"intercomswap_sc_leave","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_leave failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_leave__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_leave","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave","description":"Leave a sidechannel locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"}},"required":["channel"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave with these arguments: {\"channel\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_leave with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_leave_many__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_leave_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave_many","description":"Leave multiple sidechannels locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to leave."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave_many with these arguments (minimal valid shape): {\"channels\":[\"0000intercomswapbtcusdt\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_many_1","type":"function","function":{"name":"intercomswap_sc_leave_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_many_1","name":"intercomswap_sc_leave_many","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"leave_many\",\"message_id\":\"36be356c4b200d7c\"}"},{"role":"assistant","content":"intercomswap_sc_leave_many completed successfully."}]}
{"id":"intercomswap_sc_leave_many__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_leave_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave_many","description":"Leave multiple sidechannels locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to leave."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave_many with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_many_2","type":"function","function":{"name":"intercomswap_sc_leave_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_many_2","name":"intercomswap_sc_leave_many","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"leave_many\",\"message_id\":\"c8a8f2a9cc390587\"}"},{"role":"assistant","content":"intercomswap_sc_leave_many succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_leave_many__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_leave_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave_many","description":"Leave multiple sidechannels locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to leave."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave_many now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_leave_many_3","type":"function","function":{"name":"intercomswap_sc_leave_many","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_leave_many_3","name":"intercomswap_sc_leave_many","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_leave_many failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_leave_many__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_leave_many","tools":[{"type":"function","function":{"name":"intercomswap_sc_leave_many","description":"Leave multiple sidechannels locally (channel hygiene).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Channels to leave."}},"required":["channels"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_leave_many with these arguments: {\"channels\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_leave_many with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_open__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_open","tools":[{"type":"function","function":{"name":"intercomswap_sc_open","description":"Request/open a sidechannel via an entry channel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"via":{"type":"string","minLength":1,"maxLength":128,"description":"Entry/rendezvous channel to send the open request through."},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel","via"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_open with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"via\":\"0000intercomswapbtcusdt\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_open_1","type":"function","function":{"name":"intercomswap_sc_open","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"via\":\"0000intercomswapbtcusdt\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_open_1","name":"intercomswap_sc_open","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"open\",\"message_id\":\"0b967547a5958f4b\"}"},{"role":"assistant","content":"intercomswap_sc_open completed successfully."}]}
{"id":"intercomswap_sc_open__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_open","tools":[{"type":"function","function":{"name":"intercomswap_sc_open","description":"Request/open a sidechannel via an entry channel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"via":{"type":"string","minLength":1,"maxLength":128,"description":"Entry/rendezvous channel to send the open request through."},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel","via"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_open with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"via\":\"0000intercomswapbtcusdt\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_open_2","type":"function","function":{"name":"intercomswap_sc_open","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"via\":\"0000intercomswapbtcusdt\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_open_2","name":"intercomswap_sc_open","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"action\":\"open\",\"message_id\":\"6272112e785a8737\"}"},{"role":"assistant","content":"intercomswap_sc_open succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_open__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_open","tools":[{"type":"function","function":{"name":"intercomswap_sc_open","description":"Request/open a sidechannel via an entry channel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"via":{"type":"string","minLength":1,"maxLength":128,"description":"Entry/rendezvous channel to send the open request through."},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel","via"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_open now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"via\":\"0000intercomswapbtcusdt\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_open_3","type":"function","function":{"name":"intercomswap_sc_open","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"via\":\"0000intercomswapbtcusdt\",\"invite_b64\":\"sample_value\",\"welcome_b64\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_open_3","name":"intercomswap_sc_open","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_open failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_open__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_open","tools":[{"type":"function","function":{"name":"intercomswap_sc_open","description":"Request/open a sidechannel via an entry channel (invite/welcome optional).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"via":{"type":"string","minLength":1,"maxLength":128,"description":"Entry/rendezvous channel to send the open request through."},"invite_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional invite (base64 JSON)."},"welcome_b64":{"type":"string","minLength":1,"maxLength":16384,"description":"Optional welcome (base64 JSON)."}},"required":["channel","via"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_open with these arguments: {\"channel\":\"\",\"via\":\"0000intercomswapbtcusdt\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_open with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_send_text__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_send_text","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_text","description":"Send a plain text message to a channel.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"text":{"type":"string","minLength":1,"maxLength":2000}},"required":["channel","text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_text with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"text\":\"x\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_text_1","type":"function","function":{"name":"intercomswap_sc_send_text","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"text\":\"x\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_text_1","name":"intercomswap_sc_send_text","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"send_text\",\"message_id\":\"5fe76641081a63f7\"}"},{"role":"assistant","content":"intercomswap_sc_send_text completed successfully."}]}
{"id":"intercomswap_sc_send_text__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_send_text","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_text","description":"Send a plain text message to a channel.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"text":{"type":"string","minLength":1,"maxLength":2000}},"required":["channel","text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_text with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"text\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_text_2","type":"function","function":{"name":"intercomswap_sc_send_text","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"text\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_text_2","name":"intercomswap_sc_send_text","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"action\":\"send_text\",\"message_id\":\"453eb711aebfe953\"}"},{"role":"assistant","content":"intercomswap_sc_send_text succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_send_text__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_send_text","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_text","description":"Send a plain text message to a channel.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"text":{"type":"string","minLength":1,"maxLength":2000}},"required":["channel","text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_text now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"text\":\"sample_value\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_text_3","type":"function","function":{"name":"intercomswap_sc_send_text","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"text\":\"sample_value\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_text_3","name":"intercomswap_sc_send_text","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_send_text failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_send_text__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_send_text","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_text","description":"Send a plain text message to a channel.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"text":{"type":"string","minLength":1,"maxLength":2000}},"required":["channel","text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_text with these arguments: {\"channel\":\"\",\"text\":\"x\"}"},{"role":"assistant","content":"Cannot call intercomswap_sc_send_text with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sc_send_json__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sc_send_json","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_json","description":"Send a JSON message to a channel (structured payload).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"json":{"type":"object"}},"required":["channel","json"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_json with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"json\":{}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_json_1","type":"function","function":{"name":"intercomswap_sc_send_json","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"json\":{}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_json_1","name":"intercomswap_sc_send_json","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"action\":\"send_json\",\"message_id\":\"725875eded1d1106\"}"},{"role":"assistant","content":"intercomswap_sc_send_json completed successfully."}]}
{"id":"intercomswap_sc_send_json__success_variant","scenario":"success_variant","tool_name":"intercomswap_sc_send_json","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_json","description":"Send a JSON message to a channel (structured payload).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"json":{"type":"object"}},"required":["channel","json"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_json with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"json\":{}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_json_2","type":"function","function":{"name":"intercomswap_sc_send_json","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"json\":{}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_json_2","name":"intercomswap_sc_send_json","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"action\":\"send_json\",\"message_id\":\"be3c1f1b52ee3aca\"}"},{"role":"assistant","content":"intercomswap_sc_send_json succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sc_send_json__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sc_send_json","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_json","description":"Send a JSON message to a channel (structured payload).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"json":{"type":"object"}},"required":["channel","json"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_json now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"json\":{}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sc_send_json_3","type":"function","function":{"name":"intercomswap_sc_send_json","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"json\":{}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sc_send_json_3","name":"intercomswap_sc_send_json","content":"{\"ok\":false,\"code\":\"SC_NOT_JOINED\",\"error\":\"channel not joined locally\"}"},{"role":"assistant","content":"intercomswap_sc_send_json failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sc_send_json__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sc_send_json","tools":[{"type":"function","function":{"name":"intercomswap_sc_send_json","description":"Send a JSON message to a channel (structured payload).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"json":{"type":"object"}},"required":["channel","json"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sc_send_json with these arguments: {\"channel\":\"\",\"json\":{}}"},{"role":"assistant","content":"Cannot call intercomswap_sc_send_json with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_peer_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_peer_status","tools":[{"type":"function","function":{"name":"intercomswap_peer_status","description":"List local peer instances started via prompt tools (reads onchain/peers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional peer instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_status with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_status_1","type":"function","function":{"name":"intercomswap_peer_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_status_1","name":"intercomswap_peer_status","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201,\"instances\":[{\"name\":\"default\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_peer_status completed successfully."}]}
{"id":"intercomswap_peer_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_peer_status","tools":[{"type":"function","function":{"name":"intercomswap_peer_status","description":"List local peer instances started via prompt tools (reads onchain/peers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional peer instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_status with an expanded/edge argument set: {\"name\":\"peer_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_status_2","type":"function","function":{"name":"intercomswap_peer_status","arguments":"{\"name\":\"peer_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_status_2","name":"intercomswap_peer_status","content":"{\"ok\":true,\"name\":\"peer_status_b\",\"status\":\"running\",\"pid\":29302,\"instances\":[{\"name\":\"peer_status_b\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_peer_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_peer_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_peer_status","tools":[{"type":"function","function":{"name":"intercomswap_peer_status","description":"List local peer instances started via prompt tools (reads onchain/peers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional peer instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_status now with this valid argument set even if backend conditions may fail: {\"name\":\"peer_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_status_3","type":"function","function":{"name":"intercomswap_peer_status","arguments":"{\"name\":\"peer_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_status_3","name":"intercomswap_peer_status","content":"{\"ok\":false,\"code\":\"PEER_ALREADY_EXISTS\",\"error\":\"peer start failed: name already exists (peer_status_b)\"}"},{"role":"assistant","content":"intercomswap_peer_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_peer_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_peer_status","tools":[{"type":"function","function":{"name":"intercomswap_peer_status","description":"List local peer instances started via prompt tools (reads onchain/peers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional peer instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_status with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_peer_status with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_peer_start__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_peer_start","tools":[{"type":"function","function":{"name":"intercomswap_peer_start","description":"Start a local peer instance (detached pear run process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Extra sidechannels to join on startup."},"inviter_keys":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"description":"Trusted inviter peer pubkeys (hex32)."},"dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional HyperDHT bootstrap nodes (host:port or ip@host:port)."},"msb_dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional MSB HyperDHT bootstrap nodes (host:port or ip@host:port)."},"subnet_channel":{"type":"string","minLength":1,"maxLength":200,"pattern":"^[^\\s]+$"},"msb_enabled":{"type":"boolean"},"price_oracle_enabled":{"type":"boolean"},"pow_enabled":{"type":"boolean"},"pow_difficulty":{"type":"integer","minimum":0,"maximum":32},"welcome_required":{"type":"boolean"},"invite_required":{"type":"boolean"},"invite_prefixes":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[^\\s]+$"}},"log_path":{"type":"string","minLength":1,"maxLength":400,"description":"Optional log path (must be under onchain/)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_start with these arguments (minimal valid shape): {\"name\":\"peer_start_a\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_start_1","type":"function","function":{"name":"intercomswap_peer_start","arguments":"{\"name\":\"peer_start_a\",\"store\":\"maker_store\",\"sc_port\":9334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_start_1","name":"intercomswap_peer_start","content":"{\"ok\":true,\"name\":\"peer_start_a\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_peer_start completed successfully."}]}
{"id":"intercomswap_peer_start__success_variant","scenario":"success_variant","tool_name":"intercomswap_peer_start","tools":[{"type":"function","function":{"name":"intercomswap_peer_start","description":"Start a local peer instance (detached pear run process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Extra sidechannels to join on startup."},"inviter_keys":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"description":"Trusted inviter peer pubkeys (hex32)."},"dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional HyperDHT bootstrap nodes (host:port or ip@host:port)."},"msb_dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional MSB HyperDHT bootstrap nodes (host:port or ip@host:port)."},"subnet_channel":{"type":"string","minLength":1,"maxLength":200,"pattern":"^[^\\s]+$"},"msb_enabled":{"type":"boolean"},"price_oracle_enabled":{"type":"boolean"},"pow_enabled":{"type":"boolean"},"pow_difficulty":{"type":"integer","minimum":0,"maximum":32},"welcome_required":{"type":"boolean"},"invite_required":{"type":"boolean"},"invite_prefixes":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[^\\s]+$"}},"log_path":{"type":"string","minLength":1,"maxLength":400,"description":"Optional log path (must be under onchain/)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_start with an expanded/edge argument set: {\"name\":\"peer_start_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"inviter_keys\":[\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"],\"dht_bootstrap\":[\"value_2\",\"value_2\"],\"msb_dht_bootstrap\":[\"value_2\",\"value_2\"],\"subnet_channel\":\"0000intercom\",\"msb_enabled\":true,\"price_oracle_enabled\":true,\"pow_enabled\":true,\"pow_difficulty\":3,\"welcome_required\":true,\"invite_required\":true,\"invite_prefixes\":[\"value_2\",\"value_2\"],\"log_path\":\"onchain/logs/peer-maker.log\",\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_start_2","type":"function","function":{"name":"intercomswap_peer_start","arguments":"{\"name\":\"peer_start_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"inviter_keys\":[\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"],\"dht_bootstrap\":[\"value_2\",\"value_2\"],\"msb_dht_bootstrap\":[\"value_2\",\"value_2\"],\"subnet_channel\":\"0000intercom\",\"msb_enabled\":true,\"price_oracle_enabled\":true,\"pow_enabled\":true,\"pow_difficulty\":3,\"welcome_required\":true,\"invite_required\":true,\"invite_prefixes\":[\"value_2\",\"value_2\"],\"log_path\":\"onchain/logs/peer-maker.log\",\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_start_2","name":"intercomswap_peer_start","content":"{\"ok\":true,\"name\":\"peer_start_b\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_peer_start succeeded with the expanded parameter set."}]}
{"id":"intercomswap_peer_start__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_peer_start","tools":[{"type":"function","function":{"name":"intercomswap_peer_start","description":"Start a local peer instance (detached pear run process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Extra sidechannels to join on startup."},"inviter_keys":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"description":"Trusted inviter peer pubkeys (hex32)."},"dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional HyperDHT bootstrap nodes (host:port or ip@host:port)."},"msb_dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional MSB HyperDHT bootstrap nodes (host:port or ip@host:port)."},"subnet_channel":{"type":"string","minLength":1,"maxLength":200,"pattern":"^[^\\s]+$"},"msb_enabled":{"type":"boolean"},"price_oracle_enabled":{"type":"boolean"},"pow_enabled":{"type":"boolean"},"pow_difficulty":{"type":"integer","minimum":0,"maximum":32},"welcome_required":{"type":"boolean"},"invite_required":{"type":"boolean"},"invite_prefixes":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[^\\s]+$"}},"log_path":{"type":"string","minLength":1,"maxLength":400,"description":"Optional log path (must be under onchain/)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_start now with this valid argument set even if backend conditions may fail: {\"name\":\"peer_start_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"inviter_keys\":[\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"],\"dht_bootstrap\":[\"value_2\",\"value_2\"],\"msb_dht_bootstrap\":[\"value_2\",\"value_2\"],\"subnet_channel\":\"0000intercom\",\"msb_enabled\":true,\"price_oracle_enabled\":true,\"pow_enabled\":true,\"pow_difficulty\":3,\"welcome_required\":true,\"invite_required\":true,\"invite_prefixes\":[\"value_2\",\"value_2\"],\"log_path\":\"onchain/logs/peer-maker.log\",\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_start_3","type":"function","function":{"name":"intercomswap_peer_start","arguments":"{\"name\":\"peer_start_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"sidechannels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"inviter_keys\":[\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"],\"dht_bootstrap\":[\"value_2\",\"value_2\"],\"msb_dht_bootstrap\":[\"value_2\",\"value_2\"],\"subnet_channel\":\"0000intercom\",\"msb_enabled\":true,\"price_oracle_enabled\":true,\"pow_enabled\":true,\"pow_difficulty\":3,\"welcome_required\":true,\"invite_required\":true,\"invite_prefixes\":[\"value_2\",\"value_2\"],\"log_path\":\"onchain/logs/peer-maker.log\",\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_start_3","name":"intercomswap_peer_start","content":"{\"ok\":false,\"code\":\"PEER_ALREADY_EXISTS\",\"error\":\"peer start failed: name already exists (peer_start_b)\"}"},{"role":"assistant","content":"intercomswap_peer_start failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_peer_start__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_peer_start","tools":[{"type":"function","function":{"name":"intercomswap_peer_start","description":"Start a local peer instance (detached pear run process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"sidechannels":{"type":"array","minItems":0,"maxItems":50,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Extra sidechannels to join on startup."},"inviter_keys":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"description":"Trusted inviter peer pubkeys (hex32)."},"dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional HyperDHT bootstrap nodes (host:port or ip@host:port)."},"msb_dht_bootstrap":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":3,"maxLength":200,"pattern":"^[^\\s]+$"},"description":"Optional MSB HyperDHT bootstrap nodes (host:port or ip@host:port)."},"subnet_channel":{"type":"string","minLength":1,"maxLength":200,"pattern":"^[^\\s]+$"},"msb_enabled":{"type":"boolean"},"price_oracle_enabled":{"type":"boolean"},"pow_enabled":{"type":"boolean"},"pow_difficulty":{"type":"integer","minimum":0,"maximum":32},"welcome_required":{"type":"boolean"},"invite_required":{"type":"boolean"},"invite_prefixes":{"type":"array","minItems":0,"maxItems":25,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[^\\s]+$"}},"log_path":{"type":"string","minLength":1,"maxLength":400,"description":"Optional log path (must be under onchain/)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_start with these arguments: {\"name\":\"\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","content":"Cannot call intercomswap_peer_start with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_peer_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_peer_stop","tools":[{"type":"function","function":{"name":"intercomswap_peer_stop","description":"Stop a local peer instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_stop with these arguments (minimal valid shape): {\"name\":\"peer_stop_a\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_stop_1","type":"function","function":{"name":"intercomswap_peer_stop","arguments":"{\"name\":\"peer_stop_a\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_stop_1","name":"intercomswap_peer_stop","content":"{\"ok\":true,\"name\":\"peer_stop_a\",\"status\":\"stopped\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_peer_stop completed successfully."}]}
{"id":"intercomswap_peer_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_peer_stop","tools":[{"type":"function","function":{"name":"intercomswap_peer_stop","description":"Stop a local peer instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_stop with an expanded/edge argument set: {\"name\":\"peer_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_stop_2","type":"function","function":{"name":"intercomswap_peer_stop","arguments":"{\"name\":\"peer_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_stop_2","name":"intercomswap_peer_stop","content":"{\"ok\":true,\"name\":\"peer_stop_b\",\"status\":\"stopped\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_peer_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_peer_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_peer_stop","tools":[{"type":"function","function":{"name":"intercomswap_peer_stop","description":"Stop a local peer instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_stop now with this valid argument set even if backend conditions may fail: {\"name\":\"peer_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_stop_3","type":"function","function":{"name":"intercomswap_peer_stop","arguments":"{\"name\":\"peer_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_stop_3","name":"intercomswap_peer_stop","content":"{\"ok\":false,\"code\":\"PEER_ALREADY_EXISTS\",\"error\":\"peer start failed: name already exists (peer_stop_b)\"}"},{"role":"assistant","content":"intercomswap_peer_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_peer_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_peer_stop","tools":[{"type":"function","function":{"name":"intercomswap_peer_stop","description":"Stop a local peer instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_stop with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_peer_stop with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_peer_restart__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_peer_restart","tools":[{"type":"function","function":{"name":"intercomswap_peer_restart","description":"Restart a local peer instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_restart with these arguments (minimal valid shape): {\"name\":\"peer_restart_a\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_restart_1","type":"function","function":{"name":"intercomswap_peer_restart","arguments":"{\"name\":\"peer_restart_a\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_restart_1","name":"intercomswap_peer_restart","content":"{\"ok\":true,\"name\":\"peer_restart_a\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_peer_restart completed successfully."}]}
{"id":"intercomswap_peer_restart__success_variant","scenario":"success_variant","tool_name":"intercomswap_peer_restart","tools":[{"type":"function","function":{"name":"intercomswap_peer_restart","description":"Restart a local peer instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_restart with an expanded/edge argument set: {\"name\":\"peer_restart_b\",\"wait_ms\":5000,\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_restart_2","type":"function","function":{"name":"intercomswap_peer_restart","arguments":"{\"name\":\"peer_restart_b\",\"wait_ms\":5000,\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_restart_2","name":"intercomswap_peer_restart","content":"{\"ok\":true,\"name\":\"peer_restart_b\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_peer_restart succeeded with the expanded parameter set."}]}
{"id":"intercomswap_peer_restart__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_peer_restart","tools":[{"type":"function","function":{"name":"intercomswap_peer_restart","description":"Restart a local peer instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_restart now with this valid argument set even if backend conditions may fail: {\"name\":\"peer_restart_b\",\"wait_ms\":5000,\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_peer_restart_3","type":"function","function":{"name":"intercomswap_peer_restart","arguments":"{\"name\":\"peer_restart_b\",\"wait_ms\":5000,\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_peer_restart_3","name":"intercomswap_peer_restart","content":"{\"ok\":false,\"code\":\"PEER_ALREADY_EXISTS\",\"error\":\"peer start failed: name already exists (peer_restart_b)\"}"},{"role":"assistant","content":"intercomswap_peer_restart failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_peer_restart__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_peer_restart","tools":[{"type":"function","function":{"name":"intercomswap_peer_restart","description":"Restart a local peer instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for SC-Bridge port to open (default 15000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_peer_restart with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_peer_restart with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_offer_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_offer_post","tools":[{"type":"function","function":{"name":"intercomswap_offer_post","description":"Post a signed Offer announcement (swap.svc_announce) into rendezvous channels (advertise: have USDT, want BTC; prompts BTC sellers to post matching RFQs).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to broadcast the offer announcement into."},"trade_id":{"type":"string","minLength":1,"maxLength":128,"description":"Optional stable id for the announcement. If omitted, derived from name."},"name":{"type":"string","minLength":1,"maxLength":128,"description":"Short label shown to peers (example: \"maker:alice\")."},"rfq_channels":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Where BTC sellers should post the matching RFQ (defaults to the same channels)."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Optional TTL for the announcement (seconds). Used to compute valid_until_unix."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the announcement (unix seconds)."},"offers":{"type":"array","minItems":1,"maxItems":20,"description":"Structured offers. These mirror RFQ fields so a seller can post an RFQ with minimal back-and-forth.","items":{"type":"object","additionalProperties":false,"properties":{"pair":{"type":"string","enum":["BTC_LN/USDT_SOL"]},"have":{"type":"string","enum":["USDT_SOL"]},"want":{"type":"string","enum":["BTC_LN"]},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800}},"required":["btc_sats","usdt_amount"]}}},"required":["channels","name","offers"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_offer_post with these arguments (minimal valid shape): {\"channels\":[\"0000intercomswapbtcusdt\"],\"name\":\"offer_post_a\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_offer_post_1","type":"function","function":{"name":"intercomswap_offer_post","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\"],\"name\":\"offer_post_a\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_offer_post_1","name":"intercomswap_offer_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.svc_announce\",\"envelope_id\":\"3a9f48d3bb091ca6c508d1026dea47384a334ac073971bc8daad8c3acde717a7\",\"sig\":\"e4dd13973f6c02d4\"}"},{"role":"assistant","content":"intercomswap_offer_post completed successfully."}]}
{"id":"intercomswap_offer_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_offer_post","tools":[{"type":"function","function":{"name":"intercomswap_offer_post","description":"Post a signed Offer announcement (swap.svc_announce) into rendezvous channels (advertise: have USDT, want BTC; prompts BTC sellers to post matching RFQs).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to broadcast the offer announcement into."},"trade_id":{"type":"string","minLength":1,"maxLength":128,"description":"Optional stable id for the announcement. If omitted, derived from name."},"name":{"type":"string","minLength":1,"maxLength":128,"description":"Short label shown to peers (example: \"maker:alice\")."},"rfq_channels":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Where BTC sellers should post the matching RFQ (defaults to the same channels)."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Optional TTL for the announcement (seconds). Used to compute valid_until_unix."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the announcement (unix seconds)."},"offers":{"type":"array","minItems":1,"maxItems":20,"description":"Structured offers. These mirror RFQ fields so a seller can post an RFQ with minimal back-and-forth.","items":{"type":"object","additionalProperties":false,"properties":{"pair":{"type":"string","enum":["BTC_LN/USDT_SOL"]},"have":{"type":"string","enum":["USDT_SOL"]},"want":{"type":"string","enum":["BTC_LN"]},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800}},"required":["btc_sats","usdt_amount"]}}},"required":["channels","name","offers"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_offer_post with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"name\":\"offer_post_b\",\"rfq_channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ttl_sec\":3600,\"offers\":[{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000},{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000}]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_offer_post_2","type":"function","function":{"name":"intercomswap_offer_post","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"name\":\"offer_post_b\",\"rfq_channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ttl_sec\":3600,\"offers\":[{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000},{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000}]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_offer_post_2","name":"intercomswap_offer_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.svc_announce\",\"envelope_id\":\"5d59e18d9f19f2fb6f566bb18b5d0eb65f2ce99ff1f2aa0fe89793cc5ee4e6af\",\"sig\":\"7325838699050ca4\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_offer_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_offer_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_offer_post","tools":[{"type":"function","function":{"name":"intercomswap_offer_post","description":"Post a signed Offer announcement (swap.svc_announce) into rendezvous channels (advertise: have USDT, want BTC; prompts BTC sellers to post matching RFQs).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to broadcast the offer announcement into."},"trade_id":{"type":"string","minLength":1,"maxLength":128,"description":"Optional stable id for the announcement. If omitted, derived from name."},"name":{"type":"string","minLength":1,"maxLength":128,"description":"Short label shown to peers (example: \"maker:alice\")."},"rfq_channels":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Where BTC sellers should post the matching RFQ (defaults to the same channels)."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Optional TTL for the announcement (seconds). Used to compute valid_until_unix."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the announcement (unix seconds)."},"offers":{"type":"array","minItems":1,"maxItems":20,"description":"Structured offers. These mirror RFQ fields so a seller can post an RFQ with minimal back-and-forth.","items":{"type":"object","additionalProperties":false,"properties":{"pair":{"type":"string","enum":["BTC_LN/USDT_SOL"]},"have":{"type":"string","enum":["USDT_SOL"]},"want":{"type":"string","enum":["BTC_LN"]},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800}},"required":["btc_sats","usdt_amount"]}}},"required":["channels","name","offers"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_offer_post now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"name\":\"offer_post_b\",\"rfq_channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ttl_sec\":3600,\"offers\":[{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000},{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000}]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_offer_post_3","type":"function","function":{"name":"intercomswap_offer_post","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"name\":\"offer_post_b\",\"rfq_channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"ttl_sec\":3600,\"offers\":[{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000},{\"pair\":\"BTC_LN/USDT_SOL\",\"have\":\"USDT_SOL\",\"want\":\"BTC_LN\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000}]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_offer_post_3","name":"intercomswap_offer_post","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_offer_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_offer_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_offer_post","tools":[{"type":"function","function":{"name":"intercomswap_offer_post","description":"Post a signed Offer announcement (swap.svc_announce) into rendezvous channels (advertise: have USDT, want BTC; prompts BTC sellers to post matching RFQs).","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to broadcast the offer announcement into."},"trade_id":{"type":"string","minLength":1,"maxLength":128,"description":"Optional stable id for the announcement. If omitted, derived from name."},"name":{"type":"string","minLength":1,"maxLength":128,"description":"Short label shown to peers (example: \"maker:alice\")."},"rfq_channels":{"type":"array","minItems":0,"maxItems":20,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Where BTC sellers should post the matching RFQ (defaults to the same channels)."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Optional TTL for the announcement (seconds). Used to compute valid_until_unix."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the announcement (unix seconds)."},"offers":{"type":"array","minItems":1,"maxItems":20,"description":"Structured offers. These mirror RFQ fields so a seller can post an RFQ with minimal back-and-forth.","items":{"type":"object","additionalProperties":false,"properties":{"pair":{"type":"string","enum":["BTC_LN/USDT_SOL"]},"have":{"type":"string","enum":["USDT_SOL"]},"want":{"type":"string","enum":["BTC_LN"]},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800}},"required":["btc_sats","usdt_amount"]}}},"required":["channels","name","offers"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_offer_post with these arguments: {\"channels\":\"not-an-array\",\"name\":\"offer_post_a\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}"},{"role":"assistant","content":"Cannot call intercomswap_offer_post with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfq_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfq_post","tools":[{"type":"function","function":{"name":"intercomswap_rfq_post","description":"Post a signed RFQ envelope into an RFQ rendezvous channel (BTC_LN->USDT_SOL: sell BTC for USDT).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional Solana recipient pubkey for USDT settlement. Recommended/required for full auto swap settlement."},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500,"description":"Optional fee ceiling for platform fee (bps)."},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000,"description":"Optional fee ceiling for trade fee (bps)."},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500,"description":"Optional ceiling for platform+trade fee (bps)."},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional minimum Solana refund/claim window in seconds."},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional maximum Solana refund/claim window in seconds."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the RFQ (unix seconds)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","trade_id","btc_sats","usdt_amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfq_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfq_post_1","type":"function","function":{"name":"intercomswap_rfq_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfq_post_1","name":"intercomswap_rfq_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.rfq\",\"envelope_id\":\"2337c599d1c547c7309f425926aa418aba1e5154ac19491f5e2180f59dc0b1bd\",\"sig\":\"4c89dce829cd9340\"}"},{"role":"assistant","content":"intercomswap_rfq_post completed successfully."}]}
{"id":"intercomswap_rfq_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfq_post","tools":[{"type":"function","function":{"name":"intercomswap_rfq_post","description":"Post a signed RFQ envelope into an RFQ rendezvous channel (BTC_LN->USDT_SOL: sell BTC for USDT).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional Solana recipient pubkey for USDT settlement. Recommended/required for full auto swap settlement."},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500,"description":"Optional fee ceiling for platform fee (bps)."},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000,"description":"Optional fee ceiling for trade fee (bps)."},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500,"description":"Optional ceiling for platform+trade fee (bps)."},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional minimum Solana refund/claim window in seconds."},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional maximum Solana refund/claim window in seconds."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the RFQ (unix seconds)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","trade_id","btc_sats","usdt_amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfq_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000,\"valid_until_unix\":1772600000,\"ln_liquidity_mode\":\"aggregate\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfq_post_2","type":"function","function":{"name":"intercomswap_rfq_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000,\"valid_until_unix\":1772600000,\"ln_liquidity_mode\":\"aggregate\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfq_post_2","name":"intercomswap_rfq_post","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.rfq\",\"envelope_id\":\"e2a94879ef44e5db399a881092b114cdf6c077cf63b1ca846b71c24fedcce310\",\"sig\":\"ee3db6a9947bc9cd\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_rfq_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfq_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfq_post","tools":[{"type":"function","function":{"name":"intercomswap_rfq_post","description":"Post a signed RFQ envelope into an RFQ rendezvous channel (BTC_LN->USDT_SOL: sell BTC for USDT).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional Solana recipient pubkey for USDT settlement. Recommended/required for full auto swap settlement."},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500,"description":"Optional fee ceiling for platform fee (bps)."},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000,"description":"Optional fee ceiling for trade fee (bps)."},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500,"description":"Optional ceiling for platform+trade fee (bps)."},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional minimum Solana refund/claim window in seconds."},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional maximum Solana refund/claim window in seconds."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the RFQ (unix seconds)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","trade_id","btc_sats","usdt_amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfq_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000,\"valid_until_unix\":1772600000,\"ln_liquidity_mode\":\"aggregate\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfq_post_3","type":"function","function":{"name":"intercomswap_rfq_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"max_platform_fee_bps\":25,\"max_trade_fee_bps\":25,\"max_total_fee_bps\":25,\"min_sol_refund_window_sec\":204000,\"max_sol_refund_window_sec\":204000,\"valid_until_unix\":1772600000,\"ln_liquidity_mode\":\"aggregate\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfq_post_3","name":"intercomswap_rfq_post","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_rfq_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfq_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfq_post","tools":[{"type":"function","function":{"name":"intercomswap_rfq_post","description":"Post a signed RFQ envelope into an RFQ rendezvous channel (BTC_LN->USDT_SOL: sell BTC for USDT).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional Solana recipient pubkey for USDT settlement. Recommended/required for full auto swap settlement."},"max_platform_fee_bps":{"type":"integer","minimum":0,"maximum":500,"description":"Optional fee ceiling for platform fee (bps)."},"max_trade_fee_bps":{"type":"integer","minimum":0,"maximum":1000,"description":"Optional fee ceiling for trade fee (bps)."},"max_total_fee_bps":{"type":"integer","minimum":0,"maximum":1500,"description":"Optional ceiling for platform+trade fee (bps)."},"min_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional minimum Solana refund/claim window in seconds."},"max_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Optional maximum Solana refund/claim window in seconds."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for the RFQ (unix seconds)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","trade_id","btc_sats","usdt_amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfq_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\"}"},{"role":"assistant","content":"Cannot call intercomswap_rfq_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_quote_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_quote_post","tools":[{"type":"function","function":{"name":"intercomswap_quote_post","description":"Post a signed QUOTE envelope into an RFQ channel (references an RFQ id). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"rfq_id":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","trade_id","rfq_id","btc_sats","usdt_amount","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"rfq_id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_1","type":"function","function":{"name":"intercomswap_quote_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"rfq_id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_1","name":"intercomswap_quote_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.quote\",\"envelope_id\":\"8f4c6b17ca831cde9fe18fec6554a4e5c3e41181207b8fd07edadcf43af9110a\",\"sig\":\"2d1c13daed0c022b\"}"},{"role":"assistant","content":"intercomswap_quote_post completed successfully."}]}
{"id":"intercomswap_quote_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_quote_post","tools":[{"type":"function","function":{"name":"intercomswap_quote_post","description":"Post a signed QUOTE envelope into an RFQ channel (references an RFQ id). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"rfq_id":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","trade_id","rfq_id","btc_sats","usdt_amount","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"rfq_id\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_2","type":"function","function":{"name":"intercomswap_quote_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"rfq_id\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_2","name":"intercomswap_quote_post","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.quote\",\"envelope_id\":\"d6da983fcfbc93b539d639cc46067e043bebb1c9f18458913450fc4513f567cc\",\"sig\":\"8269c4125eb92f6e\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_quote_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_quote_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_quote_post","tools":[{"type":"function","function":{"name":"intercomswap_quote_post","description":"Post a signed QUOTE envelope into an RFQ channel (references an RFQ id). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"rfq_id":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","trade_id","rfq_id","btc_sats","usdt_amount","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"rfq_id\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_3","type":"function","function":{"name":"intercomswap_quote_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"rfq_id\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_3","name":"intercomswap_quote_post","content":"{\"ok\":false,\"code\":\"FEE_LIMIT_EXCEEDED\",\"error\":\"intercomswap_quote_post_from_rfq: on-chain trade fee exceeds RFQ max_trade_fee_bps\"}"},{"role":"assistant","content":"intercomswap_quote_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_quote_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_quote_post","tools":[{"type":"function","function":{"name":"intercomswap_quote_post","description":"Post a signed QUOTE envelope into an RFQ channel (references an RFQ id). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"rfq_id":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","trade_id","rfq_id","btc_sats","usdt_amount","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"rfq_id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"},{"role":"assistant","content":"Cannot call intercomswap_quote_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_quote_post_from_rfq__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_quote_post_from_rfq","tools":[{"type":"function","function":{"name":"intercomswap_quote_post_from_rfq","description":"Maker: post a signed QUOTE that matches an RFQ envelope (no manual rfq_id/btc_sats/usdt_amount required). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"rfq_envelope":{"anyOf":[{"type":"object","description":"Full signed RFQ envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an RFQ envelope."}]},"offer_envelope":{"anyOf":[{"type":"object","description":"Optional signed Offer (swap.svc_announce) envelope used for deterministic offer-line locking."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to an Offer envelope."}]},"offer_line_index":{"type":"integer","minimum":0,"maximum":1000000,"description":"Optional offer line index (requires offer_envelope). Used to lock exactly one offer line."},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","rfq_envelope","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post_from_rfq with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"rfq_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_from_rfq_1","type":"function","function":{"name":"intercomswap_quote_post_from_rfq","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"rfq_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_from_rfq_1","name":"intercomswap_quote_post_from_rfq","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.quote\",\"envelope_id\":\"07d747a76c555a5855ac4f8fc4bcc844c2186b227bd11ee59bf4eb29054559d5\",\"sig\":\"9cc635ac9798f65f\"}"},{"role":"assistant","content":"intercomswap_quote_post_from_rfq completed successfully."}]}
{"id":"intercomswap_quote_post_from_rfq__success_variant","scenario":"success_variant","tool_name":"intercomswap_quote_post_from_rfq","tools":[{"type":"function","function":{"name":"intercomswap_quote_post_from_rfq","description":"Maker: post a signed QUOTE that matches an RFQ envelope (no manual rfq_id/btc_sats/usdt_amount required). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"rfq_envelope":{"anyOf":[{"type":"object","description":"Full signed RFQ envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an RFQ envelope."}]},"offer_envelope":{"anyOf":[{"type":"object","description":"Optional signed Offer (swap.svc_announce) envelope used for deterministic offer-line locking."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to an Offer envelope."}]},"offer_line_index":{"type":"integer","minimum":0,"maximum":1000000,"description":"Optional offer line index (requires offer_envelope). Used to lock exactly one offer line."},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","rfq_envelope","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post_from_rfq with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"rfq_envelope\":{\"kind\":\"swap.rfq\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_envelope\":{\"kind\":\"swap.unknown\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_line_index\":333333,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_from_rfq_2","type":"function","function":{"name":"intercomswap_quote_post_from_rfq","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"rfq_envelope\":{\"kind\":\"swap.rfq\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_envelope\":{\"kind\":\"swap.unknown\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_line_index\":333333,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_from_rfq_2","name":"intercomswap_quote_post_from_rfq","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.quote\",\"envelope_id\":\"c4005882a719231d4911b1e160a48d2440690380a5fa3207f1f1e38e35f707d1\",\"sig\":\"96278db8522bb09f\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_quote_post_from_rfq succeeded with the expanded parameter set."}]}
{"id":"intercomswap_quote_post_from_rfq__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_quote_post_from_rfq","tools":[{"type":"function","function":{"name":"intercomswap_quote_post_from_rfq","description":"Maker: post a signed QUOTE that matches an RFQ envelope (no manual rfq_id/btc_sats/usdt_amount required). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"rfq_envelope":{"anyOf":[{"type":"object","description":"Full signed RFQ envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an RFQ envelope."}]},"offer_envelope":{"anyOf":[{"type":"object","description":"Optional signed Offer (swap.svc_announce) envelope used for deterministic offer-line locking."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to an Offer envelope."}]},"offer_line_index":{"type":"integer","minimum":0,"maximum":1000000,"description":"Optional offer line index (requires offer_envelope). Used to lock exactly one offer line."},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","rfq_envelope","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post_from_rfq now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"rfq_envelope\":{\"kind\":\"swap.rfq\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_envelope\":{\"kind\":\"swap.unknown\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_line_index\":333333,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_post_from_rfq_3","type":"function","function":{"name":"intercomswap_quote_post_from_rfq","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"rfq_envelope\":{\"kind\":\"swap.rfq\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_envelope\":{\"kind\":\"swap.unknown\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"offer_line_index\":333333,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_window_sec\":204000,\"valid_for_sec\":1800}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_post_from_rfq_3","name":"intercomswap_quote_post_from_rfq","content":"{\"ok\":false,\"code\":\"FEE_LIMIT_EXCEEDED\",\"error\":\"intercomswap_quote_post_from_rfq: on-chain trade fee exceeds RFQ max_trade_fee_bps\"}"},{"role":"assistant","content":"intercomswap_quote_post_from_rfq failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_quote_post_from_rfq__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_quote_post_from_rfq","tools":[{"type":"function","function":{"name":"intercomswap_quote_post_from_rfq","description":"Maker: post a signed QUOTE that matches an RFQ envelope (no manual rfq_id/btc_sats/usdt_amount required). Fees are read from on-chain config/trade-config (not negotiated). Provide either valid_until_unix or valid_for_sec.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"rfq_envelope":{"anyOf":[{"type":"object","description":"Full signed RFQ envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an RFQ envelope."}]},"offer_envelope":{"anyOf":[{"type":"object","description":"Optional signed Offer (swap.svc_announce) envelope used for deterministic offer-line locking."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to an Offer envelope."}]},"offer_line_index":{"type":"integer","minimum":0,"maximum":1000000,"description":"Optional offer line index (requires offer_envelope). Used to lock exactly one offer line."},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Solana refund/claim window (seconds) that will be used in binding TERMS."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"valid_for_sec":{"type":"integer","minimum":10,"maximum":604800}},"required":["channel","rfq_envelope","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_post_from_rfq with these arguments: {\"channel\":\"\",\"rfq_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"valid_for_sec\":600}"},{"role":"assistant","content":"Cannot call intercomswap_quote_post_from_rfq with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_quote_accept__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_quote_accept","tools":[{"type":"function","function":{"name":"intercomswap_quote_accept","description":"Post a signed QUOTE_ACCEPT envelope into the RFQ channel (accept a quote).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"quote_envelope":{"anyOf":[{"type":"object","description":"Full signed quote envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a quote envelope."}]},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode before accepting the quote. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","quote_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_accept with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"quote_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_accept_1","type":"function","function":{"name":"intercomswap_quote_accept","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"quote_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_accept_1","name":"intercomswap_quote_accept","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.quote_accept\",\"envelope_id\":\"978e51c70ad525b299a62bfb0ed2c8d366279d3da292c1fca1a0341455cf1d87\",\"sig\":\"3ca8b3e6af07414e\"}"},{"role":"assistant","content":"intercomswap_quote_accept completed successfully."}]}
{"id":"intercomswap_quote_accept__success_variant","scenario":"success_variant","tool_name":"intercomswap_quote_accept","tools":[{"type":"function","function":{"name":"intercomswap_quote_accept","description":"Post a signed QUOTE_ACCEPT envelope into the RFQ channel (accept a quote).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"quote_envelope":{"anyOf":[{"type":"object","description":"Full signed quote envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a quote envelope."}]},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode before accepting the quote. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","quote_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_accept with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"ln_liquidity_mode\":\"aggregate\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_accept_2","type":"function","function":{"name":"intercomswap_quote_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"ln_liquidity_mode\":\"aggregate\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_accept_2","name":"intercomswap_quote_accept","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.quote_accept\",\"envelope_id\":\"e3d1f6508225053f9489bbdfdf03f1c5d1a6d903e9d696c253fdf8e641ead37a\",\"sig\":\"d26ff2960a1a1ad3\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_quote_accept succeeded with the expanded parameter set."}]}
{"id":"intercomswap_quote_accept__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_quote_accept","tools":[{"type":"function","function":{"name":"intercomswap_quote_accept","description":"Post a signed QUOTE_ACCEPT envelope into the RFQ channel (accept a quote).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"quote_envelope":{"anyOf":[{"type":"object","description":"Full signed quote envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a quote envelope."}]},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode before accepting the quote. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","quote_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_accept now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"ln_liquidity_mode\":\"aggregate\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_quote_accept_3","type":"function","function":{"name":"intercomswap_quote_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"ln_liquidity_mode\":\"aggregate\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_quote_accept_3","name":"intercomswap_quote_accept","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_quote_accept failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_quote_accept__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_quote_accept","tools":[{"type":"function","function":{"name":"intercomswap_quote_accept","description":"Post a signed QUOTE_ACCEPT envelope into the RFQ channel (accept a quote).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"quote_envelope":{"anyOf":[{"type":"object","description":"Full signed quote envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a quote envelope."}]},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"],"description":"Lightning outbound liquidity guardrail mode before accepting the quote. single_channel (default) requires one active channel to cover btc_sats; aggregate allows sum across active channels."}},"required":["channel","quote_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_quote_accept with these arguments: {\"channel\":\"\",\"quote_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_quote_accept with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_invite_from_accept__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_invite_from_accept","tools":[{"type":"function","function":{"name":"intercomswap_swap_invite_from_accept","description":"Maker: generate welcome+invite and post SWAP_INVITE into the RFQ channel, based on an accepted quote.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"accept_envelope":{"anyOf":[{"type":"object","description":"Full signed QUOTE_ACCEPT envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an accept envelope."}]},"quote_envelope":{"anyOf":[{"type":"object","description":"Optional signed QUOTE envelope for strict cross-check against accept.quote_id."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to a quote envelope."}]},"swap_channel":{"type":"string","minLength":1,"maxLength":128,"description":"Optional explicit swap:<id> channel name. If omitted, derived."},"welcome_text":{"type":"string","minLength":1,"maxLength":500},"ttl_sec":{"type":"integer","minimum":30,"maximum":604800}},"required":["channel","accept_envelope","welcome_text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_invite_from_accept with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"accept_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"welcome_text\":\"Welcome to the private swap channel.\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_invite_from_accept_1","type":"function","function":{"name":"intercomswap_swap_invite_from_accept","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"accept_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"welcome_text\":\"Welcome to the private swap channel.\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_invite_from_accept_1","name":"intercomswap_swap_invite_from_accept","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.swap_invite\",\"envelope_id\":\"76f9135a83eaa5c7126320377e323a6052e4b55390669057a3ea0acb73c54ab5\",\"sig\":\"1347802590c06eaa\"}"},{"role":"assistant","content":"intercomswap_swap_invite_from_accept completed successfully."}]}
{"id":"intercomswap_swap_invite_from_accept__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_invite_from_accept","tools":[{"type":"function","function":{"name":"intercomswap_swap_invite_from_accept","description":"Maker: generate welcome+invite and post SWAP_INVITE into the RFQ channel, based on an accepted quote.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"accept_envelope":{"anyOf":[{"type":"object","description":"Full signed QUOTE_ACCEPT envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an accept envelope."}]},"quote_envelope":{"anyOf":[{"type":"object","description":"Optional signed QUOTE envelope for strict cross-check against accept.quote_id."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to a quote envelope."}]},"swap_channel":{"type":"string","minLength":1,"maxLength":128,"description":"Optional explicit swap:<id> channel name. If omitted, derived."},"welcome_text":{"type":"string","minLength":1,"maxLength":500},"ttl_sec":{"type":"integer","minimum":30,"maximum":604800}},"required":["channel","accept_envelope","welcome_text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_invite_from_accept with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"accept_envelope\":{\"kind\":\"swap.quote_accept\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"swap_channel\":\"swap:rfq-1771000001-e5f6a7b8\",\"welcome_text\":\"Invite accepted, proceed with settlement.\",\"ttl_sec\":3600}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_invite_from_accept_2","type":"function","function":{"name":"intercomswap_swap_invite_from_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"accept_envelope\":{\"kind\":\"swap.quote_accept\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"swap_channel\":\"swap:rfq-1771000001-e5f6a7b8\",\"welcome_text\":\"Invite accepted, proceed with settlement.\",\"ttl_sec\":3600}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_invite_from_accept_2","name":"intercomswap_swap_invite_from_accept","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.swap_invite\",\"envelope_id\":\"e78a3a00534d899f78a5a30dc0ac81c86966aabc455438546c6aceea1c864eaf\",\"sig\":\"47e872cbaa9cf549\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_swap_invite_from_accept succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_invite_from_accept__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_invite_from_accept","tools":[{"type":"function","function":{"name":"intercomswap_swap_invite_from_accept","description":"Maker: generate welcome+invite and post SWAP_INVITE into the RFQ channel, based on an accepted quote.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"accept_envelope":{"anyOf":[{"type":"object","description":"Full signed QUOTE_ACCEPT envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an accept envelope."}]},"quote_envelope":{"anyOf":[{"type":"object","description":"Optional signed QUOTE envelope for strict cross-check against accept.quote_id."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to a quote envelope."}]},"swap_channel":{"type":"string","minLength":1,"maxLength":128,"description":"Optional explicit swap:<id> channel name. If omitted, derived."},"welcome_text":{"type":"string","minLength":1,"maxLength":500},"ttl_sec":{"type":"integer","minimum":30,"maximum":604800}},"required":["channel","accept_envelope","welcome_text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_invite_from_accept now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"accept_envelope\":{\"kind\":\"swap.quote_accept\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"swap_channel\":\"swap:rfq-1771000001-e5f6a7b8\",\"welcome_text\":\"Invite accepted, proceed with settlement.\",\"ttl_sec\":3600}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_invite_from_accept_3","type":"function","function":{"name":"intercomswap_swap_invite_from_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"accept_envelope\":{\"kind\":\"swap.quote_accept\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"quote_envelope\":{\"kind\":\"swap.quote\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"swap_channel\":\"swap:rfq-1771000001-e5f6a7b8\",\"welcome_text\":\"Invite accepted, proceed with settlement.\",\"ttl_sec\":3600}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_invite_from_accept_3","name":"intercomswap_swap_invite_from_accept","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_swap_invite_from_accept failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_invite_from_accept__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_invite_from_accept","tools":[{"type":"function","function":{"name":"intercomswap_swap_invite_from_accept","description":"Maker: generate welcome+invite and post SWAP_INVITE into the RFQ channel, based on an accepted quote.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"accept_envelope":{"anyOf":[{"type":"object","description":"Full signed QUOTE_ACCEPT envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an accept envelope."}]},"quote_envelope":{"anyOf":[{"type":"object","description":"Optional signed QUOTE envelope for strict cross-check against accept.quote_id."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Optional secret handle to a quote envelope."}]},"swap_channel":{"type":"string","minLength":1,"maxLength":128,"description":"Optional explicit swap:<id> channel name. If omitted, derived."},"welcome_text":{"type":"string","minLength":1,"maxLength":500},"ttl_sec":{"type":"integer","minimum":30,"maximum":604800}},"required":["channel","accept_envelope","welcome_text"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_invite_from_accept with these arguments: {\"channel\":\"\",\"accept_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"welcome_text\":\"Welcome to the private swap channel.\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_invite_from_accept with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_join_from_swap_invite__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_join_from_swap_invite","tools":[{"type":"function","function":{"name":"intercomswap_join_from_swap_invite","description":"Taker: join swap:<id> channel using SWAP_INVITE envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"swap_invite_envelope":{"anyOf":[{"type":"object","description":"Full signed SWAP_INVITE envelope received from maker."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a swap invite envelope."}]}},"required":["swap_invite_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_join_from_swap_invite with these arguments (minimal valid shape): {\"swap_invite_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_join_from_swap_invite_1","type":"function","function":{"name":"intercomswap_join_from_swap_invite","arguments":"{\"swap_invite_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_join_from_swap_invite_1","name":"intercomswap_join_from_swap_invite","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.join\",\"envelope_id\":\"5eb54cdbd298310e803bcdfeba9aa064df1a665d2b3e82bc5f8c06a2dd0a3345\",\"sig\":\"4d75901680270a1d\"}"},{"role":"assistant","content":"intercomswap_join_from_swap_invite completed successfully."}]}
{"id":"intercomswap_join_from_swap_invite__success_variant","scenario":"success_variant","tool_name":"intercomswap_join_from_swap_invite","tools":[{"type":"function","function":{"name":"intercomswap_join_from_swap_invite","description":"Taker: join swap:<id> channel using SWAP_INVITE envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"swap_invite_envelope":{"anyOf":[{"type":"object","description":"Full signed SWAP_INVITE envelope received from maker."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a swap invite envelope."}]}},"required":["swap_invite_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_join_from_swap_invite with an expanded/edge argument set: {\"swap_invite_envelope\":{\"kind\":\"swap.swap_invite\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_join_from_swap_invite_2","type":"function","function":{"name":"intercomswap_join_from_swap_invite","arguments":"{\"swap_invite_envelope\":{\"kind\":\"swap.swap_invite\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_join_from_swap_invite_2","name":"intercomswap_join_from_swap_invite","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.join\",\"envelope_id\":\"9744231b1a706534e68ccda67033f607c3b567b5fdf653a140996b4d4667109d\",\"sig\":\"32a125ea889f6172\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_join_from_swap_invite succeeded with the expanded parameter set."}]}
{"id":"intercomswap_join_from_swap_invite__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_join_from_swap_invite","tools":[{"type":"function","function":{"name":"intercomswap_join_from_swap_invite","description":"Taker: join swap:<id> channel using SWAP_INVITE envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"swap_invite_envelope":{"anyOf":[{"type":"object","description":"Full signed SWAP_INVITE envelope received from maker."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a swap invite envelope."}]}},"required":["swap_invite_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_join_from_swap_invite now with this valid argument set even if backend conditions may fail: {\"swap_invite_envelope\":{\"kind\":\"swap.swap_invite\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_join_from_swap_invite_3","type":"function","function":{"name":"intercomswap_join_from_swap_invite","arguments":"{\"swap_invite_envelope\":{\"kind\":\"swap.swap_invite\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_join_from_swap_invite_3","name":"intercomswap_join_from_swap_invite","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_join_from_swap_invite failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_join_from_swap_invite__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_join_from_swap_invite","tools":[{"type":"function","function":{"name":"intercomswap_join_from_swap_invite","description":"Taker: join swap:<id> channel using SWAP_INVITE envelope.","parameters":{"type":"object","additionalProperties":false,"properties":{"swap_invite_envelope":{"anyOf":[{"type":"object","description":"Full signed SWAP_INVITE envelope received from maker."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a swap invite envelope."}]}},"required":["swap_invite_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_join_from_swap_invite with these arguments: {\"swap_invite_envelope\":12345}"},{"role":"assistant","content":"Cannot call intercomswap_join_from_swap_invite with that payload. swap_invite_envelope must match one of the supported shapes. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_tradeauto_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_tradeauto_status","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_status","description":"Get backend trade-automation worker status and memory counters.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_status with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_status_1","type":"function","function":{"name":"intercomswap_tradeauto_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_status_1","name":"intercomswap_tradeauto_status","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201,\"instances\":[{\"name\":\"default\",\"status\":\"running\",\"pid\":29201}],\"running\":true,\"channels\":[\"0000intercomswapbtcusdt\"],\"trace_enabled\":false,\"active_trades\":1}"},{"role":"assistant","content":"intercomswap_tradeauto_status completed successfully."}]}
{"id":"intercomswap_tradeauto_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_tradeauto_status","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_status","description":"Get backend trade-automation worker status and memory counters.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_status with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_status_2","type":"function","function":{"name":"intercomswap_tradeauto_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_status_2","name":"intercomswap_tradeauto_status","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29302,\"instances\":[{\"name\":\"default\",\"status\":\"running\",\"pid\":29201}],\"running\":true,\"channels\":[\"0000intercomswapbtcusdt\"],\"trace_enabled\":true,\"active_trades\":3}"},{"role":"assistant","content":"intercomswap_tradeauto_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_tradeauto_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_tradeauto_status","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_status","description":"Get backend trade-automation worker status and memory counters.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_status now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_status_3","type":"function","function":{"name":"intercomswap_tradeauto_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_status_3","name":"intercomswap_tradeauto_status","content":"{\"ok\":false,\"code\":\"TRADEAUTO_BUSY\",\"error\":\"tradeauto worker already running with same channel set\"}"},{"role":"assistant","content":"intercomswap_tradeauto_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_tradeauto_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_tradeauto_status","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_status","description":"Get backend trade-automation worker status and memory counters.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_status with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_tradeauto_status with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_tradeauto_trace_set__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_tradeauto_trace_set","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_trace_set","description":"Enable/disable backend trade-automation trace emission (off by default).","parameters":{"type":"object","additionalProperties":false,"properties":{"trace_enabled":{"type":"boolean"}},"required":["trace_enabled"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_trace_set with these arguments (minimal valid shape): {\"trace_enabled\":false}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_trace_set_1","type":"function","function":{"name":"intercomswap_tradeauto_trace_set","arguments":"{\"trace_enabled\":false}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_trace_set_1","name":"intercomswap_tradeauto_trace_set","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_tradeauto_trace_set completed successfully."}]}
{"id":"intercomswap_tradeauto_trace_set__success_variant","scenario":"success_variant","tool_name":"intercomswap_tradeauto_trace_set","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_trace_set","description":"Enable/disable backend trade-automation trace emission (off by default).","parameters":{"type":"object","additionalProperties":false,"properties":{"trace_enabled":{"type":"boolean"}},"required":["trace_enabled"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_trace_set with an expanded/edge argument set: {\"trace_enabled\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_trace_set_2","type":"function","function":{"name":"intercomswap_tradeauto_trace_set","arguments":"{\"trace_enabled\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_trace_set_2","name":"intercomswap_tradeauto_trace_set","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_tradeauto_trace_set succeeded with the expanded parameter set."}]}
{"id":"intercomswap_tradeauto_trace_set__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_tradeauto_trace_set","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_trace_set","description":"Enable/disable backend trade-automation trace emission (off by default).","parameters":{"type":"object","additionalProperties":false,"properties":{"trace_enabled":{"type":"boolean"}},"required":["trace_enabled"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_trace_set now with this valid argument set even if backend conditions may fail: {\"trace_enabled\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_trace_set_3","type":"function","function":{"name":"intercomswap_tradeauto_trace_set","arguments":"{\"trace_enabled\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_trace_set_3","name":"intercomswap_tradeauto_trace_set","content":"{\"ok\":false,\"code\":\"TRADEAUTO_BUSY\",\"error\":\"tradeauto worker already running with same channel set\"}"},{"role":"assistant","content":"intercomswap_tradeauto_trace_set failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_tradeauto_trace_set__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_tradeauto_trace_set","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_trace_set","description":"Enable/disable backend trade-automation trace emission (off by default).","parameters":{"type":"object","additionalProperties":false,"properties":{"trace_enabled":{"type":"boolean"}},"required":["trace_enabled"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_trace_set with these arguments: {\"trace_enabled\":\"true\"}"},{"role":"assistant","content":"Cannot call intercomswap_tradeauto_trace_set with that payload. trace_enabled must be a boolean. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_tradeauto_start__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_tradeauto_start","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_start","description":"Start backend multi-trade automation worker for subscribed sidechannels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":64,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to monitor (defaults to 0000intercomswapbtcusdt when omitted)."},"interval_ms":{"type":"integer","minimum":250,"maximum":10000,"description":"Worker tick interval."},"max_events":{"type":"integer","minimum":200,"maximum":4000,"description":"In-memory SC event cap."},"max_trades":{"type":"integer","minimum":10,"maximum":500,"description":"Max active trades evaluated per tick."},"event_max_age_ms":{"type":"integer","minimum":30000,"maximum":3600000,"description":"Ignore stale events older than this."},"tool_timeout_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Per-tool timeout inside trade automation worker."},"sc_ensure_interval_ms":{"type":"integer","minimum":500,"maximum":60000,"description":"How often the worker reasserts SC subscriptions/reconnect."},"hygiene_interval_ms":{"type":"integer","minimum":1000,"maximum":60000,"description":"How often backend hygiene scans joined swap channels for stale auto-leave."},"default_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Default Solana refund window used by auto-quote/terms."},"welcome_ttl_sec":{"type":"integer","minimum":30,"maximum":604800,"description":"Invite TTL used for auto-invites."},"terms_replay_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between maker terms replays before accept arrives."},"terms_replay_max":{"type":"integer","minimum":1,"maximum":500,"description":"Max maker terms replay attempts per trade (bounded liveness)."},"swap_auto_leave_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between backend stale swap-channel leave retries."},"swap_auto_leave_max_attempts":{"type":"integer","minimum":1,"maximum":50,"description":"Max backend stale swap-channel leave attempts per trade."},"waiting_terms_trace_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"How often waiting_terms trace entries are emitted per trade."},"waiting_terms_ping_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between taker waiting-terms recovery pings/replays."},"waiting_terms_max_pings":{"type":"integer","minimum":0,"maximum":500,"description":"Max taker waiting-terms recovery pings/replays per trade."},"waiting_terms_max_wait_ms":{"type":"integer","minimum":5000,"maximum":3600000,"description":"Max taker wait for TERMS before timeout handling starts."},"waiting_terms_leave_on_timeout":{"type":"boolean","description":"Whether taker auto-leaves stale swap channel after waiting-terms timeout."},"ln_pay_fail_leave_attempts":{"type":"integer","minimum":2,"maximum":50,"description":"Deterministic threshold: auto-leave swap channel only after this many ln_pay failures for same trade."},"ln_pay_fail_leave_min_wait_ms":{"type":"integer","minimum":1000,"maximum":3600000,"description":"Deterministic threshold: auto-leave only after this much elapsed time since first ln_pay failure."},"ln_pay_retry_cooldown_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Cooldown between ln_pay retries before thresholds are reached."},"stage_retry_max":{"type":"integer","minimum":0,"maximum":50,"description":"Max per-stage retries before tradeauto aborts (cancel+leave when safe). Default 2."},"trace_enabled":{"type":"boolean","description":"Enable verbose in-worker trace events (disabled by default)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"]},"usdt_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"enable_quote_from_offers":{"type":"boolean"},"enable_quote_from_rfqs":{"type":"boolean","description":"Quote actionable RFQs even when no local offer line matched."},"enable_accept_quotes":{"type":"boolean"},"enable_invite_from_accepts":{"type":"boolean"},"enable_join_invites":{"type":"boolean"},"enable_settlement":{"type":"boolean"},"sol_cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"sol_cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_start with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_start_1","type":"function","function":{"name":"intercomswap_tradeauto_start","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_start_1","name":"intercomswap_tradeauto_start","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_tradeauto_start completed successfully."}]}
{"id":"intercomswap_tradeauto_start__success_variant","scenario":"success_variant","tool_name":"intercomswap_tradeauto_start","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_start","description":"Start backend multi-trade automation worker for subscribed sidechannels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":64,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to monitor (defaults to 0000intercomswapbtcusdt when omitted)."},"interval_ms":{"type":"integer","minimum":250,"maximum":10000,"description":"Worker tick interval."},"max_events":{"type":"integer","minimum":200,"maximum":4000,"description":"In-memory SC event cap."},"max_trades":{"type":"integer","minimum":10,"maximum":500,"description":"Max active trades evaluated per tick."},"event_max_age_ms":{"type":"integer","minimum":30000,"maximum":3600000,"description":"Ignore stale events older than this."},"tool_timeout_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Per-tool timeout inside trade automation worker."},"sc_ensure_interval_ms":{"type":"integer","minimum":500,"maximum":60000,"description":"How often the worker reasserts SC subscriptions/reconnect."},"hygiene_interval_ms":{"type":"integer","minimum":1000,"maximum":60000,"description":"How often backend hygiene scans joined swap channels for stale auto-leave."},"default_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Default Solana refund window used by auto-quote/terms."},"welcome_ttl_sec":{"type":"integer","minimum":30,"maximum":604800,"description":"Invite TTL used for auto-invites."},"terms_replay_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between maker terms replays before accept arrives."},"terms_replay_max":{"type":"integer","minimum":1,"maximum":500,"description":"Max maker terms replay attempts per trade (bounded liveness)."},"swap_auto_leave_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between backend stale swap-channel leave retries."},"swap_auto_leave_max_attempts":{"type":"integer","minimum":1,"maximum":50,"description":"Max backend stale swap-channel leave attempts per trade."},"waiting_terms_trace_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"How often waiting_terms trace entries are emitted per trade."},"waiting_terms_ping_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between taker waiting-terms recovery pings/replays."},"waiting_terms_max_pings":{"type":"integer","minimum":0,"maximum":500,"description":"Max taker waiting-terms recovery pings/replays per trade."},"waiting_terms_max_wait_ms":{"type":"integer","minimum":5000,"maximum":3600000,"description":"Max taker wait for TERMS before timeout handling starts."},"waiting_terms_leave_on_timeout":{"type":"boolean","description":"Whether taker auto-leaves stale swap channel after waiting-terms timeout."},"ln_pay_fail_leave_attempts":{"type":"integer","minimum":2,"maximum":50,"description":"Deterministic threshold: auto-leave swap channel only after this many ln_pay failures for same trade."},"ln_pay_fail_leave_min_wait_ms":{"type":"integer","minimum":1000,"maximum":3600000,"description":"Deterministic threshold: auto-leave only after this much elapsed time since first ln_pay failure."},"ln_pay_retry_cooldown_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Cooldown between ln_pay retries before thresholds are reached."},"stage_retry_max":{"type":"integer","minimum":0,"maximum":50,"description":"Max per-stage retries before tradeauto aborts (cancel+leave when safe). Default 2."},"trace_enabled":{"type":"boolean","description":"Enable verbose in-worker trace events (disabled by default)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"]},"usdt_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"enable_quote_from_offers":{"type":"boolean"},"enable_quote_from_rfqs":{"type":"boolean","description":"Quote actionable RFQs even when no local offer line matched."},"enable_accept_quotes":{"type":"boolean"},"enable_invite_from_accepts":{"type":"boolean"},"enable_join_invites":{"type":"boolean"},"enable_settlement":{"type":"boolean"},"sol_cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"sol_cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_start with an expanded/edge argument set: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"interval_ms\":3500,\"max_events\":1466,\"max_trades\":173,\"event_max_age_ms\":1220000,\"tool_timeout_ms\":60000,\"sc_ensure_interval_ms\":20333,\"hygiene_interval_ms\":20666,\"default_sol_refund_window_sec\":204000,\"welcome_ttl_sec\":3600,\"terms_replay_cooldown_ms\":40666,\"terms_replay_max\":167,\"swap_auto_leave_cooldown_ms\":40666,\"swap_auto_leave_max_attempts\":17,\"waiting_terms_trace_cooldown_ms\":40666,\"waiting_terms_ping_cooldown_ms\":40666,\"waiting_terms_max_pings\":166,\"waiting_terms_max_wait_ms\":5000,\"waiting_terms_leave_on_timeout\":true,\"ln_pay_fail_leave_attempts\":18,\"ln_pay_fail_leave_min_wait_ms\":5000,\"ln_pay_retry_cooldown_ms\":40166,\"stage_retry_max\":16,\"trace_enabled\":true,\"ln_liquidity_mode\":\"aggregate\",\"usdt_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"enable_quote_from_offers\":true,\"enable_quote_from_rfqs\":true,\"enable_accept_quotes\":true,\"enable_invite_from_accepts\":true,\"enable_join_invites\":true,\"enable_settlement\":true,\"sol_cu_limit\":400000,\"sol_cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_start_2","type":"function","function":{"name":"intercomswap_tradeauto_start","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"interval_ms\":3500,\"max_events\":1466,\"max_trades\":173,\"event_max_age_ms\":1220000,\"tool_timeout_ms\":60000,\"sc_ensure_interval_ms\":20333,\"hygiene_interval_ms\":20666,\"default_sol_refund_window_sec\":204000,\"welcome_ttl_sec\":3600,\"terms_replay_cooldown_ms\":40666,\"terms_replay_max\":167,\"swap_auto_leave_cooldown_ms\":40666,\"swap_auto_leave_max_attempts\":17,\"waiting_terms_trace_cooldown_ms\":40666,\"waiting_terms_ping_cooldown_ms\":40666,\"waiting_terms_max_pings\":166,\"waiting_terms_max_wait_ms\":5000,\"waiting_terms_leave_on_timeout\":true,\"ln_pay_fail_leave_attempts\":18,\"ln_pay_fail_leave_min_wait_ms\":5000,\"ln_pay_retry_cooldown_ms\":40166,\"stage_retry_max\":16,\"trace_enabled\":true,\"ln_liquidity_mode\":\"aggregate\",\"usdt_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"enable_quote_from_offers\":true,\"enable_quote_from_rfqs\":true,\"enable_accept_quotes\":true,\"enable_invite_from_accepts\":true,\"enable_join_invites\":true,\"enable_settlement\":true,\"sol_cu_limit\":400000,\"sol_cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_start_2","name":"intercomswap_tradeauto_start","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_tradeauto_start succeeded with the expanded parameter set."}]}
{"id":"intercomswap_tradeauto_start__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_tradeauto_start","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_start","description":"Start backend multi-trade automation worker for subscribed sidechannels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":64,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to monitor (defaults to 0000intercomswapbtcusdt when omitted)."},"interval_ms":{"type":"integer","minimum":250,"maximum":10000,"description":"Worker tick interval."},"max_events":{"type":"integer","minimum":200,"maximum":4000,"description":"In-memory SC event cap."},"max_trades":{"type":"integer","minimum":10,"maximum":500,"description":"Max active trades evaluated per tick."},"event_max_age_ms":{"type":"integer","minimum":30000,"maximum":3600000,"description":"Ignore stale events older than this."},"tool_timeout_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Per-tool timeout inside trade automation worker."},"sc_ensure_interval_ms":{"type":"integer","minimum":500,"maximum":60000,"description":"How often the worker reasserts SC subscriptions/reconnect."},"hygiene_interval_ms":{"type":"integer","minimum":1000,"maximum":60000,"description":"How often backend hygiene scans joined swap channels for stale auto-leave."},"default_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Default Solana refund window used by auto-quote/terms."},"welcome_ttl_sec":{"type":"integer","minimum":30,"maximum":604800,"description":"Invite TTL used for auto-invites."},"terms_replay_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between maker terms replays before accept arrives."},"terms_replay_max":{"type":"integer","minimum":1,"maximum":500,"description":"Max maker terms replay attempts per trade (bounded liveness)."},"swap_auto_leave_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between backend stale swap-channel leave retries."},"swap_auto_leave_max_attempts":{"type":"integer","minimum":1,"maximum":50,"description":"Max backend stale swap-channel leave attempts per trade."},"waiting_terms_trace_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"How often waiting_terms trace entries are emitted per trade."},"waiting_terms_ping_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between taker waiting-terms recovery pings/replays."},"waiting_terms_max_pings":{"type":"integer","minimum":0,"maximum":500,"description":"Max taker waiting-terms recovery pings/replays per trade."},"waiting_terms_max_wait_ms":{"type":"integer","minimum":5000,"maximum":3600000,"description":"Max taker wait for TERMS before timeout handling starts."},"waiting_terms_leave_on_timeout":{"type":"boolean","description":"Whether taker auto-leaves stale swap channel after waiting-terms timeout."},"ln_pay_fail_leave_attempts":{"type":"integer","minimum":2,"maximum":50,"description":"Deterministic threshold: auto-leave swap channel only after this many ln_pay failures for same trade."},"ln_pay_fail_leave_min_wait_ms":{"type":"integer","minimum":1000,"maximum":3600000,"description":"Deterministic threshold: auto-leave only after this much elapsed time since first ln_pay failure."},"ln_pay_retry_cooldown_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Cooldown between ln_pay retries before thresholds are reached."},"stage_retry_max":{"type":"integer","minimum":0,"maximum":50,"description":"Max per-stage retries before tradeauto aborts (cancel+leave when safe). Default 2."},"trace_enabled":{"type":"boolean","description":"Enable verbose in-worker trace events (disabled by default)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"]},"usdt_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"enable_quote_from_offers":{"type":"boolean"},"enable_quote_from_rfqs":{"type":"boolean","description":"Quote actionable RFQs even when no local offer line matched."},"enable_accept_quotes":{"type":"boolean"},"enable_invite_from_accepts":{"type":"boolean"},"enable_join_invites":{"type":"boolean"},"enable_settlement":{"type":"boolean"},"sol_cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"sol_cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_start now with this valid argument set even if backend conditions may fail: {\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"interval_ms\":3500,\"max_events\":1466,\"max_trades\":173,\"event_max_age_ms\":1220000,\"tool_timeout_ms\":60000,\"sc_ensure_interval_ms\":20333,\"hygiene_interval_ms\":20666,\"default_sol_refund_window_sec\":204000,\"welcome_ttl_sec\":3600,\"terms_replay_cooldown_ms\":40666,\"terms_replay_max\":167,\"swap_auto_leave_cooldown_ms\":40666,\"swap_auto_leave_max_attempts\":17,\"waiting_terms_trace_cooldown_ms\":40666,\"waiting_terms_ping_cooldown_ms\":40666,\"waiting_terms_max_pings\":166,\"waiting_terms_max_wait_ms\":5000,\"waiting_terms_leave_on_timeout\":true,\"ln_pay_fail_leave_attempts\":18,\"ln_pay_fail_leave_min_wait_ms\":5000,\"ln_pay_retry_cooldown_ms\":40166,\"stage_retry_max\":16,\"trace_enabled\":true,\"ln_liquidity_mode\":\"aggregate\",\"usdt_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"enable_quote_from_offers\":true,\"enable_quote_from_rfqs\":true,\"enable_accept_quotes\":true,\"enable_invite_from_accepts\":true,\"enable_join_invites\":true,\"enable_settlement\":true,\"sol_cu_limit\":400000,\"sol_cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_start_3","type":"function","function":{"name":"intercomswap_tradeauto_start","arguments":"{\"channels\":[\"0000intercomswapbtcusdt\",\"swap:rfq-1771000001-abcd1\"],\"interval_ms\":3500,\"max_events\":1466,\"max_trades\":173,\"event_max_age_ms\":1220000,\"tool_timeout_ms\":60000,\"sc_ensure_interval_ms\":20333,\"hygiene_interval_ms\":20666,\"default_sol_refund_window_sec\":204000,\"welcome_ttl_sec\":3600,\"terms_replay_cooldown_ms\":40666,\"terms_replay_max\":167,\"swap_auto_leave_cooldown_ms\":40666,\"swap_auto_leave_max_attempts\":17,\"waiting_terms_trace_cooldown_ms\":40666,\"waiting_terms_ping_cooldown_ms\":40666,\"waiting_terms_max_pings\":166,\"waiting_terms_max_wait_ms\":5000,\"waiting_terms_leave_on_timeout\":true,\"ln_pay_fail_leave_attempts\":18,\"ln_pay_fail_leave_min_wait_ms\":5000,\"ln_pay_retry_cooldown_ms\":40166,\"stage_retry_max\":16,\"trace_enabled\":true,\"ln_liquidity_mode\":\"aggregate\",\"usdt_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"enable_quote_from_offers\":true,\"enable_quote_from_rfqs\":true,\"enable_accept_quotes\":true,\"enable_invite_from_accepts\":true,\"enable_join_invites\":true,\"enable_settlement\":true,\"sol_cu_limit\":400000,\"sol_cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_start_3","name":"intercomswap_tradeauto_start","content":"{\"ok\":false,\"code\":\"TRADEAUTO_BUSY\",\"error\":\"tradeauto worker already running with same channel set\"}"},{"role":"assistant","content":"intercomswap_tradeauto_start failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_tradeauto_start__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_tradeauto_start","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_start","description":"Start backend multi-trade automation worker for subscribed sidechannels.","parameters":{"type":"object","additionalProperties":false,"properties":{"channels":{"type":"array","minItems":1,"maxItems":64,"items":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"description":"Rendezvous channels to monitor (defaults to 0000intercomswapbtcusdt when omitted)."},"interval_ms":{"type":"integer","minimum":250,"maximum":10000,"description":"Worker tick interval."},"max_events":{"type":"integer","minimum":200,"maximum":4000,"description":"In-memory SC event cap."},"max_trades":{"type":"integer","minimum":10,"maximum":500,"description":"Max active trades evaluated per tick."},"event_max_age_ms":{"type":"integer","minimum":30000,"maximum":3600000,"description":"Ignore stale events older than this."},"tool_timeout_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Per-tool timeout inside trade automation worker."},"sc_ensure_interval_ms":{"type":"integer","minimum":500,"maximum":60000,"description":"How often the worker reasserts SC subscriptions/reconnect."},"hygiene_interval_ms":{"type":"integer","minimum":1000,"maximum":60000,"description":"How often backend hygiene scans joined swap channels for stale auto-leave."},"default_sol_refund_window_sec":{"type":"integer","minimum":3600,"maximum":604800,"description":"Default Solana refund window used by auto-quote/terms."},"welcome_ttl_sec":{"type":"integer","minimum":30,"maximum":604800,"description":"Invite TTL used for auto-invites."},"terms_replay_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between maker terms replays before accept arrives."},"terms_replay_max":{"type":"integer","minimum":1,"maximum":500,"description":"Max maker terms replay attempts per trade (bounded liveness)."},"swap_auto_leave_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between backend stale swap-channel leave retries."},"swap_auto_leave_max_attempts":{"type":"integer","minimum":1,"maximum":50,"description":"Max backend stale swap-channel leave attempts per trade."},"waiting_terms_trace_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"How often waiting_terms trace entries are emitted per trade."},"waiting_terms_ping_cooldown_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Cooldown between taker waiting-terms recovery pings/replays."},"waiting_terms_max_pings":{"type":"integer","minimum":0,"maximum":500,"description":"Max taker waiting-terms recovery pings/replays per trade."},"waiting_terms_max_wait_ms":{"type":"integer","minimum":5000,"maximum":3600000,"description":"Max taker wait for TERMS before timeout handling starts."},"waiting_terms_leave_on_timeout":{"type":"boolean","description":"Whether taker auto-leaves stale swap channel after waiting-terms timeout."},"ln_pay_fail_leave_attempts":{"type":"integer","minimum":2,"maximum":50,"description":"Deterministic threshold: auto-leave swap channel only after this many ln_pay failures for same trade."},"ln_pay_fail_leave_min_wait_ms":{"type":"integer","minimum":1000,"maximum":3600000,"description":"Deterministic threshold: auto-leave only after this much elapsed time since first ln_pay failure."},"ln_pay_retry_cooldown_ms":{"type":"integer","minimum":250,"maximum":120000,"description":"Cooldown between ln_pay retries before thresholds are reached."},"stage_retry_max":{"type":"integer","minimum":0,"maximum":50,"description":"Max per-stage retries before tradeauto aborts (cancel+leave when safe). Default 2."},"trace_enabled":{"type":"boolean","description":"Enable verbose in-worker trace events (disabled by default)."},"ln_liquidity_mode":{"type":"string","enum":["single_channel","aggregate"]},"usdt_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"enable_quote_from_offers":{"type":"boolean"},"enable_quote_from_rfqs":{"type":"boolean","description":"Quote actionable RFQs even when no local offer line matched."},"enable_accept_quotes":{"type":"boolean"},"enable_invite_from_accepts":{"type":"boolean"},"enable_join_invites":{"type":"boolean"},"enable_settlement":{"type":"boolean"},"sol_cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"sol_cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_start with these arguments: {\"channels\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_tradeauto_start with that payload. channels must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_tradeauto_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_tradeauto_stop","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_stop","description":"Stop backend multi-trade automation worker.","parameters":{"type":"object","additionalProperties":false,"properties":{"reason":{"type":"string","minLength":1,"maxLength":200}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_stop with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_stop_1","type":"function","function":{"name":"intercomswap_tradeauto_stop","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_stop_1","name":"intercomswap_tradeauto_stop","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"stopped\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_tradeauto_stop completed successfully."}]}
{"id":"intercomswap_tradeauto_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_tradeauto_stop","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_stop","description":"Stop backend multi-trade automation worker.","parameters":{"type":"object","additionalProperties":false,"properties":{"reason":{"type":"string","minLength":1,"maxLength":200}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_stop with an expanded/edge argument set: {\"reason\":\"timeout_safety_abort\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_stop_2","type":"function","function":{"name":"intercomswap_tradeauto_stop","arguments":"{\"reason\":\"timeout_safety_abort\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_stop_2","name":"intercomswap_tradeauto_stop","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"stopped\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_tradeauto_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_tradeauto_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_tradeauto_stop","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_stop","description":"Stop backend multi-trade automation worker.","parameters":{"type":"object","additionalProperties":false,"properties":{"reason":{"type":"string","minLength":1,"maxLength":200}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_stop now with this valid argument set even if backend conditions may fail: {\"reason\":\"timeout_safety_abort\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_tradeauto_stop_3","type":"function","function":{"name":"intercomswap_tradeauto_stop","arguments":"{\"reason\":\"timeout_safety_abort\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_tradeauto_stop_3","name":"intercomswap_tradeauto_stop","content":"{\"ok\":false,\"code\":\"TRADEAUTO_BUSY\",\"error\":\"tradeauto worker already running with same channel set\"}"},{"role":"assistant","content":"intercomswap_tradeauto_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_tradeauto_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_tradeauto_stop","tools":[{"type":"function","function":{"name":"intercomswap_tradeauto_stop","description":"Stop backend multi-trade automation worker.","parameters":{"type":"object","additionalProperties":false,"properties":{"reason":{"type":"string","minLength":1,"maxLength":200}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_tradeauto_stop with these arguments: {\"reason\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_tradeauto_stop with that payload. reason must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfqbot_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfqbot_status","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_status","description":"List local RFQ bot instances started via prompt tools (reads onchain/rfq-bots).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional bot instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_status with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_status_1","type":"function","function":{"name":"intercomswap_rfqbot_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_status_1","name":"intercomswap_rfqbot_status","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201,\"instances\":[{\"name\":\"default\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_rfqbot_status completed successfully."}]}
{"id":"intercomswap_rfqbot_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfqbot_status","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_status","description":"List local RFQ bot instances started via prompt tools (reads onchain/rfq-bots).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional bot instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_status with an expanded/edge argument set: {\"name\":\"rfqbot_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_status_2","type":"function","function":{"name":"intercomswap_rfqbot_status","arguments":"{\"name\":\"rfqbot_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_status_2","name":"intercomswap_rfqbot_status","content":"{\"ok\":true,\"name\":\"rfqbot_status_b\",\"status\":\"running\",\"pid\":29302,\"instances\":[{\"name\":\"rfqbot_status_b\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_rfqbot_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfqbot_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfqbot_status","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_status","description":"List local RFQ bot instances started via prompt tools (reads onchain/rfq-bots).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional bot instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_status now with this valid argument set even if backend conditions may fail: {\"name\":\"rfqbot_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_status_3","type":"function","function":{"name":"intercomswap_rfqbot_status","arguments":"{\"name\":\"rfqbot_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_status_3","name":"intercomswap_rfqbot_status","content":"{\"ok\":false,\"code\":\"RFQBOT_ALREADY_EXISTS\",\"error\":\"rfq bot not started (rfqbot_status_b): already running\"}"},{"role":"assistant","content":"intercomswap_rfqbot_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfqbot_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfqbot_status","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_status","description":"List local RFQ bot instances started via prompt tools (reads onchain/rfq-bots).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"description":"Optional bot instance id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_status with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_rfqbot_status with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfqbot_start_maker__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfqbot_start_maker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_maker","description":"Start a maker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-maker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_maker with these arguments (minimal valid shape): {\"name\":\"rfqbot_start_maker_a\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_maker_1","type":"function","function":{"name":"intercomswap_rfqbot_start_maker","arguments":"{\"name\":\"rfqbot_start_maker_a\",\"store\":\"maker_store\",\"sc_port\":9334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_maker_1","name":"intercomswap_rfqbot_start_maker","content":"{\"ok\":true,\"name\":\"rfqbot_start_maker_a\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_rfqbot_start_maker completed successfully."}]}
{"id":"intercomswap_rfqbot_start_maker__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfqbot_start_maker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_maker","description":"Start a maker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-maker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_maker with an expanded/edge argument set: {\"name\":\"rfqbot_start_maker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_maker_2","type":"function","function":{"name":"intercomswap_rfqbot_start_maker","arguments":"{\"name\":\"rfqbot_start_maker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_maker_2","name":"intercomswap_rfqbot_start_maker","content":"{\"ok\":true,\"name\":\"rfqbot_start_maker_b\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_rfqbot_start_maker succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfqbot_start_maker__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfqbot_start_maker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_maker","description":"Start a maker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-maker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_maker now with this valid argument set even if backend conditions may fail: {\"name\":\"rfqbot_start_maker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_maker_3","type":"function","function":{"name":"intercomswap_rfqbot_start_maker","arguments":"{\"name\":\"rfqbot_start_maker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_maker_3","name":"intercomswap_rfqbot_start_maker","content":"{\"ok\":false,\"code\":\"RFQBOT_ALREADY_EXISTS\",\"error\":\"rfq bot not started (rfqbot_start_maker_b): already running\"}"},{"role":"assistant","content":"intercomswap_rfqbot_start_maker failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfqbot_start_maker__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfqbot_start_maker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_maker","description":"Start a maker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-maker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_maker with these arguments: {\"name\":\"\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","content":"Cannot call intercomswap_rfqbot_start_maker with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfqbot_start_taker__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfqbot_start_taker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_taker","description":"Start a taker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-taker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_taker with these arguments (minimal valid shape): {\"name\":\"rfqbot_start_taker_a\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_taker_1","type":"function","function":{"name":"intercomswap_rfqbot_start_taker","arguments":"{\"name\":\"rfqbot_start_taker_a\",\"store\":\"maker_store\",\"sc_port\":9334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_taker_1","name":"intercomswap_rfqbot_start_taker","content":"{\"ok\":true,\"name\":\"rfqbot_start_taker_a\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_rfqbot_start_taker completed successfully."}]}
{"id":"intercomswap_rfqbot_start_taker__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfqbot_start_taker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_taker","description":"Start a taker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-taker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_taker with an expanded/edge argument set: {\"name\":\"rfqbot_start_taker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_taker_2","type":"function","function":{"name":"intercomswap_rfqbot_start_taker","arguments":"{\"name\":\"rfqbot_start_taker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_taker_2","name":"intercomswap_rfqbot_start_taker","content":"{\"ok\":true,\"name\":\"rfqbot_start_taker_b\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_rfqbot_start_taker succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfqbot_start_taker__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfqbot_start_taker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_taker","description":"Start a taker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-taker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_taker now with this valid argument set even if backend conditions may fail: {\"name\":\"rfqbot_start_taker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_start_taker_3","type":"function","function":{"name":"intercomswap_rfqbot_start_taker","arguments":"{\"name\":\"rfqbot_start_taker_b\",\"store\":\"taker_store\",\"sc_port\":9344,\"receipts_db\":\"sample_value\",\"argv\":[\"sample_value\",\"sample_value\"]}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_start_taker_3","name":"intercomswap_rfqbot_start_taker","content":"{\"ok\":false,\"code\":\"RFQBOT_ALREADY_EXISTS\",\"error\":\"rfq bot not started (rfqbot_start_taker_b): already running\"}"},{"role":"assistant","content":"intercomswap_rfqbot_start_taker failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfqbot_start_taker__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfqbot_start_taker","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_start_taker","description":"Start a taker RFQ bot instance (detached background process).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"store":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"sc_port":{"type":"integer","minimum":1,"maximum":65535},"receipts_db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db path (must be under onchain/)."},"argv":{"type":"array","minItems":0,"maxItems":80,"items":{"type":"string","minLength":1,"maxLength":200},"description":"Optional extra args passed to scripts/rfq-taker.mjs (no shell)."}},"required":["name","store","sc_port"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_start_taker with these arguments: {\"name\":\"\",\"store\":\"maker_store\",\"sc_port\":9334}"},{"role":"assistant","content":"Cannot call intercomswap_rfqbot_start_taker with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfqbot_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfqbot_stop","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_stop","description":"Stop an RFQ bot instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_stop with these arguments (minimal valid shape): {\"name\":\"rfqbot_stop_a\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_stop_1","type":"function","function":{"name":"intercomswap_rfqbot_stop","arguments":"{\"name\":\"rfqbot_stop_a\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_stop_1","name":"intercomswap_rfqbot_stop","content":"{\"ok\":true,\"name\":\"rfqbot_stop_a\",\"status\":\"stopped\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_rfqbot_stop completed successfully."}]}
{"id":"intercomswap_rfqbot_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfqbot_stop","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_stop","description":"Stop an RFQ bot instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_stop with an expanded/edge argument set: {\"name\":\"rfqbot_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_stop_2","type":"function","function":{"name":"intercomswap_rfqbot_stop","arguments":"{\"name\":\"rfqbot_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_stop_2","name":"intercomswap_rfqbot_stop","content":"{\"ok\":true,\"name\":\"rfqbot_stop_b\",\"status\":\"stopped\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_rfqbot_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfqbot_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfqbot_stop","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_stop","description":"Stop an RFQ bot instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_stop now with this valid argument set even if backend conditions may fail: {\"name\":\"rfqbot_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_stop_3","type":"function","function":{"name":"intercomswap_rfqbot_stop","arguments":"{\"name\":\"rfqbot_stop_b\",\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_stop_3","name":"intercomswap_rfqbot_stop","content":"{\"ok\":false,\"code\":\"RFQBOT_ALREADY_EXISTS\",\"error\":\"rfq bot not started (rfqbot_stop_b): already running\"}"},{"role":"assistant","content":"intercomswap_rfqbot_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfqbot_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfqbot_stop","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_stop","description":"Stop an RFQ bot instance (by instance name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGTERM|SIGINT|SIGKILL (default SIGTERM)"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_stop with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_rfqbot_stop with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_rfqbot_restart__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_rfqbot_restart","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_restart","description":"Restart an RFQ bot instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_restart with these arguments (minimal valid shape): {\"name\":\"rfqbot_restart_a\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_restart_1","type":"function","function":{"name":"intercomswap_rfqbot_restart","arguments":"{\"name\":\"rfqbot_restart_a\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_restart_1","name":"intercomswap_rfqbot_restart","content":"{\"ok\":true,\"name\":\"rfqbot_restart_a\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_rfqbot_restart completed successfully."}]}
{"id":"intercomswap_rfqbot_restart__success_variant","scenario":"success_variant","tool_name":"intercomswap_rfqbot_restart","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_restart","description":"Restart an RFQ bot instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_restart with an expanded/edge argument set: {\"name\":\"rfqbot_restart_b\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_restart_2","type":"function","function":{"name":"intercomswap_rfqbot_restart","arguments":"{\"name\":\"rfqbot_restart_b\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_restart_2","name":"intercomswap_rfqbot_restart","content":"{\"ok\":true,\"name\":\"rfqbot_restart_b\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_rfqbot_restart succeeded with the expanded parameter set."}]}
{"id":"intercomswap_rfqbot_restart__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_rfqbot_restart","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_restart","description":"Restart an RFQ bot instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_restart now with this valid argument set even if backend conditions may fail: {\"name\":\"rfqbot_restart_b\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_rfqbot_restart_3","type":"function","function":{"name":"intercomswap_rfqbot_restart","arguments":"{\"name\":\"rfqbot_restart_b\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_rfqbot_restart_3","name":"intercomswap_rfqbot_restart","content":"{\"ok\":false,\"code\":\"RFQBOT_ALREADY_EXISTS\",\"error\":\"rfq bot not started (rfqbot_restart_b): already running\"}"},{"role":"assistant","content":"intercomswap_rfqbot_restart failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_rfqbot_restart__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_rfqbot_restart","tools":[{"type":"function","function":{"name":"intercomswap_rfqbot_restart","description":"Restart an RFQ bot instance (stop then start using last config).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait time before SIGKILL fallback (default 2000ms)."}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_rfqbot_restart with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_rfqbot_restart with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_autopost_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_autopost_status","tools":[{"type":"function","function":{"name":"intercomswap_autopost_status","description":"List in-process autopost jobs started via tools (offer/rfq repost schedulers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$","description":"Optional job id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_status with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_status_1","type":"function","function":{"name":"intercomswap_autopost_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_status_1","name":"intercomswap_autopost_status","content":"{\"ok\":true,\"name\":\"default\",\"status\":\"running\",\"pid\":29201,\"instances\":[{\"name\":\"default\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_autopost_status completed successfully."}]}
{"id":"intercomswap_autopost_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_autopost_status","tools":[{"type":"function","function":{"name":"intercomswap_autopost_status","description":"List in-process autopost jobs started via tools (offer/rfq repost schedulers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$","description":"Optional job id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_status with an expanded/edge argument set: {\"name\":\"autopost_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_status_2","type":"function","function":{"name":"intercomswap_autopost_status","arguments":"{\"name\":\"autopost_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_status_2","name":"intercomswap_autopost_status","content":"{\"ok\":true,\"name\":\"autopost_status_b\",\"status\":\"running\",\"pid\":29302,\"instances\":[{\"name\":\"autopost_status_b\",\"status\":\"running\",\"pid\":29201}]}"},{"role":"assistant","content":"intercomswap_autopost_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_autopost_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_autopost_status","tools":[{"type":"function","function":{"name":"intercomswap_autopost_status","description":"List in-process autopost jobs started via tools (offer/rfq repost schedulers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$","description":"Optional job id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_status now with this valid argument set even if backend conditions may fail: {\"name\":\"autopost_status_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_status_3","type":"function","function":{"name":"intercomswap_autopost_status","arguments":"{\"name\":\"autopost_status_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_status_3","name":"intercomswap_autopost_status","content":"{\"ok\":false,\"code\":\"AUTPOST_DUPLICATE\",\"error\":\"autopost_start: name already exists (autopost_status_b)\"}"},{"role":"assistant","content":"intercomswap_autopost_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_autopost_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_autopost_status","tools":[{"type":"function","function":{"name":"intercomswap_autopost_status","description":"List in-process autopost jobs started via tools (offer/rfq repost schedulers).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$","description":"Optional job id."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_status with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_autopost_status with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_autopost_start__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_autopost_start","tools":[{"type":"function","function":{"name":"intercomswap_autopost_start","description":"Start a periodic repost scheduler for offer_post or rfq_post.","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"tool":{"type":"string","enum":["intercomswap_offer_post","intercomswap_rfq_post"]},"interval_sec":{"type":"integer","minimum":5,"maximum":86400,"description":"How often to repost."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Absolute validity horizon (seconds) for the offer/RFQ. Autopost stops once expired; reposts do not extend validity."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional absolute expiry (unix seconds). If provided, autopost will stop at this time and all reposts will share the same valid_until_unix."},"args":{"type":"object","additionalProperties":true,"description":"Arguments for the selected tool."}},"required":["name","tool","interval_sec","ttl_sec","args"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_start with these arguments (minimal valid shape): {\"name\":\"offer_maker_040267c8_1771090273648\",\"tool\":\"intercomswap_offer_post\",\"interval_sec\":10,\"ttl_sec\":86400,\"args\":{\"channels\":[\"0000intercomswapbtcusdt\"],\"name\":\"maker_alpha\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_start_1","type":"function","function":{"name":"intercomswap_autopost_start","arguments":"{\"name\":\"offer_maker_040267c8_1771090273648\",\"tool\":\"intercomswap_offer_post\",\"interval_sec\":10,\"ttl_sec\":86400,\"args\":{\"channels\":[\"0000intercomswapbtcusdt\"],\"name\":\"maker_alpha\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_start_1","name":"intercomswap_autopost_start","content":"{\"ok\":true,\"name\":\"offer_maker_040267c8_1771090273648\",\"status\":\"running\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_autopost_start completed successfully."}]}
{"id":"intercomswap_autopost_start__success_variant","scenario":"success_variant","tool_name":"intercomswap_autopost_start","tools":[{"type":"function","function":{"name":"intercomswap_autopost_start","description":"Start a periodic repost scheduler for offer_post or rfq_post.","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"tool":{"type":"string","enum":["intercomswap_offer_post","intercomswap_rfq_post"]},"interval_sec":{"type":"integer","minimum":5,"maximum":86400,"description":"How often to repost."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Absolute validity horizon (seconds) for the offer/RFQ. Autopost stops once expired; reposts do not extend validity."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional absolute expiry (unix seconds). If provided, autopost will stop at this time and all reposts will share the same valid_until_unix."},"args":{"type":"object","additionalProperties":true,"description":"Arguments for the selected tool."}},"required":["name","tool","interval_sec","ttl_sec","args"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_start with an expanded/edge argument set: {\"name\":\"rfq_maker_040267c8_1771091273648\",\"tool\":\"intercomswap_rfq_post\",\"interval_sec\":60,\"ttl_sec\":3600,\"args\":{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771091273000-aabbccdd\",\"btc_sats\":1002,\"usdt_amount\":\"330000\",\"ln_liquidity_mode\":\"aggregate\"}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_start_2","type":"function","function":{"name":"intercomswap_autopost_start","arguments":"{\"name\":\"rfq_maker_040267c8_1771091273648\",\"tool\":\"intercomswap_rfq_post\",\"interval_sec\":60,\"ttl_sec\":3600,\"args\":{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771091273000-aabbccdd\",\"btc_sats\":1002,\"usdt_amount\":\"330000\",\"ln_liquidity_mode\":\"aggregate\"}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_start_2","name":"intercomswap_autopost_start","content":"{\"ok\":true,\"name\":\"rfq_maker_040267c8_1771091273648\",\"status\":\"running\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_autopost_start succeeded with the expanded parameter set."}]}
{"id":"intercomswap_autopost_start__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_autopost_start","tools":[{"type":"function","function":{"name":"intercomswap_autopost_start","description":"Start a periodic repost scheduler for offer_post or rfq_post.","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"tool":{"type":"string","enum":["intercomswap_offer_post","intercomswap_rfq_post"]},"interval_sec":{"type":"integer","minimum":5,"maximum":86400,"description":"How often to repost."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Absolute validity horizon (seconds) for the offer/RFQ. Autopost stops once expired; reposts do not extend validity."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional absolute expiry (unix seconds). If provided, autopost will stop at this time and all reposts will share the same valid_until_unix."},"args":{"type":"object","additionalProperties":true,"description":"Arguments for the selected tool."}},"required":["name","tool","interval_sec","ttl_sec","args"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_start now with this valid argument set even if backend conditions may fail: {\"name\":\"rfq_maker_040267c8_1771091273648\",\"tool\":\"intercomswap_rfq_post\",\"interval_sec\":60,\"ttl_sec\":3600,\"args\":{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771091273000-aabbccdd\",\"btc_sats\":1002,\"usdt_amount\":\"330000\",\"ln_liquidity_mode\":\"aggregate\"}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_start_3","type":"function","function":{"name":"intercomswap_autopost_start","arguments":"{\"name\":\"rfq_maker_040267c8_1771091273648\",\"tool\":\"intercomswap_rfq_post\",\"interval_sec\":60,\"ttl_sec\":3600,\"args\":{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771091273000-aabbccdd\",\"btc_sats\":1002,\"usdt_amount\":\"330000\",\"ln_liquidity_mode\":\"aggregate\"}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_start_3","name":"intercomswap_autopost_start","content":"{\"ok\":false,\"code\":\"AUTPOST_DUPLICATE\",\"error\":\"autopost_start: name already exists (rfq_maker_040267c8_1771091273648)\"}"},{"role":"assistant","content":"intercomswap_autopost_start failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_autopost_start__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_autopost_start","tools":[{"type":"function","function":{"name":"intercomswap_autopost_start","description":"Start a periodic repost scheduler for offer_post or rfq_post.","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"},"tool":{"type":"string","enum":["intercomswap_offer_post","intercomswap_rfq_post"]},"interval_sec":{"type":"integer","minimum":5,"maximum":86400,"description":"How often to repost."},"ttl_sec":{"type":"integer","minimum":10,"maximum":604800,"description":"Absolute validity horizon (seconds) for the offer/RFQ. Autopost stops once expired; reposts do not extend validity."},"valid_until_unix":{"type":"integer","minimum":1,"description":"Optional absolute expiry (unix seconds). If provided, autopost will stop at this time and all reposts will share the same valid_until_unix."},"args":{"type":"object","additionalProperties":true,"description":"Arguments for the selected tool."}},"required":["name","tool","interval_sec","ttl_sec","args"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_start with these arguments: {\"name\":\"\",\"tool\":\"intercomswap_offer_post\",\"interval_sec\":10,\"ttl_sec\":86400,\"args\":{\"channels\":[\"0000intercomswapbtcusdt\"],\"name\":\"maker_alpha\",\"offers\":[{\"btc_sats\":1000,\"usdt_amount\":\"670000\"}],\"ttl_sec\":86400}}"},{"role":"assistant","content":"Cannot call intercomswap_autopost_start with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_autopost_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_autopost_stop","tools":[{"type":"function","function":{"name":"intercomswap_autopost_stop","description":"Stop an autopost job (by name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_stop with these arguments (minimal valid shape): {\"name\":\"autopost_stop_a\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_stop_1","type":"function","function":{"name":"intercomswap_autopost_stop","arguments":"{\"name\":\"autopost_stop_a\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_stop_1","name":"intercomswap_autopost_stop","content":"{\"ok\":true,\"name\":\"autopost_stop_a\",\"status\":\"stopped\",\"pid\":29201}"},{"role":"assistant","content":"intercomswap_autopost_stop completed successfully."}]}
{"id":"intercomswap_autopost_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_autopost_stop","tools":[{"type":"function","function":{"name":"intercomswap_autopost_stop","description":"Stop an autopost job (by name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_stop with an expanded/edge argument set: {\"name\":\"autopost_stop_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_stop_2","type":"function","function":{"name":"intercomswap_autopost_stop","arguments":"{\"name\":\"autopost_stop_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_stop_2","name":"intercomswap_autopost_stop","content":"{\"ok\":true,\"name\":\"autopost_stop_b\",\"status\":\"stopped\",\"pid\":29302}"},{"role":"assistant","content":"intercomswap_autopost_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_autopost_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_autopost_stop","tools":[{"type":"function","function":{"name":"intercomswap_autopost_stop","description":"Stop an autopost job (by name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_stop now with this valid argument set even if backend conditions may fail: {\"name\":\"autopost_stop_b\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_autopost_stop_3","type":"function","function":{"name":"intercomswap_autopost_stop","arguments":"{\"name\":\"autopost_stop_b\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_autopost_stop_3","name":"intercomswap_autopost_stop","content":"{\"ok\":false,\"code\":\"AUTPOST_DUPLICATE\",\"error\":\"autopost_start: name already exists (autopost_stop_b)\"}"},{"role":"assistant","content":"intercomswap_autopost_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_autopost_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_autopost_stop","tools":[{"type":"function","function":{"name":"intercomswap_autopost_stop","description":"Stop an autopost job (by name).","parameters":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9._-]+$"}},"required":["name"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_autopost_stop with these arguments: {\"name\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_autopost_stop with that payload. name must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_terms_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_terms_post","tools":[{"type":"function","function":{"name":"intercomswap_terms_post","description":"Maker: post signed TERMS envelope inside swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"ln_receiver_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"ln_payer_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"terms_valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for terms acceptance."}},"required":["channel","trade_id","btc_sats","usdt_amount","sol_mint","sol_recipient","sol_refund","sol_refund_after_unix","ln_receiver_peer","ln_payer_peer","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"sol_mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund_after_unix\":1772100000,\"ln_receiver_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"ln_payer_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_post_1","type":"function","function":{"name":"intercomswap_terms_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"sol_mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund_after_unix\":1772100000,\"ln_receiver_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"ln_payer_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_post_1","name":"intercomswap_terms_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.terms\",\"envelope_id\":\"82c4129920488ed5a11f50a6f8158f5af5f4bb24dabca7dc922c5e1021f30bfe\",\"sig\":\"b1a207dde2ef45cc\"}"},{"role":"assistant","content":"intercomswap_terms_post completed successfully."}]}
{"id":"intercomswap_terms_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_terms_post","tools":[{"type":"function","function":{"name":"intercomswap_terms_post","description":"Maker: post signed TERMS envelope inside swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"ln_receiver_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"ln_payer_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"terms_valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for terms acceptance."}},"required":["channel","trade_id","btc_sats","usdt_amount","sol_mint","sol_recipient","sol_refund","sol_refund_after_unix","ln_receiver_peer","ln_payer_peer","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_after_unix\":1772700000,\"ln_receiver_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"ln_payer_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"terms_valid_until_unix\":1772600000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_post_2","type":"function","function":{"name":"intercomswap_terms_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_after_unix\":1772700000,\"ln_receiver_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"ln_payer_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"terms_valid_until_unix\":1772600000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_post_2","name":"intercomswap_terms_post","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.terms\",\"envelope_id\":\"03ee8b3de9d5f198cf58ad119eb8efc697cc99c5927d2711c3a1a36d5d811b99\",\"sig\":\"26339fbff6e9ef51\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_terms_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_terms_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_terms_post","tools":[{"type":"function","function":{"name":"intercomswap_terms_post","description":"Maker: post signed TERMS envelope inside swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"ln_receiver_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"ln_payer_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"terms_valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for terms acceptance."}},"required":["channel","trade_id","btc_sats","usdt_amount","sol_mint","sol_recipient","sol_refund","sol_refund_after_unix","ln_receiver_peer","ln_payer_peer","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_after_unix\":1772700000,\"ln_receiver_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"ln_payer_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"terms_valid_until_unix\":1772600000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_post_3","type":"function","function":{"name":"intercomswap_terms_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"usdt_amount\":\"810000\",\"sol_mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"sol_refund_after_unix\":1772700000,\"ln_receiver_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"ln_payer_peer\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"terms_valid_until_unix\":1772600000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_post_3","name":"intercomswap_terms_post","content":"{\"ok\":false,\"code\":\"MISSING_USDT_MINT\",\"error\":\"terms_post: missing usdt_mint\"}"},{"role":"assistant","content":"intercomswap_terms_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_terms_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_terms_post","tools":[{"type":"function","function":{"name":"intercomswap_terms_post","description":"Maker: post signed TERMS envelope inside swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"usdt_amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"sol_mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"sol_refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"ln_receiver_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"ln_payer_peer":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"terms_valid_until_unix":{"type":"integer","minimum":1,"description":"Optional expiry for terms acceptance."}},"required":["channel","trade_id","btc_sats","usdt_amount","sol_mint","sol_recipient","sol_refund","sol_refund_after_unix","ln_receiver_peer","ln_payer_peer","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"usdt_amount\":\"670000\",\"sol_mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"sol_refund_after_unix\":1772100000,\"ln_receiver_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"ln_payer_peer\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_terms_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_terms_accept__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_terms_accept","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept","description":"Taker: post signed ACCEPT inside swap:<id> referencing the terms hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"terms_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","terms_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"terms_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_1","type":"function","function":{"name":"intercomswap_terms_accept","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"terms_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_1","name":"intercomswap_terms_accept","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.accept\",\"envelope_id\":\"17beaa229863c19c9e537a32a838923030792c5b676e9671d6a9e0f30b3b6b25\",\"sig\":\"7e57d835c403e97d\"}"},{"role":"assistant","content":"intercomswap_terms_accept completed successfully."}]}
{"id":"intercomswap_terms_accept__success_variant","scenario":"success_variant","tool_name":"intercomswap_terms_accept","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept","description":"Taker: post signed ACCEPT inside swap:<id> referencing the terms hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"terms_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","terms_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"terms_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_2","type":"function","function":{"name":"intercomswap_terms_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"terms_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_2","name":"intercomswap_terms_accept","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.accept\",\"envelope_id\":\"7664cd45bc15cb8934bdcacc25612e69ce1ef26bc0d99cf9485b924b385a1914\",\"sig\":\"574a6b296eae6ff8\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_terms_accept succeeded with the expanded parameter set."}]}
{"id":"intercomswap_terms_accept__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_terms_accept","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept","description":"Taker: post signed ACCEPT inside swap:<id> referencing the terms hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"terms_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","terms_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"terms_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_3","type":"function","function":{"name":"intercomswap_terms_accept","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"terms_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_3","name":"intercomswap_terms_accept","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_terms_accept failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_terms_accept__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_terms_accept","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept","description":"Taker: post signed ACCEPT inside swap:<id> referencing the terms hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"terms_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","terms_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"terms_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","content":"Cannot call intercomswap_terms_accept with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_status_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_status_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_status_post","description":"Post signed STATUS envelope inside swap:<id> (informational; used for liveness handshakes).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"state":{"type":"string","enum":["init","terms","accepted","invoice","escrow","ln_paid","claimed","refunded","canceled"]},"note":{"type":"string","minLength":1,"maxLength":500}},"required":["channel","trade_id","state"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_status_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"init\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_status_post_1","type":"function","function":{"name":"intercomswap_swap_status_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"init\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_status_post_1","name":"intercomswap_swap_status_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.status\",\"envelope_id\":\"89359d63aa3fa341be29363d7e7780b19cd63d8abdee73ef1bf64c5b35922042\",\"sig\":\"64c6712b2f8e0312\"}"},{"role":"assistant","content":"intercomswap_swap_status_post completed successfully."}]}
{"id":"intercomswap_swap_status_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_status_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_status_post","description":"Post signed STATUS envelope inside swap:<id> (informational; used for liveness handshakes).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"state":{"type":"string","enum":["init","terms","accepted","invoice","escrow","ln_paid","claimed","refunded","canceled"]},"note":{"type":"string","minLength":1,"maxLength":500}},"required":["channel","trade_id","state"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_status_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"terms\",\"note\":\"waiting for counterparty\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_status_post_2","type":"function","function":{"name":"intercomswap_swap_status_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"terms\",\"note\":\"waiting for counterparty\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_status_post_2","name":"intercomswap_swap_status_post","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.status\",\"envelope_id\":\"fa3969236dd847ecd9e63297391e9fac5be918efef4268bc23942fc725f0ee9d\",\"sig\":\"9c39da869403544a\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_swap_status_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_status_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_status_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_status_post","description":"Post signed STATUS envelope inside swap:<id> (informational; used for liveness handshakes).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"state":{"type":"string","enum":["init","terms","accepted","invoice","escrow","ln_paid","claimed","refunded","canceled"]},"note":{"type":"string","minLength":1,"maxLength":500}},"required":["channel","trade_id","state"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_status_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"terms\",\"note\":\"waiting for counterparty\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_status_post_3","type":"function","function":{"name":"intercomswap_swap_status_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"terms\",\"note\":\"waiting for counterparty\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_status_post_3","name":"intercomswap_swap_status_post","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_swap_status_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_status_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_status_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_status_post","description":"Post signed STATUS envelope inside swap:<id> (informational; used for liveness handshakes).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"state":{"type":"string","enum":["init","terms","accepted","invoice","escrow","ln_paid","claimed","refunded","canceled"]},"note":{"type":"string","minLength":1,"maxLength":500}},"required":["channel","trade_id","state"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_status_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"init\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_status_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_cancel_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_cancel_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_cancel_post","description":"Post signed CANCEL envelope inside swap:<id> (only allowed before escrow is created).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"reason":{"type":"string","minLength":1,"maxLength":500,"description":"Optional human-readable cancel reason."}},"required":["channel","trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_cancel_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_cancel_post_1","type":"function","function":{"name":"intercomswap_swap_cancel_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_cancel_post_1","name":"intercomswap_swap_cancel_post","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.cancel\",\"envelope_id\":\"de35811e46bf7ca0f0f6592394f67732875238bd8201a8cc8e04823cfd6da583\",\"sig\":\"5613dbd69f322b72\"}"},{"role":"assistant","content":"intercomswap_swap_cancel_post completed successfully."}]}
{"id":"intercomswap_swap_cancel_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_cancel_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_cancel_post","description":"Post signed CANCEL envelope inside swap:<id> (only allowed before escrow is created).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"reason":{"type":"string","minLength":1,"maxLength":500,"description":"Optional human-readable cancel reason."}},"required":["channel","trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_cancel_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"reason\":\"timeout_safety_abort\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_cancel_post_2","type":"function","function":{"name":"intercomswap_swap_cancel_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"reason\":\"timeout_safety_abort\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_cancel_post_2","name":"intercomswap_swap_cancel_post","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"envelope_kind\":\"swap.cancel\",\"envelope_id\":\"513f5578d3eb624af27bc0f6d9f79b218c20183bdf2acc6f10f60d92b26fd1b8\",\"sig\":\"adab42ec4609761e\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_swap_cancel_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_cancel_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_cancel_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_cancel_post","description":"Post signed CANCEL envelope inside swap:<id> (only allowed before escrow is created).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"reason":{"type":"string","minLength":1,"maxLength":500,"description":"Optional human-readable cancel reason."}},"required":["channel","trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_cancel_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"reason\":\"timeout_safety_abort\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_cancel_post_3","type":"function","function":{"name":"intercomswap_swap_cancel_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"reason\":\"timeout_safety_abort\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_cancel_post_3","name":"intercomswap_swap_cancel_post","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_swap_cancel_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_cancel_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_cancel_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_cancel_post","description":"Post signed CANCEL envelope inside swap:<id> (only allowed before escrow is created).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"reason":{"type":"string","minLength":1,"maxLength":500,"description":"Optional human-readable cancel reason."}},"required":["channel","trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_cancel_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_cancel_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_terms_accept_from_terms__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_terms_accept_from_terms","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept_from_terms","description":"Taker: post signed ACCEPT inside swap:<id> from a TERMS envelope (computes terms hash).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]}},"required":["channel","terms_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept_from_terms with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_from_terms_1","type":"function","function":{"name":"intercomswap_terms_accept_from_terms","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_from_terms_1","name":"intercomswap_terms_accept_from_terms","content":"{\"ok\":true,\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.accept\",\"envelope_id\":\"5f1023a30e9b155e5f5e17ed9d0cc36e90595a574320bf9d0f4c83a3268f1eb3\",\"sig\":\"3779c5cf62d35475\"}"},{"role":"assistant","content":"intercomswap_terms_accept_from_terms completed successfully."}]}
{"id":"intercomswap_terms_accept_from_terms__success_variant","scenario":"success_variant","tool_name":"intercomswap_terms_accept_from_terms","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept_from_terms","description":"Taker: post signed ACCEPT inside swap:<id> from a TERMS envelope (computes terms hash).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]}},"required":["channel","terms_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept_from_terms with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_from_terms_2","type":"function","function":{"name":"intercomswap_terms_accept_from_terms","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_from_terms_2","name":"intercomswap_terms_accept_from_terms","content":"{\"ok\":true,\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"envelope_kind\":\"swap.accept\",\"envelope_id\":\"796f47beefedb86f875e4016c18daa77e71d15a884fb5bb9169dfc2b683456db\",\"sig\":\"9b78368b06809bf7\",\"warning\":\"idempotent replay accepted\"}"},{"role":"assistant","content":"intercomswap_terms_accept_from_terms succeeded with the expanded parameter set."}]}
{"id":"intercomswap_terms_accept_from_terms__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_terms_accept_from_terms","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept_from_terms","description":"Taker: post signed ACCEPT inside swap:<id> from a TERMS envelope (computes terms hash).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]}},"required":["channel","terms_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept_from_terms now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_terms_accept_from_terms_3","type":"function","function":{"name":"intercomswap_terms_accept_from_terms","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_terms_accept_from_terms_3","name":"intercomswap_terms_accept_from_terms","content":"{\"ok\":false,\"code\":\"LISTING_NOT_ACTIONABLE\",\"error\":\"listing expired, filled, or locked by an active trade\"}"},{"role":"assistant","content":"intercomswap_terms_accept_from_terms failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_terms_accept_from_terms__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_terms_accept_from_terms","tools":[{"type":"function","function":{"name":"intercomswap_terms_accept_from_terms","description":"Taker: post signed ACCEPT inside swap:<id> from a TERMS envelope (computes terms hash).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]}},"required":["channel","terms_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_terms_accept_from_terms with these arguments: {\"channel\":\"\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_terms_accept_from_terms with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_docker_ps__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_docker_ps","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_ps","description":"Docker-only: show docker compose service status for the configured LN compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_ps with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_ps_1","type":"function","function":{"name":"intercomswap_ln_docker_ps","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_ps_1","name":"intercomswap_ln_docker_ps","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_ps\"}"},{"role":"assistant","content":"intercomswap_ln_docker_ps completed successfully."}]}
{"id":"intercomswap_ln_docker_ps__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_docker_ps","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_ps","description":"Docker-only: show docker compose service status for the configured LN compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_ps with an expanded/edge argument set: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_ps_2","type":"function","function":{"name":"intercomswap_ln_docker_ps","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_ps_2","name":"intercomswap_ln_docker_ps","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_ps\"}"},{"role":"assistant","content":"intercomswap_ln_docker_ps succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_docker_ps__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_docker_ps","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_ps","description":"Docker-only: show docker compose service status for the configured LN compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_ps now with this valid argument set even if backend conditions may fail: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_ps_3","type":"function","function":{"name":"intercomswap_ln_docker_ps","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_ps_3","name":"intercomswap_ln_docker_ps","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_docker_ps failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_docker_ps__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_docker_ps","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_ps","description":"Docker-only: show docker compose service status for the configured LN compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_ps with these arguments: {\"compose_file\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_docker_ps with that payload. compose_file must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_docker_up__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_docker_up","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_up","description":"Docker-only: start LN docker services (defaults to bitcoind + configured LN service).","parameters":{"type":"object","additionalProperties":false,"properties":{"services":{"type":"array","minItems":0,"maxItems":10,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"description":"Optional docker compose service names. If omitted, uses defaults."},"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_up with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_up_1","type":"function","function":{"name":"intercomswap_ln_docker_up","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_up_1","name":"intercomswap_ln_docker_up","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_up\"}"},{"role":"assistant","content":"intercomswap_ln_docker_up completed successfully."}]}
{"id":"intercomswap_ln_docker_up__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_docker_up","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_up","description":"Docker-only: start LN docker services (defaults to bitcoind + configured LN service).","parameters":{"type":"object","additionalProperties":false,"properties":{"services":{"type":"array","minItems":0,"maxItems":10,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"description":"Optional docker compose service names. If omitted, uses defaults."},"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_up with an expanded/edge argument set: {\"services\":[\"sample_value\",\"sample_value\"],\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_up_2","type":"function","function":{"name":"intercomswap_ln_docker_up","arguments":"{\"services\":[\"sample_value\",\"sample_value\"],\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_up_2","name":"intercomswap_ln_docker_up","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_up\"}"},{"role":"assistant","content":"intercomswap_ln_docker_up succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_docker_up__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_docker_up","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_up","description":"Docker-only: start LN docker services (defaults to bitcoind + configured LN service).","parameters":{"type":"object","additionalProperties":false,"properties":{"services":{"type":"array","minItems":0,"maxItems":10,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"description":"Optional docker compose service names. If omitted, uses defaults."},"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_up now with this valid argument set even if backend conditions may fail: {\"services\":[\"sample_value\",\"sample_value\"],\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_up_3","type":"function","function":{"name":"intercomswap_ln_docker_up","arguments":"{\"services\":[\"sample_value\",\"sample_value\"],\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_up_3","name":"intercomswap_ln_docker_up","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_docker_up failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_docker_up__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_docker_up","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_up","description":"Docker-only: start LN docker services (defaults to bitcoind + configured LN service).","parameters":{"type":"object","additionalProperties":false,"properties":{"services":{"type":"array","minItems":0,"maxItems":10,"items":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"description":"Optional docker compose service names. If omitted, uses defaults."},"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_up with these arguments: {\"services\":\"not-an-array\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_docker_up with that payload. services must be an array. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_docker_down__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_docker_down","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_down","description":"Docker-only: stop the LN docker compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"volumes":{"type":"boolean","description":"If true, also remove named volumes (DANGEROUS; deletes regtest state)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_down with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_down_1","type":"function","function":{"name":"intercomswap_ln_docker_down","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_down_1","name":"intercomswap_ln_docker_down","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_down\"}"},{"role":"assistant","content":"intercomswap_ln_docker_down completed successfully."}]}
{"id":"intercomswap_ln_docker_down__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_docker_down","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_down","description":"Docker-only: stop the LN docker compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"volumes":{"type":"boolean","description":"If true, also remove named volumes (DANGEROUS; deletes regtest state)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_down with an expanded/edge argument set: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"volumes\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_down_2","type":"function","function":{"name":"intercomswap_ln_docker_down","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"volumes\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_down_2","name":"intercomswap_ln_docker_down","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_docker_down\"}"},{"role":"assistant","content":"intercomswap_ln_docker_down succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_docker_down__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_docker_down","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_down","description":"Docker-only: stop the LN docker compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"volumes":{"type":"boolean","description":"If true, also remove named volumes (DANGEROUS; deletes regtest state)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_down now with this valid argument set even if backend conditions may fail: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"volumes\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_docker_down_3","type":"function","function":{"name":"intercomswap_ln_docker_down","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"volumes\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_docker_down_3","name":"intercomswap_ln_docker_down","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_docker_down failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_docker_down__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_docker_down","tools":[{"type":"function","function":{"name":"intercomswap_ln_docker_down","description":"Docker-only: stop the LN docker compose stack.","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"volumes":{"type":"boolean","description":"If true, also remove named volumes (DANGEROUS; deletes regtest state)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_docker_down with these arguments: {\"compose_file\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_docker_down with that payload. compose_file must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_regtest_init__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_regtest_init","tools":[{"type":"function","function":{"name":"intercomswap_ln_regtest_init","description":"Docker-only (regtest): bootstrap a funded Lightning channel between the two nodes in the compose stack (mine, fund, connect, open channel).","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"from_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"to_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"channel_amount_sats":{"type":"integer","minimum":10000,"maximum":10000000000,"description":"Channel capacity in sats (default 1,000,000)."},"fund_btc":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+(?:\\.[0-9]{1,8})?$","description":"BTC amount to send to each LN node wallet (default \"1\")."},"mine_initial_blocks":{"type":"integer","minimum":1,"maximum":500,"description":"Initial blocks to mine for spendable coins (default 101)."},"mine_confirm_blocks":{"type":"integer","minimum":1,"maximum":100,"description":"Blocks to mine for confirmations (default 6)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_regtest_init with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_regtest_init_1","type":"function","function":{"name":"intercomswap_ln_regtest_init","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_regtest_init_1","name":"intercomswap_ln_regtest_init","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_regtest_init\"}"},{"role":"assistant","content":"intercomswap_ln_regtest_init completed successfully."}]}
{"id":"intercomswap_ln_regtest_init__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_regtest_init","tools":[{"type":"function","function":{"name":"intercomswap_ln_regtest_init","description":"Docker-only (regtest): bootstrap a funded Lightning channel between the two nodes in the compose stack (mine, fund, connect, open channel).","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"from_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"to_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"channel_amount_sats":{"type":"integer","minimum":10000,"maximum":10000000000,"description":"Channel capacity in sats (default 1,000,000)."},"fund_btc":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+(?:\\.[0-9]{1,8})?$","description":"BTC amount to send to each LN node wallet (default \"1\")."},"mine_initial_blocks":{"type":"integer","minimum":1,"maximum":500,"description":"Initial blocks to mine for spendable coins (default 101)."},"mine_confirm_blocks":{"type":"integer","minimum":1,"maximum":100,"description":"Blocks to mine for confirmations (default 6)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_regtest_init with an expanded/edge argument set: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"from_service\":\"sample_value\",\"to_service\":\"sample_value\",\"channel_amount_sats\":900000,\"fund_btc\":\"2.50000000\",\"mine_initial_blocks\":167,\"mine_confirm_blocks\":34}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_regtest_init_2","type":"function","function":{"name":"intercomswap_ln_regtest_init","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"from_service\":\"sample_value\",\"to_service\":\"sample_value\",\"channel_amount_sats\":900000,\"fund_btc\":\"2.50000000\",\"mine_initial_blocks\":167,\"mine_confirm_blocks\":34}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_regtest_init_2","name":"intercomswap_ln_regtest_init","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_regtest_init\"}"},{"role":"assistant","content":"intercomswap_ln_regtest_init succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_regtest_init__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_regtest_init","tools":[{"type":"function","function":{"name":"intercomswap_ln_regtest_init","description":"Docker-only (regtest): bootstrap a funded Lightning channel between the two nodes in the compose stack (mine, fund, connect, open channel).","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"from_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"to_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"channel_amount_sats":{"type":"integer","minimum":10000,"maximum":10000000000,"description":"Channel capacity in sats (default 1,000,000)."},"fund_btc":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+(?:\\.[0-9]{1,8})?$","description":"BTC amount to send to each LN node wallet (default \"1\")."},"mine_initial_blocks":{"type":"integer","minimum":1,"maximum":500,"description":"Initial blocks to mine for spendable coins (default 101)."},"mine_confirm_blocks":{"type":"integer","minimum":1,"maximum":100,"description":"Blocks to mine for confirmations (default 6)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_regtest_init now with this valid argument set even if backend conditions may fail: {\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"from_service\":\"sample_value\",\"to_service\":\"sample_value\",\"channel_amount_sats\":900000,\"fund_btc\":\"2.50000000\",\"mine_initial_blocks\":167,\"mine_confirm_blocks\":34}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_regtest_init_3","type":"function","function":{"name":"intercomswap_ln_regtest_init","arguments":"{\"compose_file\":\"dev/lnd-regtest/docker-compose.yml\",\"from_service\":\"sample_value\",\"to_service\":\"sample_value\",\"channel_amount_sats\":900000,\"fund_btc\":\"2.50000000\",\"mine_initial_blocks\":167,\"mine_confirm_blocks\":34}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_regtest_init_3","name":"intercomswap_ln_regtest_init","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_regtest_init failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_regtest_init__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_regtest_init","tools":[{"type":"function","function":{"name":"intercomswap_ln_regtest_init","description":"Docker-only (regtest): bootstrap a funded Lightning channel between the two nodes in the compose stack (mine, fund, connect, open channel).","parameters":{"type":"object","additionalProperties":false,"properties":{"compose_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$"},"from_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"to_service":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[A-Za-z0-9][A-Za-z0-9._-]{0,63}$"},"channel_amount_sats":{"type":"integer","minimum":10000,"maximum":10000000000,"description":"Channel capacity in sats (default 1,000,000)."},"fund_btc":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+(?:\\.[0-9]{1,8})?$","description":"BTC amount to send to each LN node wallet (default \"1\")."},"mine_initial_blocks":{"type":"integer","minimum":1,"maximum":500,"description":"Initial blocks to mine for spendable coins (default 101)."},"mine_confirm_blocks":{"type":"integer","minimum":1,"maximum":100,"description":"Blocks to mine for confirmations (default 6)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_regtest_init with these arguments: {\"compose_file\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_regtest_init with that payload. compose_file must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_unlock__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_unlock","tools":[{"type":"function","function":{"name":"intercomswap_ln_unlock","description":"LND-only: unlock the wallet (docker backend). Uses ln.wallet_password_file from prompt setup, or an inferred file under onchain/lnd/<network>/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"password_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$","description":"Path to a file containing the LND wallet password. Must be under onchain/. If omitted, promptd uses ln.wallet_password_file then falls back to inferred names under onchain/lnd/<network>/ (e.g. maker.wallet-password.txt, taker.wallet-password.txt, wallet.pw)."},"timeout_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Optional timeout (default 30000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_unlock with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_unlock_1","type":"function","function":{"name":"intercomswap_ln_unlock","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_unlock_1","name":"intercomswap_ln_unlock","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_unlock\"}"},{"role":"assistant","content":"intercomswap_ln_unlock completed successfully."}]}
{"id":"intercomswap_ln_unlock__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_unlock","tools":[{"type":"function","function":{"name":"intercomswap_ln_unlock","description":"LND-only: unlock the wallet (docker backend). Uses ln.wallet_password_file from prompt setup, or an inferred file under onchain/lnd/<network>/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"password_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$","description":"Path to a file containing the LND wallet password. Must be under onchain/. If omitted, promptd uses ln.wallet_password_file then falls back to inferred names under onchain/lnd/<network>/ (e.g. maker.wallet-password.txt, taker.wallet-password.txt, wallet.pw)."},"timeout_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Optional timeout (default 30000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_unlock with an expanded/edge argument set: {\"password_file\":\"onchain/lnd/mainnet/wallet.pw\",\"timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_unlock_2","type":"function","function":{"name":"intercomswap_ln_unlock","arguments":"{\"password_file\":\"onchain/lnd/mainnet/wallet.pw\",\"timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_unlock_2","name":"intercomswap_ln_unlock","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_unlock\"}"},{"role":"assistant","content":"intercomswap_ln_unlock succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_unlock__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_unlock","tools":[{"type":"function","function":{"name":"intercomswap_ln_unlock","description":"LND-only: unlock the wallet (docker backend). Uses ln.wallet_password_file from prompt setup, or an inferred file under onchain/lnd/<network>/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"password_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$","description":"Path to a file containing the LND wallet password. Must be under onchain/. If omitted, promptd uses ln.wallet_password_file then falls back to inferred names under onchain/lnd/<network>/ (e.g. maker.wallet-password.txt, taker.wallet-password.txt, wallet.pw)."},"timeout_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Optional timeout (default 30000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_unlock now with this valid argument set even if backend conditions may fail: {\"password_file\":\"onchain/lnd/mainnet/wallet.pw\",\"timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_unlock_3","type":"function","function":{"name":"intercomswap_ln_unlock","arguments":"{\"password_file\":\"onchain/lnd/mainnet/wallet.pw\",\"timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_unlock_3","name":"intercomswap_ln_unlock","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_unlock failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_unlock__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_unlock","tools":[{"type":"function","function":{"name":"intercomswap_ln_unlock","description":"LND-only: unlock the wallet (docker backend). Uses ln.wallet_password_file from prompt setup, or an inferred file under onchain/lnd/<network>/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"password_file":{"type":"string","minLength":1,"maxLength":400,"pattern":"^[^\\s]+$","description":"Path to a file containing the LND wallet password. Must be under onchain/. If omitted, promptd uses ln.wallet_password_file then falls back to inferred names under onchain/lnd/<network>/ (e.g. maker.wallet-password.txt, taker.wallet-password.txt, wallet.pw)."},"timeout_ms":{"type":"integer","minimum":1000,"maximum":120000,"description":"Optional timeout (default 30000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_unlock with these arguments: {\"password_file\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_unlock with that payload. password_file must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_info__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_info","tools":[{"type":"function","function":{"name":"intercomswap_ln_info","description":"Get Lightning node info (impl/backend configured locally).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_info with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_info_1","type":"function","function":{"name":"intercomswap_ln_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_info_1","name":"intercomswap_ln_info","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_info\"}"},{"role":"assistant","content":"intercomswap_ln_info completed successfully."}]}
{"id":"intercomswap_ln_info__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_info","tools":[{"type":"function","function":{"name":"intercomswap_ln_info","description":"Get Lightning node info (impl/backend configured locally).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_info with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_info_2","type":"function","function":{"name":"intercomswap_ln_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_info_2","name":"intercomswap_ln_info","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_info\"}"},{"role":"assistant","content":"intercomswap_ln_info succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_info__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_info","tools":[{"type":"function","function":{"name":"intercomswap_ln_info","description":"Get Lightning node info (impl/backend configured locally).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_info now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_info_3","type":"function","function":{"name":"intercomswap_ln_info","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_info_3","name":"intercomswap_ln_info","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_info failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_info__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_info","tools":[{"type":"function","function":{"name":"intercomswap_ln_info","description":"Get Lightning node info (impl/backend configured locally).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_info with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_ln_info with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_newaddr__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_newaddr","tools":[{"type":"function","function":{"name":"intercomswap_ln_newaddr","description":"Get a new on-chain BTC address from the LN node wallet.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_newaddr with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_newaddr_1","type":"function","function":{"name":"intercomswap_ln_newaddr","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_newaddr_1","name":"intercomswap_ln_newaddr","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_newaddr\"}"},{"role":"assistant","content":"intercomswap_ln_newaddr completed successfully."}]}
{"id":"intercomswap_ln_newaddr__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_newaddr","tools":[{"type":"function","function":{"name":"intercomswap_ln_newaddr","description":"Get a new on-chain BTC address from the LN node wallet.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_newaddr with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_newaddr_2","type":"function","function":{"name":"intercomswap_ln_newaddr","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_newaddr_2","name":"intercomswap_ln_newaddr","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_newaddr\"}"},{"role":"assistant","content":"intercomswap_ln_newaddr succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_newaddr__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_newaddr","tools":[{"type":"function","function":{"name":"intercomswap_ln_newaddr","description":"Get a new on-chain BTC address from the LN node wallet.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_newaddr now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_newaddr_3","type":"function","function":{"name":"intercomswap_ln_newaddr","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_newaddr_3","name":"intercomswap_ln_newaddr","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_newaddr failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_newaddr__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_newaddr","tools":[{"type":"function","function":{"name":"intercomswap_ln_newaddr","description":"Get a new on-chain BTC address from the LN node wallet.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_newaddr with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_ln_newaddr with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_listpeers__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_listpeers","tools":[{"type":"function","function":{"name":"intercomswap_ln_listpeers","description":"List connected Lightning peers (used to suggest peer URIs).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listpeers with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listpeers_1","type":"function","function":{"name":"intercomswap_ln_listpeers","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listpeers_1","name":"intercomswap_ln_listpeers","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_listpeers\"}"},{"role":"assistant","content":"intercomswap_ln_listpeers completed successfully."}]}
{"id":"intercomswap_ln_listpeers__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_listpeers","tools":[{"type":"function","function":{"name":"intercomswap_ln_listpeers","description":"List connected Lightning peers (used to suggest peer URIs).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listpeers with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listpeers_2","type":"function","function":{"name":"intercomswap_ln_listpeers","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listpeers_2","name":"intercomswap_ln_listpeers","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_listpeers\"}"},{"role":"assistant","content":"intercomswap_ln_listpeers succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_listpeers__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_listpeers","tools":[{"type":"function","function":{"name":"intercomswap_ln_listpeers","description":"List connected Lightning peers (used to suggest peer URIs).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listpeers now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listpeers_3","type":"function","function":{"name":"intercomswap_ln_listpeers","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listpeers_3","name":"intercomswap_ln_listpeers","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_listpeers failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_listpeers__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_listpeers","tools":[{"type":"function","function":{"name":"intercomswap_ln_listpeers","description":"List connected Lightning peers (used to suggest peer URIs).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listpeers with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_ln_listpeers with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_listfunds__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_listfunds","tools":[{"type":"function","function":{"name":"intercomswap_ln_listfunds","description":"Get on-chain + channel balances.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listfunds with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listfunds_1","type":"function","function":{"name":"intercomswap_ln_listfunds","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listfunds_1","name":"intercomswap_ln_listfunds","content":"{\"ok\":true,\"onchain_sats\":900000,\"outbound_sats\":400707,\"inbound_sats\":97386}"},{"role":"assistant","content":"intercomswap_ln_listfunds completed successfully."}]}
{"id":"intercomswap_ln_listfunds__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_listfunds","tools":[{"type":"function","function":{"name":"intercomswap_ln_listfunds","description":"Get on-chain + channel balances.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listfunds with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listfunds_2","type":"function","function":{"name":"intercomswap_ln_listfunds","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listfunds_2","name":"intercomswap_ln_listfunds","content":"{\"ok\":true,\"onchain_sats\":1500000,\"outbound_sats\":400707,\"inbound_sats\":97386}"},{"role":"assistant","content":"intercomswap_ln_listfunds succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_listfunds__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_listfunds","tools":[{"type":"function","function":{"name":"intercomswap_ln_listfunds","description":"Get on-chain + channel balances.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listfunds now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listfunds_3","type":"function","function":{"name":"intercomswap_ln_listfunds","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listfunds_3","name":"intercomswap_ln_listfunds","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_listfunds failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_listfunds__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_listfunds","tools":[{"type":"function","function":{"name":"intercomswap_ln_listfunds","description":"Get on-chain + channel balances.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listfunds with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_ln_listfunds with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_listchannels__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_listchannels","tools":[{"type":"function","function":{"name":"intercomswap_ln_listchannels","description":"List Lightning channels with peer/state/balance details (for channel management).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listchannels with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listchannels_1","type":"function","function":{"name":"intercomswap_ln_listchannels","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listchannels_1","name":"intercomswap_ln_listchannels","content":"{\"ok\":true,\"channels\":[{\"channel_point\":\"f51acb9df477a98b1e624e89a3f8e36a86f46f6f8baf3deee302a22cd76bb6b2:1\",\"active\":true,\"private\":false,\"capacity_sats\":442491,\"local_sats\":141547,\"remote_sats\":300000}]}"},{"role":"assistant","content":"intercomswap_ln_listchannels completed successfully."}]}
{"id":"intercomswap_ln_listchannels__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_listchannels","tools":[{"type":"function","function":{"name":"intercomswap_ln_listchannels","description":"List Lightning channels with peer/state/balance details (for channel management).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listchannels with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listchannels_2","type":"function","function":{"name":"intercomswap_ln_listchannels","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listchannels_2","name":"intercomswap_ln_listchannels","content":"{\"ok\":true,\"channels\":[{\"channel_point\":\"f51acb9df477a98b1e624e89a3f8e36a86f46f6f8baf3deee302a22cd76bb6b2:1\",\"active\":true,\"private\":false,\"capacity_sats\":442491,\"local_sats\":141547,\"remote_sats\":300000}]}"},{"role":"assistant","content":"intercomswap_ln_listchannels succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_listchannels__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_listchannels","tools":[{"type":"function","function":{"name":"intercomswap_ln_listchannels","description":"List Lightning channels with peer/state/balance details (for channel management).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listchannels now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_listchannels_3","type":"function","function":{"name":"intercomswap_ln_listchannels","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_listchannels_3","name":"intercomswap_ln_listchannels","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_listchannels failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_listchannels__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_listchannels","tools":[{"type":"function","function":{"name":"intercomswap_ln_listchannels","description":"List Lightning channels with peer/state/balance details (for channel management).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_listchannels with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_ln_listchannels with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_closechannel__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_closechannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_closechannel","description":"Close a Lightning channel (cooperative by default) to return liquidity to on-chain BTC.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"Channel identifier. LND: funding_txid:output_index (channel_point). CLN: channel_id/short_channel_id/peer_id."},"force":{"type":"boolean","description":"Force-close (LND only). Default false (cooperative close)."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional close transaction feerate (sat/vB, LND only)."},"block":{"type":"boolean","description":"LND only: wait for close result synchronously."}},"required":["channel_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_closechannel with these arguments (minimal valid shape): {\"channel_id\":\"xxx\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_closechannel_1","type":"function","function":{"name":"intercomswap_ln_closechannel","arguments":"{\"channel_id\":\"xxx\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_closechannel_1","name":"intercomswap_ln_closechannel","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_closechannel\"}"},{"role":"assistant","content":"intercomswap_ln_closechannel completed successfully."}]}
{"id":"intercomswap_ln_closechannel__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_closechannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_closechannel","description":"Close a Lightning channel (cooperative by default) to return liquidity to on-chain BTC.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"Channel identifier. LND: funding_txid:output_index (channel_point). CLN: channel_id/short_channel_id/peer_id."},"force":{"type":"boolean","description":"Force-close (LND only). Default false (cooperative close)."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional close transaction feerate (sat/vB, LND only)."},"block":{"type":"boolean","description":"LND only: wait for close result synchronously."}},"required":["channel_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_closechannel with an expanded/edge argument set: {\"channel_id\":\"sample_value\",\"force\":true,\"sat_per_vbyte\":3334,\"block\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_closechannel_2","type":"function","function":{"name":"intercomswap_ln_closechannel","arguments":"{\"channel_id\":\"sample_value\",\"force\":true,\"sat_per_vbyte\":3334,\"block\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_closechannel_2","name":"intercomswap_ln_closechannel","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_closechannel\"}"},{"role":"assistant","content":"intercomswap_ln_closechannel succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_closechannel__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_closechannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_closechannel","description":"Close a Lightning channel (cooperative by default) to return liquidity to on-chain BTC.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"Channel identifier. LND: funding_txid:output_index (channel_point). CLN: channel_id/short_channel_id/peer_id."},"force":{"type":"boolean","description":"Force-close (LND only). Default false (cooperative close)."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional close transaction feerate (sat/vB, LND only)."},"block":{"type":"boolean","description":"LND only: wait for close result synchronously."}},"required":["channel_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_closechannel now with this valid argument set even if backend conditions may fail: {\"channel_id\":\"sample_value\",\"force\":true,\"sat_per_vbyte\":3334,\"block\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_closechannel_3","type":"function","function":{"name":"intercomswap_ln_closechannel","arguments":"{\"channel_id\":\"sample_value\",\"force\":true,\"sat_per_vbyte\":3334,\"block\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_closechannel_3","name":"intercomswap_ln_closechannel","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_closechannel failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_closechannel__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_closechannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_closechannel","description":"Close a Lightning channel (cooperative by default) to return liquidity to on-chain BTC.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"Channel identifier. LND: funding_txid:output_index (channel_point). CLN: channel_id/short_channel_id/peer_id."},"force":{"type":"boolean","description":"Force-close (LND only). Default false (cooperative close)."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional close transaction feerate (sat/vB, LND only)."},"block":{"type":"boolean","description":"LND only: wait for close result synchronously."}},"required":["channel_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_closechannel with these arguments: {\"channel_id\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_closechannel with that payload. channel_id must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_withdraw__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_ln_withdraw","description":"Send on-chain BTC from the LN node wallet to a BTC address.","parameters":{"type":"object","additionalProperties":false,"properties":{"address":{"type":"string","minLength":10,"maxLength":200,"description":"Destination BTC address (bech32 recommended)."},"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis to send."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for on-chain send."}},"required":["address","amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_withdraw with these arguments (minimal valid shape): {\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":300001}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_withdraw_1","type":"function","function":{"name":"intercomswap_ln_withdraw","arguments":"{\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":300001}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_withdraw_1","name":"intercomswap_ln_withdraw","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_withdraw\"}"},{"role":"assistant","content":"intercomswap_ln_withdraw completed successfully."}]}
{"id":"intercomswap_ln_withdraw__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_ln_withdraw","description":"Send on-chain BTC from the LN node wallet to a BTC address.","parameters":{"type":"object","additionalProperties":false,"properties":{"address":{"type":"string","minLength":10,"maxLength":200,"description":"Destination BTC address (bech32 recommended)."},"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis to send."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for on-chain send."}},"required":["address","amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_withdraw with an expanded/edge argument set: {\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":900000,\"sat_per_vbyte\":3334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_withdraw_2","type":"function","function":{"name":"intercomswap_ln_withdraw","arguments":"{\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":900000,\"sat_per_vbyte\":3334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_withdraw_2","name":"intercomswap_ln_withdraw","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_withdraw\"}"},{"role":"assistant","content":"intercomswap_ln_withdraw succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_withdraw__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_ln_withdraw","description":"Send on-chain BTC from the LN node wallet to a BTC address.","parameters":{"type":"object","additionalProperties":false,"properties":{"address":{"type":"string","minLength":10,"maxLength":200,"description":"Destination BTC address (bech32 recommended)."},"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis to send."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for on-chain send."}},"required":["address","amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_withdraw now with this valid argument set even if backend conditions may fail: {\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":900000,\"sat_per_vbyte\":3334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_withdraw_3","type":"function","function":{"name":"intercomswap_ln_withdraw","arguments":"{\"address\":\"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh\",\"amount_sats\":900000,\"sat_per_vbyte\":3334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_withdraw_3","name":"intercomswap_ln_withdraw","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_withdraw failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_withdraw__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_ln_withdraw","description":"Send on-chain BTC from the LN node wallet to a BTC address.","parameters":{"type":"object","additionalProperties":false,"properties":{"address":{"type":"string","minLength":10,"maxLength":200,"description":"Destination BTC address (bech32 recommended)."},"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis to send."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for on-chain send."}},"required":["address","amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_withdraw with these arguments: {\"address\":\"\",\"amount_sats\":300001}"},{"role":"assistant","content":"Cannot call intercomswap_ln_withdraw with that payload. address must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_connect__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_connect","tools":[{"type":"function","function":{"name":"intercomswap_ln_connect","description":"Connect to a Lightning peer (nodeid@host:port).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_connect with these arguments (minimal valid shape): {\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_connect_1","type":"function","function":{"name":"intercomswap_ln_connect","arguments":"{\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_connect_1","name":"intercomswap_ln_connect","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_connect\"}"},{"role":"assistant","content":"intercomswap_ln_connect completed successfully."}]}
{"id":"intercomswap_ln_connect__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_connect","tools":[{"type":"function","function":{"name":"intercomswap_ln_connect","description":"Connect to a Lightning peer (nodeid@host:port).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_connect with an expanded/edge argument set: {\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_connect_2","type":"function","function":{"name":"intercomswap_ln_connect","arguments":"{\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_connect_2","name":"intercomswap_ln_connect","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_connect\"}"},{"role":"assistant","content":"intercomswap_ln_connect succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_connect__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_connect","tools":[{"type":"function","function":{"name":"intercomswap_ln_connect","description":"Connect to a Lightning peer (nodeid@host:port).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_connect now with this valid argument set even if backend conditions may fail: {\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_connect_3","type":"function","function":{"name":"intercomswap_ln_connect","arguments":"{\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_connect_3","name":"intercomswap_ln_connect","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_connect failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_connect__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_connect","tools":[{"type":"function","function":{"name":"intercomswap_ln_connect","description":"Connect to a Lightning peer (nodeid@host:port).","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_connect with these arguments: {\"peer\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_connect with that payload. peer must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_peer_probe__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_peer_probe","tools":[{"type":"function","function":{"name":"intercomswap_ln_peer_probe","description":"Probe a Lightning peer (TCP reachability + LN connect state). Optionally attempts reconnect.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"},"tcp_timeout_ms":{"type":"integer","minimum":50,"maximum":10000,"description":"TCP probe timeout (default 800ms)."},"connect":{"type":"boolean","description":"If true, attempt intercomswap_ln_connect when disconnected and tcp probe is ok (default true)."}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_peer_probe with these arguments (minimal valid shape): {\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_peer_probe_1","type":"function","function":{"name":"intercomswap_ln_peer_probe","arguments":"{\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_peer_probe_1","name":"intercomswap_ln_peer_probe","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_peer_probe\"}"},{"role":"assistant","content":"intercomswap_ln_peer_probe completed successfully."}]}
{"id":"intercomswap_ln_peer_probe__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_peer_probe","tools":[{"type":"function","function":{"name":"intercomswap_ln_peer_probe","description":"Probe a Lightning peer (TCP reachability + LN connect state). Optionally attempts reconnect.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"},"tcp_timeout_ms":{"type":"integer","minimum":50,"maximum":10000,"description":"TCP probe timeout (default 800ms)."},"connect":{"type":"boolean","description":"If true, attempt intercomswap_ln_connect when disconnected and tcp probe is ok (default true)."}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_peer_probe with an expanded/edge argument set: {\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"tcp_timeout_ms\":10000,\"connect\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_peer_probe_2","type":"function","function":{"name":"intercomswap_ln_peer_probe","arguments":"{\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"tcp_timeout_ms\":10000,\"connect\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_peer_probe_2","name":"intercomswap_ln_peer_probe","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_peer_probe\"}"},{"role":"assistant","content":"intercomswap_ln_peer_probe succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_peer_probe__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_peer_probe","tools":[{"type":"function","function":{"name":"intercomswap_ln_peer_probe","description":"Probe a Lightning peer (TCP reachability + LN connect state). Optionally attempts reconnect.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"},"tcp_timeout_ms":{"type":"integer","minimum":50,"maximum":10000,"description":"TCP probe timeout (default 800ms)."},"connect":{"type":"boolean","description":"If true, attempt intercomswap_ln_connect when disconnected and tcp probe is ok (default true)."}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_peer_probe now with this valid argument set even if backend conditions may fail: {\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"tcp_timeout_ms\":10000,\"connect\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_peer_probe_3","type":"function","function":{"name":"intercomswap_ln_peer_probe","arguments":"{\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"tcp_timeout_ms\":10000,\"connect\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_peer_probe_3","name":"intercomswap_ln_peer_probe","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_peer_probe failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_peer_probe__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_peer_probe","tools":[{"type":"function","function":{"name":"intercomswap_ln_peer_probe","description":"Probe a Lightning peer (TCP reachability + LN connect state). Optionally attempts reconnect.","parameters":{"type":"object","additionalProperties":false,"properties":{"peer":{"type":"string","minLength":10,"maxLength":200,"description":"nodeid@host:port"},"tcp_timeout_ms":{"type":"integer","minimum":50,"maximum":10000,"description":"TCP probe timeout (default 800ms)."},"connect":{"type":"boolean","description":"If true, attempt intercomswap_ln_connect when disconnected and tcp probe is ok (default true)."}},"required":["peer"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_peer_probe with these arguments: {\"peer\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_peer_probe with that payload. peer must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_fundchannel__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_fundchannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_fundchannel","description":"Open a public Lightning channel to a peer.","parameters":{"type":"object","additionalProperties":false,"properties":{"node_id":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Remote node pubkey (hex33). Optional if peer is provided or exactly one peer is already connected."},"peer":{"type":"string","minLength":10,"maxLength":200,"description":"Optional nodeid@host:port. If node_id is omitted, the nodeid part is used."},"amount_sats":{"type":"integer","minimum":1000,"maximum":10000000000},"push_sats":{"type":"integer","minimum":0,"maximum":10000000000,"description":"Optional initial push amount (sats) to remote peer for immediate inbound on your side. Must be < amount_sats. LND only."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for the on-chain funding transaction."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_fundchannel with these arguments (minimal valid shape): {\"amount_sats\":300001,\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\",\"push_sats\":30000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_fundchannel_1","type":"function","function":{"name":"intercomswap_ln_fundchannel","arguments":"{\"amount_sats\":300001,\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\",\"push_sats\":30000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_fundchannel_1","name":"intercomswap_ln_fundchannel","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_fundchannel\"}"},{"role":"assistant","content":"intercomswap_ln_fundchannel completed successfully."}]}
{"id":"intercomswap_ln_fundchannel__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_fundchannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_fundchannel","description":"Open a public Lightning channel to a peer.","parameters":{"type":"object","additionalProperties":false,"properties":{"node_id":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Remote node pubkey (hex33). Optional if peer is provided or exactly one peer is already connected."},"peer":{"type":"string","minLength":10,"maxLength":200,"description":"Optional nodeid@host:port. If node_id is omitted, the nodeid part is used."},"amount_sats":{"type":"integer","minimum":1000,"maximum":10000000000},"push_sats":{"type":"integer","minimum":0,"maximum":10000000000,"description":"Optional initial push amount (sats) to remote peer for immediate inbound on your side. Must be < amount_sats. LND only."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for the on-chain funding transaction."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_fundchannel with an expanded/edge argument set: {\"node_id\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"amount_sats\":900000,\"push_sats\":150000,\"sat_per_vbyte\":3334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_fundchannel_2","type":"function","function":{"name":"intercomswap_ln_fundchannel","arguments":"{\"node_id\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"amount_sats\":900000,\"push_sats\":150000,\"sat_per_vbyte\":3334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_fundchannel_2","name":"intercomswap_ln_fundchannel","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_fundchannel\"}"},{"role":"assistant","content":"intercomswap_ln_fundchannel succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_fundchannel__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_fundchannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_fundchannel","description":"Open a public Lightning channel to a peer.","parameters":{"type":"object","additionalProperties":false,"properties":{"node_id":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Remote node pubkey (hex33). Optional if peer is provided or exactly one peer is already connected."},"peer":{"type":"string","minLength":10,"maxLength":200,"description":"Optional nodeid@host:port. If node_id is omitted, the nodeid part is used."},"amount_sats":{"type":"integer","minimum":1000,"maximum":10000000000},"push_sats":{"type":"integer","minimum":0,"maximum":10000000000,"description":"Optional initial push amount (sats) to remote peer for immediate inbound on your side. Must be < amount_sats. LND only."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for the on-chain funding transaction."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_fundchannel now with this valid argument set even if backend conditions may fail: {\"node_id\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"amount_sats\":900000,\"push_sats\":150000,\"sat_per_vbyte\":3334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_fundchannel_3","type":"function","function":{"name":"intercomswap_ln_fundchannel","arguments":"{\"node_id\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"peer\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@3.33.236.230:9735\",\"amount_sats\":900000,\"push_sats\":150000,\"sat_per_vbyte\":3334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_fundchannel_3","name":"intercomswap_ln_fundchannel","content":"{\"ok\":false,\"code\":\"LN_INSUFFICIENT_FUNDS\",\"error\":\"[lncli] rpc error: code = Unknown desc = funder balance too small (-962000) with fee=303 sat, minimum=708 sat required\"}"},{"role":"assistant","content":"intercomswap_ln_fundchannel failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_fundchannel__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_fundchannel","tools":[{"type":"function","function":{"name":"intercomswap_ln_fundchannel","description":"Open a public Lightning channel to a peer.","parameters":{"type":"object","additionalProperties":false,"properties":{"node_id":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Remote node pubkey (hex33). Optional if peer is provided or exactly one peer is already connected."},"peer":{"type":"string","minLength":10,"maxLength":200,"description":"Optional nodeid@host:port. If node_id is omitted, the nodeid part is used."},"amount_sats":{"type":"integer","minimum":1000,"maximum":10000000000},"push_sats":{"type":"integer","minimum":0,"maximum":10000000000,"description":"Optional initial push amount (sats) to remote peer for immediate inbound on your side. Must be < amount_sats. LND only."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional fee rate for the on-chain funding transaction."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_fundchannel with these arguments: {\"amount_sats\":\"not-a-number\",\"peer\":\"02aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@3.33.236.230:9735\",\"push_sats\":30000}"},{"role":"assistant","content":"Cannot call intercomswap_ln_fundchannel with that payload. amount_sats must be an integer. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_splice__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_splice","tools":[{"type":"function","function":{"name":"intercomswap_ln_splice","description":"Splice a Lightning channel in/out (CLN experimental splicing only). Use positive sats to add liquidity and negative sats to remove liquidity.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"CLN channel identifier (channel_id / short_channel_id)."},"relative_sats":{"type":"integer","minimum":-10000000000,"maximum":10000000000,"description":"Positive = splice in (add sats), negative = splice out (remove sats). Must be non-zero."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional target feerate for splice funding tx."},"max_rounds":{"type":"integer","minimum":1,"maximum":100,"description":"Max splice_update negotiation rounds (default 24)."},"sign_first":{"type":"boolean","description":"Optional splice_signed sign_first flag (advanced)."}},"required":["channel_id","relative_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_splice with these arguments (minimal valid shape): {\"channel_id\":\"xxx\",\"relative_sats\":-10000000000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_splice_1","type":"function","function":{"name":"intercomswap_ln_splice","arguments":"{\"channel_id\":\"xxx\",\"relative_sats\":-10000000000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_splice_1","name":"intercomswap_ln_splice","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_splice\"}"},{"role":"assistant","content":"intercomswap_ln_splice completed successfully."}]}
{"id":"intercomswap_ln_splice__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_splice","tools":[{"type":"function","function":{"name":"intercomswap_ln_splice","description":"Splice a Lightning channel in/out (CLN experimental splicing only). Use positive sats to add liquidity and negative sats to remove liquidity.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"CLN channel identifier (channel_id / short_channel_id)."},"relative_sats":{"type":"integer","minimum":-10000000000,"maximum":10000000000,"description":"Positive = splice in (add sats), negative = splice out (remove sats). Must be non-zero."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional target feerate for splice funding tx."},"max_rounds":{"type":"integer","minimum":1,"maximum":100,"description":"Max splice_update negotiation rounds (default 24)."},"sign_first":{"type":"boolean","description":"Optional splice_signed sign_first flag (advanced)."}},"required":["channel_id","relative_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_splice with an expanded/edge argument set: {\"channel_id\":\"sample_value\",\"relative_sats\":-3333333334,\"sat_per_vbyte\":3334,\"max_rounds\":34,\"sign_first\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_splice_2","type":"function","function":{"name":"intercomswap_ln_splice","arguments":"{\"channel_id\":\"sample_value\",\"relative_sats\":-3333333334,\"sat_per_vbyte\":3334,\"max_rounds\":34,\"sign_first\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_splice_2","name":"intercomswap_ln_splice","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_splice\"}"},{"role":"assistant","content":"intercomswap_ln_splice succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_splice__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_splice","tools":[{"type":"function","function":{"name":"intercomswap_ln_splice","description":"Splice a Lightning channel in/out (CLN experimental splicing only). Use positive sats to add liquidity and negative sats to remove liquidity.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"CLN channel identifier (channel_id / short_channel_id)."},"relative_sats":{"type":"integer","minimum":-10000000000,"maximum":10000000000,"description":"Positive = splice in (add sats), negative = splice out (remove sats). Must be non-zero."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional target feerate for splice funding tx."},"max_rounds":{"type":"integer","minimum":1,"maximum":100,"description":"Max splice_update negotiation rounds (default 24)."},"sign_first":{"type":"boolean","description":"Optional splice_signed sign_first flag (advanced)."}},"required":["channel_id","relative_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_splice now with this valid argument set even if backend conditions may fail: {\"channel_id\":\"sample_value\",\"relative_sats\":-3333333334,\"sat_per_vbyte\":3334,\"max_rounds\":34,\"sign_first\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_splice_3","type":"function","function":{"name":"intercomswap_ln_splice","arguments":"{\"channel_id\":\"sample_value\",\"relative_sats\":-3333333334,\"sat_per_vbyte\":3334,\"max_rounds\":34,\"sign_first\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_splice_3","name":"intercomswap_ln_splice","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_splice failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_splice__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_splice","tools":[{"type":"function","function":{"name":"intercomswap_ln_splice","description":"Splice a Lightning channel in/out (CLN experimental splicing only). Use positive sats to add liquidity and negative sats to remove liquidity.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel_id":{"type":"string","minLength":3,"maxLength":200,"description":"CLN channel identifier (channel_id / short_channel_id)."},"relative_sats":{"type":"integer","minimum":-10000000000,"maximum":10000000000,"description":"Positive = splice in (add sats), negative = splice out (remove sats). Must be non-zero."},"sat_per_vbyte":{"type":"integer","minimum":1,"maximum":10000,"description":"Optional target feerate for splice funding tx."},"max_rounds":{"type":"integer","minimum":1,"maximum":100,"description":"Max splice_update negotiation rounds (default 24)."},"sign_first":{"type":"boolean","description":"Optional splice_signed sign_first flag (advanced)."}},"required":["channel_id","relative_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_splice with these arguments: {\"channel_id\":\"\",\"relative_sats\":-10000000000}"},{"role":"assistant","content":"Cannot call intercomswap_ln_splice with that payload. channel_id must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_invoice_create__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_invoice_create","tools":[{"type":"function","function":{"name":"intercomswap_ln_invoice_create","description":"Create a standard BOLT11 invoice (no hodl invoices).","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_msat":{"type":"integer","minimum":1,"maximum":2100000000000000000},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["amount_msat","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_invoice_create with these arguments (minimal valid shape): {\"amount_msat\":1,\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_invoice_create_1","type":"function","function":{"name":"intercomswap_ln_invoice_create","arguments":"{\"amount_msat\":1,\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_invoice_create_1","name":"intercomswap_ln_invoice_create","content":"{\"ok\":true,\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"expires_at_unix\":1771003600}"},{"role":"assistant","content":"intercomswap_ln_invoice_create completed successfully."}]}
{"id":"intercomswap_ln_invoice_create__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_invoice_create","tools":[{"type":"function","function":{"name":"intercomswap_ln_invoice_create","description":"Create a standard BOLT11 invoice (no hodl invoices).","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_msat":{"type":"integer","minimum":1,"maximum":2100000000000000000},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["amount_msat","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_invoice_create with an expanded/edge argument set: {\"amount_msat\":700000000000000000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_invoice_create_2","type":"function","function":{"name":"intercomswap_ln_invoice_create","arguments":"{\"amount_msat\":700000000000000000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_invoice_create_2","name":"intercomswap_ln_invoice_create","content":"{\"ok\":true,\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"expires_at_unix\":1771003600}"},{"role":"assistant","content":"intercomswap_ln_invoice_create succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_invoice_create__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_invoice_create","tools":[{"type":"function","function":{"name":"intercomswap_ln_invoice_create","description":"Create a standard BOLT11 invoice (no hodl invoices).","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_msat":{"type":"integer","minimum":1,"maximum":2100000000000000000},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["amount_msat","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_invoice_create now with this valid argument set even if backend conditions may fail: {\"amount_msat\":700000000000000000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_invoice_create_3","type":"function","function":{"name":"intercomswap_ln_invoice_create","arguments":"{\"amount_msat\":700000000000000000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_invoice_create_3","name":"intercomswap_ln_invoice_create","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_invoice_create failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_invoice_create__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_invoice_create","tools":[{"type":"function","function":{"name":"intercomswap_ln_invoice_create","description":"Create a standard BOLT11 invoice (no hodl invoices).","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_msat":{"type":"integer","minimum":1,"maximum":2100000000000000000},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["amount_msat","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_invoice_create with these arguments: {\"amount_msat\":\"not-a-number\",\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_invoice_create with that payload. amount_msat must be an integer. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_decodepay__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_decodepay","tools":[{"type":"function","function":{"name":"intercomswap_ln_decodepay","description":"Decode a BOLT11 invoice offline.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_decodepay with these arguments (minimal valid shape): {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_decodepay_1","type":"function","function":{"name":"intercomswap_ln_decodepay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_decodepay_1","name":"intercomswap_ln_decodepay","content":"{\"ok\":true,\"destination\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"amount_sat\":1000,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"route_hints\":0}"},{"role":"assistant","content":"intercomswap_ln_decodepay completed successfully."}]}
{"id":"intercomswap_ln_decodepay__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_decodepay","tools":[{"type":"function","function":{"name":"intercomswap_ln_decodepay","description":"Decode a BOLT11 invoice offline.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_decodepay with an expanded/edge argument set: {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_decodepay_2","type":"function","function":{"name":"intercomswap_ln_decodepay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_decodepay_2","name":"intercomswap_ln_decodepay","content":"{\"ok\":true,\"destination\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"amount_sat\":1000,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"route_hints\":1}"},{"role":"assistant","content":"intercomswap_ln_decodepay succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_decodepay__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_decodepay","tools":[{"type":"function","function":{"name":"intercomswap_ln_decodepay","description":"Decode a BOLT11 invoice offline.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_decodepay now with this valid argument set even if backend conditions may fail: {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_decodepay_3","type":"function","function":{"name":"intercomswap_ln_decodepay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_decodepay_3","name":"intercomswap_ln_decodepay","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_decodepay failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_decodepay__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_decodepay","tools":[{"type":"function","function":{"name":"intercomswap_ln_decodepay","description":"Decode a BOLT11 invoice offline.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_decodepay with these arguments: {\"bolt11\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_decodepay with that payload. bolt11 must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_pay__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_pay","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay","description":"Pay a BOLT11 invoice.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay with these arguments (minimal valid shape): {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_1","type":"function","function":{"name":"intercomswap_ln_pay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_1","name":"intercomswap_ln_pay","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_pay completed successfully."}]}
{"id":"intercomswap_ln_pay__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_pay","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay","description":"Pay a BOLT11 invoice.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay with an expanded/edge argument set: {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_2","type":"function","function":{"name":"intercomswap_ln_pay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_2","name":"intercomswap_ln_pay","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_pay succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_pay__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_pay","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay","description":"Pay a BOLT11 invoice.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay now with this valid argument set even if backend conditions may fail: {\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_3","type":"function","function":{"name":"intercomswap_ln_pay","arguments":"{\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_3","name":"intercomswap_ln_pay","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_pay failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_pay__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_pay","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay","description":"Pay a BOLT11 invoice.","parameters":{"type":"object","additionalProperties":false,"properties":{"bolt11":{"type":"string","minLength":20,"maxLength":8000}},"required":["bolt11"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay with these arguments: {\"bolt11\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_pay with that payload. bolt11 must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_rebalance_selfpay__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_rebalance_selfpay","tools":[{"type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","description":"Best-effort inbound rebalance: create an invoice on this node and pay it from this same node. Works best with LND using allow_self_payment; routing outcome depends on available channels/routes.","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Amount to loop through Lightning (sats)."},"fee_limit_sat":{"type":"integer","minimum":0,"maximum":10000000,"description":"Optional max routing fee for the self-payment."},"outgoing_chan_id":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+$","description":"Optional LND-only outgoing chan_id pin (numeric)."},"last_hop_pubkey":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Optional LND-only last hop pubkey (hex33)."},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800,"description":"Optional invoice expiry."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_rebalance_selfpay with these arguments (minimal valid shape): {\"amount_sats\":300001}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_rebalance_selfpay_1","type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","arguments":"{\"amount_sats\":300001}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_rebalance_selfpay_1","name":"intercomswap_ln_rebalance_selfpay","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_rebalance_selfpay completed successfully."}]}
{"id":"intercomswap_ln_rebalance_selfpay__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_rebalance_selfpay","tools":[{"type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","description":"Best-effort inbound rebalance: create an invoice on this node and pay it from this same node. Works best with LND using allow_self_payment; routing outcome depends on available channels/routes.","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Amount to loop through Lightning (sats)."},"fee_limit_sat":{"type":"integer","minimum":0,"maximum":10000000,"description":"Optional max routing fee for the self-payment."},"outgoing_chan_id":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+$","description":"Optional LND-only outgoing chan_id pin (numeric)."},"last_hop_pubkey":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Optional LND-only last hop pubkey (hex33)."},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800,"description":"Optional invoice expiry."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_rebalance_selfpay with an expanded/edge argument set: {\"amount_sats\":900000,\"fee_limit_sat\":100,\"outgoing_chan_id\":\"42\",\"last_hop_pubkey\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_rebalance_selfpay_2","type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","arguments":"{\"amount_sats\":900000,\"fee_limit_sat\":100,\"outgoing_chan_id\":\"42\",\"last_hop_pubkey\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_rebalance_selfpay_2","name":"intercomswap_ln_rebalance_selfpay","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_rebalance_selfpay succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_rebalance_selfpay__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_rebalance_selfpay","tools":[{"type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","description":"Best-effort inbound rebalance: create an invoice on this node and pay it from this same node. Works best with LND using allow_self_payment; routing outcome depends on available channels/routes.","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Amount to loop through Lightning (sats)."},"fee_limit_sat":{"type":"integer","minimum":0,"maximum":10000000,"description":"Optional max routing fee for the self-payment."},"outgoing_chan_id":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+$","description":"Optional LND-only outgoing chan_id pin (numeric)."},"last_hop_pubkey":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Optional LND-only last hop pubkey (hex33)."},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800,"description":"Optional invoice expiry."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_rebalance_selfpay now with this valid argument set even if backend conditions may fail: {\"amount_sats\":900000,\"fee_limit_sat\":100,\"outgoing_chan_id\":\"42\",\"last_hop_pubkey\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_rebalance_selfpay_3","type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","arguments":"{\"amount_sats\":900000,\"fee_limit_sat\":100,\"outgoing_chan_id\":\"42\",\"last_hop_pubkey\":\"03bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_rebalance_selfpay_3","name":"intercomswap_ln_rebalance_selfpay","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_rebalance_selfpay failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_rebalance_selfpay__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_rebalance_selfpay","tools":[{"type":"function","function":{"name":"intercomswap_ln_rebalance_selfpay","description":"Best-effort inbound rebalance: create an invoice on this node and pay it from this same node. Works best with LND using allow_self_payment; routing outcome depends on available channels/routes.","parameters":{"type":"object","additionalProperties":false,"properties":{"amount_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Amount to loop through Lightning (sats)."},"fee_limit_sat":{"type":"integer","minimum":0,"maximum":10000000,"description":"Optional max routing fee for the self-payment."},"outgoing_chan_id":{"type":"string","minLength":1,"maxLength":32,"pattern":"^[0-9]+$","description":"Optional LND-only outgoing chan_id pin (numeric)."},"last_hop_pubkey":{"type":"string","minLength":66,"maxLength":66,"pattern":"^[0-9a-fA-F]{66}$","description":"Optional LND-only last hop pubkey (hex33)."},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800,"description":"Optional invoice expiry."}},"required":["amount_sats"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_rebalance_selfpay with these arguments: {\"amount_sats\":\"not-a-number\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_rebalance_selfpay with that payload. amount_sats must be an integer. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_pay_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_pay_status","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay_status","description":"Query payment status by payment_hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay_status with these arguments (minimal valid shape): {\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_status_1","type":"function","function":{"name":"intercomswap_ln_pay_status","arguments":"{\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_status_1","name":"intercomswap_ln_pay_status","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_pay_status completed successfully."}]}
{"id":"intercomswap_ln_pay_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_pay_status","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay_status","description":"Query payment status by payment_hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay_status with an expanded/edge argument set: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_status_2","type":"function","function":{"name":"intercomswap_ln_pay_status","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_status_2","name":"intercomswap_ln_pay_status","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_ln_pay_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_pay_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_pay_status","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay_status","description":"Query payment status by payment_hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay_status now with this valid argument set even if backend conditions may fail: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_pay_status_3","type":"function","function":{"name":"intercomswap_ln_pay_status","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_pay_status_3","name":"intercomswap_ln_pay_status","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_pay_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_pay_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_pay_status","tools":[{"type":"function","function":{"name":"intercomswap_ln_pay_status","description":"Query payment status by payment_hash.","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_pay_status with these arguments: {\"payment_hash_hex\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_pay_status with that payload. payment_hash_hex must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_ln_preimage_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_ln_preimage_get","tools":[{"type":"function","function":{"name":"intercomswap_ln_preimage_get","description":"Get a payment preimage by payment_hash (for recovery).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_preimage_get with these arguments (minimal valid shape): {\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_preimage_get_1","type":"function","function":{"name":"intercomswap_ln_preimage_get","arguments":"{\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_preimage_get_1","name":"intercomswap_ln_preimage_get","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_preimage_get\"}"},{"role":"assistant","content":"intercomswap_ln_preimage_get completed successfully."}]}
{"id":"intercomswap_ln_preimage_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_ln_preimage_get","tools":[{"type":"function","function":{"name":"intercomswap_ln_preimage_get","description":"Get a payment preimage by payment_hash (for recovery).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_preimage_get with an expanded/edge argument set: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_preimage_get_2","type":"function","function":{"name":"intercomswap_ln_preimage_get","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_preimage_get_2","name":"intercomswap_ln_preimage_get","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"ln_preimage_get\"}"},{"role":"assistant","content":"intercomswap_ln_preimage_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_ln_preimage_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_ln_preimage_get","tools":[{"type":"function","function":{"name":"intercomswap_ln_preimage_get","description":"Get a payment preimage by payment_hash (for recovery).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_preimage_get now with this valid argument set even if backend conditions may fail: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_ln_preimage_get_3","type":"function","function":{"name":"intercomswap_ln_preimage_get","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_ln_preimage_get_3","name":"intercomswap_ln_preimage_get","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_ln_preimage_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_ln_preimage_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_ln_preimage_get","tools":[{"type":"function","function":{"name":"intercomswap_ln_preimage_get","description":"Get a payment preimage by payment_hash (for recovery).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_ln_preimage_get with these arguments: {\"payment_hash_hex\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_ln_preimage_get with that payload. payment_hash_hex must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_ln_invoice_create_and_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_ln_invoice_create_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","description":"Maker: create an LN invoice and post LN_INVOICE into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["channel","trade_id","btc_sats","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_invoice_create_and_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_invoice_create_and_post_1","type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_invoice_create_and_post_1","name":"intercomswap_swap_ln_invoice_create_and_post","content":"{\"ok\":true,\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"expires_at_unix\":1771003600}"},{"role":"assistant","content":"intercomswap_swap_ln_invoice_create_and_post completed successfully."}]}
{"id":"intercomswap_swap_ln_invoice_create_and_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_ln_invoice_create_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","description":"Maker: create an LN invoice and post LN_INVOICE into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["channel","trade_id","btc_sats","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_invoice_create_and_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_invoice_create_and_post_2","type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_invoice_create_and_post_2","name":"intercomswap_swap_ln_invoice_create_and_post","content":"{\"ok\":true,\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"expires_at_unix\":1771003600}"},{"role":"assistant","content":"intercomswap_swap_ln_invoice_create_and_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_ln_invoice_create_and_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_ln_invoice_create_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","description":"Maker: create an LN invoice and post LN_INVOICE into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["channel","trade_id","btc_sats","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_invoice_create_and_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_invoice_create_and_post_3","type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"btc_sats\":250000,\"label\":\"swap-invoice-002\",\"description\":\"USDT<->BTC trade settlement invoice\",\"expiry_sec\":201640}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_invoice_create_and_post_3","name":"intercomswap_swap_ln_invoice_create_and_post","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_swap_ln_invoice_create_and_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_ln_invoice_create_and_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_ln_invoice_create_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_invoice_create_and_post","description":"Maker: create an LN invoice and post LN_INVOICE into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"btc_sats":{"type":"integer","minimum":1,"maximum":2100000000000000,"description":"Satoshis"},"label":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","minLength":1,"maxLength":500},"expiry_sec":{"type":"integer","minimum":60,"maximum":604800}},"required":["channel","trade_id","btc_sats","label","description"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_invoice_create_and_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"btc_sats\":1000,\"label\":\"swap-invoice-001\",\"description\":\"BTC swap settlement invoice\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_ln_invoice_create_and_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_sol_escrow_init_and_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_sol_escrow_init_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","description":"Maker: init Solana escrow and post SOL_ESCROW_CREATED into swap:<id>. Requires taker to post ln_route_precheck_ok (swap.status) after LN invoice is posted. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["channel","trade_id","payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_escrow_init_and_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_escrow_init_and_post_1","type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_escrow_init_and_post_1","name":"intercomswap_swap_sol_escrow_init_and_post","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_swap_sol_escrow_init_and_post completed successfully."}]}
{"id":"intercomswap_swap_sol_escrow_init_and_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_sol_escrow_init_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","description":"Maker: init Solana escrow and post SOL_ESCROW_CREATED into swap:<id>. Requires taker to post ln_route_precheck_ok (swap.status) after LN invoice is posted. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["channel","trade_id","payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_escrow_init_and_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_escrow_init_and_post_2","type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_escrow_init_and_post_2","name":"intercomswap_swap_sol_escrow_init_and_post","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_swap_sol_escrow_init_and_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_sol_escrow_init_and_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_sol_escrow_init_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","description":"Maker: init Solana escrow and post SOL_ESCROW_CREATED into swap:<id>. Requires taker to post ln_route_precheck_ok (swap.status) after LN invoice is posted. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["channel","trade_id","payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_escrow_init_and_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_escrow_init_and_post_3","type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_escrow_init_and_post_3","name":"intercomswap_swap_sol_escrow_init_and_post","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_swap_sol_escrow_init_and_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_sol_escrow_init_and_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_sol_escrow_init_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_escrow_init_and_post","description":"Maker: init Solana escrow and post SOL_ESCROW_CREATED into swap:<id>. Requires taker to post ln_route_precheck_ok (swap.status) after LN invoice is posted. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["channel","trade_id","payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_escrow_init_and_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_sol_escrow_init_and_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_verify_pre_pay__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_verify_pre_pay","tools":[{"type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","description":"Taker: verify (terms + LN invoice + Sol escrow) and validate the escrow exists on-chain before paying.","parameters":{"type":"object","additionalProperties":false,"properties":{"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_verify_pre_pay with these arguments (minimal valid shape): {\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_verify_pre_pay_1","type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","arguments":"{\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_verify_pre_pay_1","name":"intercomswap_swap_verify_pre_pay","content":"{\"ok\":true,\"tool\":\"intercomswap_swap_verify_pre_pay\",\"result\":\"ok\"}"},{"role":"assistant","content":"intercomswap_swap_verify_pre_pay completed successfully."}]}
{"id":"intercomswap_swap_verify_pre_pay__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_verify_pre_pay","tools":[{"type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","description":"Taker: verify (terms + LN invoice + Sol escrow) and validate the escrow exists on-chain before paying.","parameters":{"type":"object","additionalProperties":false,"properties":{"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_verify_pre_pay with an expanded/edge argument set: {\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_verify_pre_pay_2","type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","arguments":"{\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_verify_pre_pay_2","name":"intercomswap_swap_verify_pre_pay","content":"{\"ok\":true,\"tool\":\"intercomswap_swap_verify_pre_pay\",\"result\":\"ok\"}"},{"role":"assistant","content":"intercomswap_swap_verify_pre_pay succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_verify_pre_pay__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_verify_pre_pay","tools":[{"type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","description":"Taker: verify (terms + LN invoice + Sol escrow) and validate the escrow exists on-chain before paying.","parameters":{"type":"object","additionalProperties":false,"properties":{"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_verify_pre_pay now with this valid argument set even if backend conditions may fail: {\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_verify_pre_pay_3","type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","arguments":"{\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_verify_pre_pay_3","name":"intercomswap_swap_verify_pre_pay","content":"{\"ok\":false,\"code\":\"RUNTIME_ERROR\",\"error\":\"intercomswap_swap_verify_pre_pay failed due to backend/runtime error\"}"},{"role":"assistant","content":"intercomswap_swap_verify_pre_pay failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_verify_pre_pay__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_verify_pre_pay","tools":[{"type":"function","function":{"name":"intercomswap_swap_verify_pre_pay","description":"Taker: verify (terms + LN invoice + Sol escrow) and validate the escrow exists on-chain before paying.","parameters":{"type":"object","additionalProperties":false,"properties":{"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_verify_pre_pay with these arguments: {\"terms_envelope\":12345,\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_verify_pre_pay with that payload. terms_envelope must match one of the supported shapes. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_ln_route_precheck_from_terms_invoice__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","description":"Taker: decode invoice and run LN route/liquidity precheck from signed TERMS + LN_INVOICE before maker escrow is created.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","terms_envelope","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_route_precheck_from_terms_invoice with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_1","type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_1","name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"swap_ln_route_precheck_from_terms_invoice\"}"},{"role":"assistant","content":"intercomswap_swap_ln_route_precheck_from_terms_invoice completed successfully."}]}
{"id":"intercomswap_swap_ln_route_precheck_from_terms_invoice__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","description":"Taker: decode invoice and run LN route/liquidity precheck from signed TERMS + LN_INVOICE before maker escrow is created.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","terms_envelope","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_route_precheck_from_terms_invoice with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_2","type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_2","name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","content":"{\"ok\":true,\"impl\":\"lnd\",\"backend\":\"cli\",\"result\":\"swap_ln_route_precheck_from_terms_invoice\"}"},{"role":"assistant","content":"intercomswap_swap_ln_route_precheck_from_terms_invoice succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_ln_route_precheck_from_terms_invoice__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","description":"Taker: decode invoice and run LN route/liquidity precheck from signed TERMS + LN_INVOICE before maker escrow is created.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","terms_envelope","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_route_precheck_from_terms_invoice now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_3","type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_route_precheck_from_terms_invoice_3","name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_swap_ln_route_precheck_from_terms_invoice failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_ln_route_precheck_from_terms_invoice__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_route_precheck_from_terms_invoice","description":"Taker: decode invoice and run LN route/liquidity precheck from signed TERMS + LN_INVOICE before maker escrow is created.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","terms_envelope","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_route_precheck_from_terms_invoice with these arguments: {\"channel\":\"\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_ln_route_precheck_from_terms_invoice with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_ln_pay_and_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_ln_pay_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","description":"Taker: pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"bolt11":{"type":"string","minLength":20,"maxLength":8000},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","bolt11","payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_1","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_1","name":"intercomswap_swap_ln_pay_and_post","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post completed successfully."}]}
{"id":"intercomswap_swap_ln_pay_and_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_ln_pay_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","description":"Taker: pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"bolt11":{"type":"string","minLength":20,"maxLength":8000},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","bolt11","payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_2","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_2","name":"intercomswap_swap_ln_pay_and_post","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_ln_pay_and_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_ln_pay_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","description":"Taker: pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"bolt11":{"type":"string","minLength":20,"maxLength":8000},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","bolt11","payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_3","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_3","name":"intercomswap_swap_ln_pay_and_post","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_ln_pay_and_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_ln_pay_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post","description":"Taker: pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"bolt11":{"type":"string","minLength":20,"maxLength":8000},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"}},"required":["channel","trade_id","bolt11","payment_hash_hex"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"bolt11\":\"lnbc10u1p5ce630pp5gglk6e39yfc625szvf6r0f68pthe2u5gxyk32qagrhurfnpx4ycqdygwfn8zttjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmy95cnwdes8q6ryd3hxycnzdpqf9h8getjvdhk6grnwashqgrjvecj6vfhxucrsdpjxyurzde5xqkkzde4vyunscmycqzzsxqrrsssp5fumz3pfmg3r9w5f4tgc6ey3k2tlleyys0cgneygh4x8fx5462s4s9qxpqysgqanr2qws7jwl8plyveue9h8jec7q08580xys2u3tcrjzewuxh40z3lp9m5ysg9gv2430k82q4kdpqc3t2yfwmtglq3k3u9363gm9u37qqypaxzl\",\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_ln_pay_and_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_ln_pay_and_post_from_invoice__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_ln_pay_and_post_from_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","description":"Taker: pay an LN invoice from an LN_INVOICE envelope and post LN_PAID into swap:<id> (no manual bolt11/payment_hash copying).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_from_invoice with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_1","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_1","name":"intercomswap_swap_ln_pay_and_post_from_invoice","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_from_invoice completed successfully."}]}
{"id":"intercomswap_swap_ln_pay_and_post_from_invoice__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_ln_pay_and_post_from_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","description":"Taker: pay an LN invoice from an LN_INVOICE envelope and post LN_PAID into swap:<id> (no manual bolt11/payment_hash copying).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_from_invoice with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_2","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_2","name":"intercomswap_swap_ln_pay_and_post_from_invoice","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_from_invoice succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_ln_pay_and_post_from_invoice__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_ln_pay_and_post_from_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","description":"Taker: pay an LN invoice from an LN_INVOICE envelope and post LN_PAID into swap:<id> (no manual bolt11/payment_hash copying).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_from_invoice now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_3","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}}}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_from_invoice_3","name":"intercomswap_swap_ln_pay_and_post_from_invoice","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_from_invoice failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_ln_pay_and_post_from_invoice__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_ln_pay_and_post_from_invoice","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_from_invoice","description":"Taker: pay an LN invoice from an LN_INVOICE envelope and post LN_PAID into swap:<id> (no manual bolt11/payment_hash copying).","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]}},"required":["channel","invoice_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_from_invoice with these arguments: {\"channel\":\"\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_ln_pay_and_post_from_invoice with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_ln_pay_and_post_verified__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_ln_pay_and_post_verified","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","description":"Taker: verify (terms + invoice + escrow on-chain), then pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["channel","terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_verified with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_verified_1","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_verified_1","name":"intercomswap_swap_ln_pay_and_post_verified","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":1,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_verified completed successfully."}]}
{"id":"intercomswap_swap_ln_pay_and_post_verified__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_ln_pay_and_post_verified","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","description":"Taker: verify (terms + invoice + escrow on-chain), then pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["channel","terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_verified with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_verified_2","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_verified_2","name":"intercomswap_swap_ln_pay_and_post_verified","content":"{\"ok\":true,\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"status\":\"SUCCEEDED\",\"fee_sat\":2,\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_verified succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_ln_pay_and_post_verified__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_ln_pay_and_post_verified","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","description":"Taker: verify (terms + invoice + escrow on-chain), then pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["channel","terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_verified now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_ln_pay_and_post_verified_3","type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"terms_envelope\":{\"kind\":\"swap.terms\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"invoice_envelope\":{\"kind\":\"swap.ln_invoice\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"escrow_envelope\":{\"kind\":\"swap.sol_escrow_created\",\"id\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payload\":{\"sample\":true}},\"now_unix\":334}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_ln_pay_and_post_verified_3","name":"intercomswap_swap_ln_pay_and_post_verified","content":"{\"ok\":false,\"code\":\"LN_NO_ROUTE\",\"error\":\"[lncli] FAILED: {\\\"status\\\":\\\"FAILED\\\",\\\"failure_reason\\\":\\\"FAILURE_REASON_NO_ROUTE\\\"} (NO_ROUTE from node; check inbound/outbound and peer topology)\"}"},{"role":"assistant","content":"intercomswap_swap_ln_pay_and_post_verified failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_ln_pay_and_post_verified__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_ln_pay_and_post_verified","tools":[{"type":"function","function":{"name":"intercomswap_swap_ln_pay_and_post_verified","description":"Taker: verify (terms + invoice + escrow on-chain), then pay the LN invoice and post LN_PAID into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"terms_envelope":{"anyOf":[{"type":"object","description":"Full signed TERMS envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a TERMS envelope."}]},"invoice_envelope":{"anyOf":[{"type":"object","description":"Full signed LN_INVOICE envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to an LN_INVOICE envelope."}]},"escrow_envelope":{"anyOf":[{"type":"object","description":"Full signed SOL_ESCROW_CREATED envelope received from the network."},{"type":"string","pattern":"^secret:[0-9a-fA-F-]{10,}$","description":"Secret handle to a SOL_ESCROW_CREATED envelope."}]},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds for expiry checks; defaults to now."}},"required":["channel","terms_envelope","invoice_envelope","escrow_envelope"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_ln_pay_and_post_verified with these arguments: {\"channel\":\"\",\"terms_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"invoice_envelope\":\"secret:6c8b1179-0a1b-4d2f\",\"escrow_envelope\":\"secret:6c8b1179-0a1b-4d2f\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_ln_pay_and_post_verified with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swap_sol_claim_and_post__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swap_sol_claim_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","description":"Taker: claim Solana escrow and post SOL_CLAIMED into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}]},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["channel","trade_id","preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_claim_and_post with these arguments (minimal valid shape): {\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"preimage_hex\":\"secret:6c8b1179-0a1b-4d2f\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_claim_and_post_1","type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","arguments":"{\"channel\":\"0000intercomswapbtcusdt\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"preimage_hex\":\"secret:6c8b1179-0a1b-4d2f\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_claim_and_post_1","name":"intercomswap_swap_sol_claim_and_post","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_swap_sol_claim_and_post completed successfully."}]}
{"id":"intercomswap_swap_sol_claim_and_post__success_variant","scenario":"success_variant","tool_name":"intercomswap_swap_sol_claim_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","description":"Taker: claim Solana escrow and post SOL_CLAIMED into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}]},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["channel","trade_id","preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_claim_and_post with an expanded/edge argument set: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_claim_and_post_2","type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_claim_and_post_2","name":"intercomswap_swap_sol_claim_and_post","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_swap_sol_claim_and_post succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swap_sol_claim_and_post__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swap_sol_claim_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","description":"Taker: claim Solana escrow and post SOL_CLAIMED into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}]},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["channel","trade_id","preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_claim_and_post now with this valid argument set even if backend conditions may fail: {\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swap_sol_claim_and_post_3","type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","arguments":"{\"channel\":\"swap:rfq-1771000000-a1b2c3d4\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swap_sol_claim_and_post_3","name":"intercomswap_swap_sol_claim_and_post","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_swap_sol_claim_and_post failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swap_sol_claim_and_post__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swap_sol_claim_and_post","tools":[{"type":"function","function":{"name":"intercomswap_swap_sol_claim_and_post","description":"Taker: claim Solana escrow and post SOL_CLAIMED into swap:<id>.","parameters":{"type":"object","additionalProperties":false,"properties":{"channel":{"type":"string","minLength":1,"maxLength":128,"description":"Sidechannel name (e.g. 0000intercomswapbtcusdt or swap:<id>)"},"trade_id":{"type":"string","minLength":1,"maxLength":128},"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}]},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["channel","trade_id","preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swap_sol_claim_and_post with these arguments: {\"channel\":\"\",\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"preimage_hex\":\"secret:6c8b1179-0a1b-4d2f\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_swap_sol_claim_and_post with that payload. channel must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_local_status__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_local_status","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_status","description":"Local-only: show whether a solana-test-validator RPC is listening on the configured localhost port (and whether it was started by this repo).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_status with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_status_1","type":"function","function":{"name":"intercomswap_sol_local_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_status_1","name":"intercomswap_sol_local_status","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_status completed successfully."}]}
{"id":"intercomswap_sol_local_status__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_local_status","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_status","description":"Local-only: show whether a solana-test-validator RPC is listening on the configured localhost port (and whether it was started by this repo).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_status with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_status_2","type":"function","function":{"name":"intercomswap_sol_local_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_status_2","name":"intercomswap_sol_local_status","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_status succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_local_status__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_local_status","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_status","description":"Local-only: show whether a solana-test-validator RPC is listening on the configured localhost port (and whether it was started by this repo).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_status now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_status_3","type":"function","function":{"name":"intercomswap_sol_local_status","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_status_3","name":"intercomswap_sol_local_status","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_local_status failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_local_status__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_local_status","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_status","description":"Local-only: show whether a solana-test-validator RPC is listening on the configured localhost port (and whether it was started by this repo).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_status with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sol_local_status with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_local_start__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_local_start","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_start","description":"Local-only: start solana-test-validator with the escrow program loaded (writes ledger/logs under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"rpc_port":{"type":"integer","minimum":1,"maximum":65535,"description":"RPC port (default: from solana.rpc_url or 8899)."},"faucet_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Faucet port (default: 9900)."},"ledger_dir":{"type":"string","minLength":1,"maxLength":400,"description":"Ledger dir (must be under onchain/)."},"so_path":{"type":"string","minLength":1,"maxLength":400,"description":"Program .so path (must be within repo root)."},"program_id":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Program id to load (default: shared LN_USDT_ESCROW_PROGRAM_ID)."},"reset":{"type":"boolean","description":"Reset ledger (default false)."},"quiet":{"type":"boolean","description":"Quiet logs (default true)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for RPC port to be ready (default 60000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_start with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_start_1","type":"function","function":{"name":"intercomswap_sol_local_start","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_start_1","name":"intercomswap_sol_local_start","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_start completed successfully."}]}
{"id":"intercomswap_sol_local_start__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_local_start","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_start","description":"Local-only: start solana-test-validator with the escrow program loaded (writes ledger/logs under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"rpc_port":{"type":"integer","minimum":1,"maximum":65535,"description":"RPC port (default: from solana.rpc_url or 8899)."},"faucet_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Faucet port (default: 9900)."},"ledger_dir":{"type":"string","minLength":1,"maxLength":400,"description":"Ledger dir (must be under onchain/)."},"so_path":{"type":"string","minLength":1,"maxLength":400,"description":"Program .so path (must be within repo root)."},"program_id":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Program id to load (default: shared LN_USDT_ESCROW_PROGRAM_ID)."},"reset":{"type":"boolean","description":"Reset ledger (default false)."},"quiet":{"type":"boolean","description":"Quiet logs (default true)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for RPC port to be ready (default 60000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_start with an expanded/edge argument set: {\"rpc_port\":8899,\"faucet_port\":9900,\"ledger_dir\":\"onchain/solana/ledger\",\"so_path\":\"onchain/solana/ln_usdt_escrow.so\",\"program_id\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"reset\":true,\"quiet\":true,\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_start_2","type":"function","function":{"name":"intercomswap_sol_local_start","arguments":"{\"rpc_port\":8899,\"faucet_port\":9900,\"ledger_dir\":\"onchain/solana/ledger\",\"so_path\":\"onchain/solana/ln_usdt_escrow.so\",\"program_id\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"reset\":true,\"quiet\":true,\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_start_2","name":"intercomswap_sol_local_start","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_start succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_local_start__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_local_start","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_start","description":"Local-only: start solana-test-validator with the escrow program loaded (writes ledger/logs under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"rpc_port":{"type":"integer","minimum":1,"maximum":65535,"description":"RPC port (default: from solana.rpc_url or 8899)."},"faucet_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Faucet port (default: 9900)."},"ledger_dir":{"type":"string","minLength":1,"maxLength":400,"description":"Ledger dir (must be under onchain/)."},"so_path":{"type":"string","minLength":1,"maxLength":400,"description":"Program .so path (must be within repo root)."},"program_id":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Program id to load (default: shared LN_USDT_ESCROW_PROGRAM_ID)."},"reset":{"type":"boolean","description":"Reset ledger (default false)."},"quiet":{"type":"boolean","description":"Quiet logs (default true)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for RPC port to be ready (default 60000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_start now with this valid argument set even if backend conditions may fail: {\"rpc_port\":8899,\"faucet_port\":9900,\"ledger_dir\":\"onchain/solana/ledger\",\"so_path\":\"onchain/solana/ln_usdt_escrow.so\",\"program_id\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"reset\":true,\"quiet\":true,\"ready_timeout_ms\":60000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_start_3","type":"function","function":{"name":"intercomswap_sol_local_start","arguments":"{\"rpc_port\":8899,\"faucet_port\":9900,\"ledger_dir\":\"onchain/solana/ledger\",\"so_path\":\"onchain/solana/ln_usdt_escrow.so\",\"program_id\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"reset\":true,\"quiet\":true,\"ready_timeout_ms\":60000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_start_3","name":"intercomswap_sol_local_start","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_local_start failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_local_start__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_local_start","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_start","description":"Local-only: start solana-test-validator with the escrow program loaded (writes ledger/logs under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"rpc_port":{"type":"integer","minimum":1,"maximum":65535,"description":"RPC port (default: from solana.rpc_url or 8899)."},"faucet_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Faucet port (default: 9900)."},"ledger_dir":{"type":"string","minLength":1,"maxLength":400,"description":"Ledger dir (must be under onchain/)."},"so_path":{"type":"string","minLength":1,"maxLength":400,"description":"Program .so path (must be within repo root)."},"program_id":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Program id to load (default: shared LN_USDT_ESCROW_PROGRAM_ID)."},"reset":{"type":"boolean","description":"Reset ledger (default false)."},"quiet":{"type":"boolean","description":"Quiet logs (default true)."},"ready_timeout_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for RPC port to be ready (default 60000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_start with these arguments: {\"rpc_port\":\"not-a-number\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_local_start with that payload. rpc_port must be an integer. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_local_stop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_local_stop","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_stop","description":"Local-only: stop the managed solana-test-validator process.","parameters":{"type":"object","additionalProperties":false,"properties":{"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGINT|SIGTERM|SIGKILL (default SIGINT)."},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for exit (default 5000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_stop with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_stop_1","type":"function","function":{"name":"intercomswap_sol_local_stop","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_stop_1","name":"intercomswap_sol_local_stop","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_stop completed successfully."}]}
{"id":"intercomswap_sol_local_stop__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_local_stop","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_stop","description":"Local-only: stop the managed solana-test-validator process.","parameters":{"type":"object","additionalProperties":false,"properties":{"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGINT|SIGTERM|SIGKILL (default SIGINT)."},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for exit (default 5000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_stop with an expanded/edge argument set: {\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_stop_2","type":"function","function":{"name":"intercomswap_sol_local_stop","arguments":"{\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_stop_2","name":"intercomswap_sol_local_stop","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_local_stop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_local_stop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_local_stop","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_stop","description":"Local-only: stop the managed solana-test-validator process.","parameters":{"type":"object","additionalProperties":false,"properties":{"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGINT|SIGTERM|SIGKILL (default SIGINT)."},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for exit (default 5000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_stop now with this valid argument set even if backend conditions may fail: {\"signal\":\"SIGINT\",\"wait_ms\":5000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_local_stop_3","type":"function","function":{"name":"intercomswap_sol_local_stop","arguments":"{\"signal\":\"SIGINT\",\"wait_ms\":5000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_local_stop_3","name":"intercomswap_sol_local_stop","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_local_stop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_local_stop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_local_stop","tools":[{"type":"function","function":{"name":"intercomswap_sol_local_stop","description":"Local-only: stop the managed solana-test-validator process.","parameters":{"type":"object","additionalProperties":false,"properties":{"signal":{"type":"string","minLength":3,"maxLength":10,"description":"SIGINT|SIGTERM|SIGKILL (default SIGINT)."},"wait_ms":{"type":"integer","minimum":0,"maximum":120000,"description":"Wait for exit (default 5000)."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_local_stop with these arguments: {\"signal\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_local_stop with that payload. signal must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_signer_pubkey__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_signer_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_signer_pubkey","description":"Get the configured Solana signer pubkey for this promptd instance.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_signer_pubkey with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_signer_pubkey_1","type":"function","function":{"name":"intercomswap_sol_signer_pubkey","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_signer_pubkey_1","name":"intercomswap_sol_signer_pubkey","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_signer_pubkey completed successfully."}]}
{"id":"intercomswap_sol_signer_pubkey__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_signer_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_signer_pubkey","description":"Get the configured Solana signer pubkey for this promptd instance.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_signer_pubkey with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_signer_pubkey_2","type":"function","function":{"name":"intercomswap_sol_signer_pubkey","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_signer_pubkey_2","name":"intercomswap_sol_signer_pubkey","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_signer_pubkey succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_signer_pubkey__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_signer_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_signer_pubkey","description":"Get the configured Solana signer pubkey for this promptd instance.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_signer_pubkey now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_signer_pubkey_3","type":"function","function":{"name":"intercomswap_sol_signer_pubkey","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_signer_pubkey_3","name":"intercomswap_sol_signer_pubkey","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_signer_pubkey failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_signer_pubkey__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_signer_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_signer_pubkey","description":"Get the configured Solana signer pubkey for this promptd instance.","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_signer_pubkey with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sol_signer_pubkey with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_keygen__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_keygen","tools":[{"type":"function","function":{"name":"intercomswap_sol_keygen","description":"Generate a new Solana keypair JSON file under onchain/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"out":{"type":"string","minLength":1,"maxLength":400,"description":"Output path (must be under onchain/)."},"seed_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$","description":"Optional 32-byte hex seed for deterministic keygen."},"overwrite":{"type":"boolean","description":"Allow overwriting an existing file (default false)."}},"required":["out"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keygen with these arguments (minimal valid shape): {\"out\":\"onchain/solana/keys/new-signer.json\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keygen_1","type":"function","function":{"name":"intercomswap_sol_keygen","arguments":"{\"out\":\"onchain/solana/keys/new-signer.json\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keygen_1","name":"intercomswap_sol_keygen","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_keygen completed successfully."}]}
{"id":"intercomswap_sol_keygen__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_keygen","tools":[{"type":"function","function":{"name":"intercomswap_sol_keygen","description":"Generate a new Solana keypair JSON file under onchain/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"out":{"type":"string","minLength":1,"maxLength":400,"description":"Output path (must be under onchain/)."},"seed_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$","description":"Optional 32-byte hex seed for deterministic keygen."},"overwrite":{"type":"boolean","description":"Allow overwriting an existing file (default false)."}},"required":["out"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keygen with an expanded/edge argument set: {\"out\":\"onchain/solana/keys/new-signer-2.json\",\"seed_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"overwrite\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keygen_2","type":"function","function":{"name":"intercomswap_sol_keygen","arguments":"{\"out\":\"onchain/solana/keys/new-signer-2.json\",\"seed_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"overwrite\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keygen_2","name":"intercomswap_sol_keygen","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_keygen succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_keygen__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_keygen","tools":[{"type":"function","function":{"name":"intercomswap_sol_keygen","description":"Generate a new Solana keypair JSON file under onchain/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"out":{"type":"string","minLength":1,"maxLength":400,"description":"Output path (must be under onchain/)."},"seed_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$","description":"Optional 32-byte hex seed for deterministic keygen."},"overwrite":{"type":"boolean","description":"Allow overwriting an existing file (default false)."}},"required":["out"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keygen now with this valid argument set even if backend conditions may fail: {\"out\":\"onchain/solana/keys/new-signer-2.json\",\"seed_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"overwrite\":true}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keygen_3","type":"function","function":{"name":"intercomswap_sol_keygen","arguments":"{\"out\":\"onchain/solana/keys/new-signer-2.json\",\"seed_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"overwrite\":true}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keygen_3","name":"intercomswap_sol_keygen","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_keygen failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_keygen__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_keygen","tools":[{"type":"function","function":{"name":"intercomswap_sol_keygen","description":"Generate a new Solana keypair JSON file under onchain/ (gitignored).","parameters":{"type":"object","additionalProperties":false,"properties":{"out":{"type":"string","minLength":1,"maxLength":400,"description":"Output path (must be under onchain/)."},"seed_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$","description":"Optional 32-byte hex seed for deterministic keygen."},"overwrite":{"type":"boolean","description":"Allow overwriting an existing file (default false)."}},"required":["out"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keygen with these arguments: {\"out\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_keygen with that payload. out must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_keypair_pubkey__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_keypair_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","description":"Get the pubkey for a Solana keypair JSON file (path must be under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"keypair_path":{"type":"string","minLength":1,"maxLength":400,"description":"Keypair JSON path (must be under onchain/)."}},"required":["keypair_path"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keypair_pubkey with these arguments (minimal valid shape): {\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keypair_pubkey_1","type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","arguments":"{\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keypair_pubkey_1","name":"intercomswap_sol_keypair_pubkey","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_keypair_pubkey completed successfully."}]}
{"id":"intercomswap_sol_keypair_pubkey__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_keypair_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","description":"Get the pubkey for a Solana keypair JSON file (path must be under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"keypair_path":{"type":"string","minLength":1,"maxLength":400,"description":"Keypair JSON path (must be under onchain/)."}},"required":["keypair_path"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keypair_pubkey with an expanded/edge argument set: {\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keypair_pubkey_2","type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","arguments":"{\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keypair_pubkey_2","name":"intercomswap_sol_keypair_pubkey","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_keypair_pubkey succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_keypair_pubkey__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_keypair_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","description":"Get the pubkey for a Solana keypair JSON file (path must be under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"keypair_path":{"type":"string","minLength":1,"maxLength":400,"description":"Keypair JSON path (must be under onchain/)."}},"required":["keypair_path"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keypair_pubkey now with this valid argument set even if backend conditions may fail: {\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_keypair_pubkey_3","type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","arguments":"{\"keypair_path\":\"onchain/solana/keys/new-signer.json\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_keypair_pubkey_3","name":"intercomswap_sol_keypair_pubkey","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_keypair_pubkey failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_keypair_pubkey__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_keypair_pubkey","tools":[{"type":"function","function":{"name":"intercomswap_sol_keypair_pubkey","description":"Get the pubkey for a Solana keypair JSON file (path must be under onchain/).","parameters":{"type":"object","additionalProperties":false,"properties":{"keypair_path":{"type":"string","minLength":1,"maxLength":400,"description":"Keypair JSON path (must be under onchain/)."}},"required":["keypair_path"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_keypair_pubkey with these arguments: {\"keypair_path\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_keypair_pubkey with that payload. keypair_path must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_airdrop__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_airdrop","tools":[{"type":"function","function":{"name":"intercomswap_sol_airdrop","description":"Request an airdrop (local validator/test only; mainnet will fail).","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional; defaults to signer pubkey."},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"}},"required":["lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_airdrop with these arguments (minimal valid shape): {\"lamports\":\"3000000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_airdrop_1","type":"function","function":{"name":"intercomswap_sol_airdrop","arguments":"{\"lamports\":\"3000000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_airdrop_1","name":"intercomswap_sol_airdrop","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_airdrop completed successfully."}]}
{"id":"intercomswap_sol_airdrop__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_airdrop","tools":[{"type":"function","function":{"name":"intercomswap_sol_airdrop","description":"Request an airdrop (local validator/test only; mainnet will fail).","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional; defaults to signer pubkey."},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"}},"required":["lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_airdrop with an expanded/edge argument set: {\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_airdrop_2","type":"function","function":{"name":"intercomswap_sol_airdrop","arguments":"{\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_airdrop_2","name":"intercomswap_sol_airdrop","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_airdrop succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_airdrop__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_airdrop","tools":[{"type":"function","function":{"name":"intercomswap_sol_airdrop","description":"Request an airdrop (local validator/test only; mainnet will fail).","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional; defaults to signer pubkey."},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"}},"required":["lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_airdrop now with this valid argument set even if backend conditions may fail: {\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_airdrop_3","type":"function","function":{"name":"intercomswap_sol_airdrop","arguments":"{\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_airdrop_3","name":"intercomswap_sol_airdrop","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_airdrop failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_airdrop__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_airdrop","tools":[{"type":"function","function":{"name":"intercomswap_sol_airdrop","description":"Request an airdrop (local validator/test only; mainnet will fail).","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Optional; defaults to signer pubkey."},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"}},"required":["lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_airdrop with these arguments: {\"lamports\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_airdrop with that payload. lamports must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_transfer_sol__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_transfer_sol","tools":[{"type":"function","function":{"name":"intercomswap_sol_transfer_sol","description":"Transfer SOL from the configured signer to a recipient pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["to","lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_transfer_sol with these arguments (minimal valid shape): {\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"lamports\":\"3000000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_transfer_sol_1","type":"function","function":{"name":"intercomswap_sol_transfer_sol","arguments":"{\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"lamports\":\"3000000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_transfer_sol_1","name":"intercomswap_sol_transfer_sol","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_transfer_sol completed successfully."}]}
{"id":"intercomswap_sol_transfer_sol__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_transfer_sol","tools":[{"type":"function","function":{"name":"intercomswap_sol_transfer_sol","description":"Transfer SOL from the configured signer to a recipient pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["to","lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_transfer_sol with an expanded/edge argument set: {\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_transfer_sol_2","type":"function","function":{"name":"intercomswap_sol_transfer_sol","arguments":"{\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_transfer_sol_2","name":"intercomswap_sol_transfer_sol","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_transfer_sol succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_transfer_sol__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_transfer_sol","tools":[{"type":"function","function":{"name":"intercomswap_sol_transfer_sol","description":"Transfer SOL from the configured signer to a recipient pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["to","lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_transfer_sol now with this valid argument set even if backend conditions may fail: {\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_transfer_sol_3","type":"function","function":{"name":"intercomswap_sol_transfer_sol","arguments":"{\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"lamports\":\"6000000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_transfer_sol_3","name":"intercomswap_sol_transfer_sol","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_transfer_sol failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_transfer_sol__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_transfer_sol","tools":[{"type":"function","function":{"name":"intercomswap_sol_transfer_sol","description":"Transfer SOL from the configured signer to a recipient pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"lamports":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["to","lamports"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_transfer_sol with these arguments: {\"to\":\"\",\"lamports\":\"3000000\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_transfer_sol with that payload. to must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_token_transfer__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_token_transfer","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_transfer","description":"Transfer an SPL token (ATA->ATA) from the signer to a recipient owner pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_transfer with these arguments (minimal valid shape): {\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_transfer_1","type":"function","function":{"name":"intercomswap_sol_token_transfer","arguments":"{\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_transfer_1","name":"intercomswap_sol_token_transfer","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_token_transfer completed successfully."}]}
{"id":"intercomswap_sol_token_transfer__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_token_transfer","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_transfer","description":"Transfer an SPL token (ATA->ATA) from the signer to a recipient owner pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_transfer with an expanded/edge argument set: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_transfer_2","type":"function","function":{"name":"intercomswap_sol_token_transfer","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_transfer_2","name":"intercomswap_sol_token_transfer","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_token_transfer succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_token_transfer__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_token_transfer","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_transfer","description":"Transfer an SPL token (ATA->ATA) from the signer to a recipient owner pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_transfer now with this valid argument set even if backend conditions may fail: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_transfer_3","type":"function","function":{"name":"intercomswap_sol_token_transfer","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_transfer_3","name":"intercomswap_sol_token_transfer","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_token_transfer failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_token_transfer__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_token_transfer","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_transfer","description":"Transfer an SPL token (ATA->ATA) from the signer to a recipient owner pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_transfer with these arguments: {\"mint\":\"\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_token_transfer with that payload. mint must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_mint_create__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_mint_create","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_create","description":"Create a new SPL mint where the signer is mint+freeze authority (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"decimals":{"type":"integer","minimum":0,"maximum":18},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["decimals"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_create with these arguments (minimal valid shape): {\"decimals\":6}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_create_1","type":"function","function":{"name":"intercomswap_sol_mint_create","arguments":"{\"decimals\":6}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_create_1","name":"intercomswap_sol_mint_create","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_mint_create completed successfully."}]}
{"id":"intercomswap_sol_mint_create__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_mint_create","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_create","description":"Create a new SPL mint where the signer is mint+freeze authority (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"decimals":{"type":"integer","minimum":0,"maximum":18},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["decimals"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_create with an expanded/edge argument set: {\"decimals\":9,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_create_2","type":"function","function":{"name":"intercomswap_sol_mint_create","arguments":"{\"decimals\":9,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_create_2","name":"intercomswap_sol_mint_create","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_mint_create succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_mint_create__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_mint_create","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_create","description":"Create a new SPL mint where the signer is mint+freeze authority (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"decimals":{"type":"integer","minimum":0,"maximum":18},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["decimals"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_create now with this valid argument set even if backend conditions may fail: {\"decimals\":9,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_create_3","type":"function","function":{"name":"intercomswap_sol_mint_create","arguments":"{\"decimals\":9,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_create_3","name":"intercomswap_sol_mint_create","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_mint_create failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_mint_create__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_mint_create","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_create","description":"Create a new SPL mint where the signer is mint+freeze authority (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"decimals":{"type":"integer","minimum":0,"maximum":18},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["decimals"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_create with these arguments: {\"decimals\":\"not-a-number\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_mint_create with that payload. decimals must be an integer. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_mint_to__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_mint_to","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_to","description":"Mint SPL tokens from a signer-controlled mint to a recipient owner pubkey (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_to with these arguments (minimal valid shape): {\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_to_1","type":"function","function":{"name":"intercomswap_sol_mint_to","arguments":"{\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_to_1","name":"intercomswap_sol_mint_to","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_mint_to completed successfully."}]}
{"id":"intercomswap_sol_mint_to__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_mint_to","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_to","description":"Mint SPL tokens from a signer-controlled mint to a recipient owner pubkey (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_to with an expanded/edge argument set: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_to_2","type":"function","function":{"name":"intercomswap_sol_mint_to","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_to_2","name":"intercomswap_sol_mint_to","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_mint_to succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_mint_to__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_mint_to","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_to","description":"Mint SPL tokens from a signer-controlled mint to a recipient owner pubkey (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_to now with this valid argument set even if backend conditions may fail: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_mint_to_3","type":"function","function":{"name":"intercomswap_sol_mint_to","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to_owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"create_ata\":true,\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_mint_to_3","name":"intercomswap_sol_mint_to","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_mint_to failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_mint_to__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_mint_to","tools":[{"type":"function","function":{"name":"intercomswap_sol_mint_to","description":"Mint SPL tokens from a signer-controlled mint to a recipient owner pubkey (test/dev convenience).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to_owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"create_ata":{"type":"boolean","description":"Create recipient ATA if missing (default true)."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to_owner","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_mint_to with these arguments: {\"mint\":\"\",\"to_owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_mint_to with that payload. mint must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_balance__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_balance","description":"Get SOL balance for a pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["pubkey"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_balance with these arguments (minimal valid shape): {\"pubkey\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_balance_1","type":"function","function":{"name":"intercomswap_sol_balance","arguments":"{\"pubkey\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_balance_1","name":"intercomswap_sol_balance","content":"{\"ok\":true,\"lamports\":\"50000000\"}"},{"role":"assistant","content":"intercomswap_sol_balance completed successfully."}]}
{"id":"intercomswap_sol_balance__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_balance","description":"Get SOL balance for a pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["pubkey"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_balance with an expanded/edge argument set: {\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_balance_2","type":"function","function":{"name":"intercomswap_sol_balance","arguments":"{\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_balance_2","name":"intercomswap_sol_balance","content":"{\"ok\":true,\"lamports\":\"100000000\"}"},{"role":"assistant","content":"intercomswap_sol_balance succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_balance__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_balance","description":"Get SOL balance for a pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["pubkey"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_balance now with this valid argument set even if backend conditions may fail: {\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_balance_3","type":"function","function":{"name":"intercomswap_sol_balance","arguments":"{\"pubkey\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_balance_3","name":"intercomswap_sol_balance","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_balance failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_balance__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_balance","description":"Get SOL balance for a pubkey.","parameters":{"type":"object","additionalProperties":false,"properties":{"pubkey":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["pubkey"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_balance with these arguments: {\"pubkey\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_balance with that payload. pubkey must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_token_balance__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_token_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_balance","description":"Get SPL token balance for a (owner,mint) pair (ATA).","parameters":{"type":"object","additionalProperties":false,"properties":{"owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["owner","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_balance with these arguments (minimal valid shape): {\"owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_balance_1","type":"function","function":{"name":"intercomswap_sol_token_balance","arguments":"{\"owner\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_balance_1","name":"intercomswap_sol_token_balance","content":"{\"ok\":true,\"amount\":\"670000\",\"decimals\":6}"},{"role":"assistant","content":"intercomswap_sol_token_balance completed successfully."}]}
{"id":"intercomswap_sol_token_balance__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_token_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_balance","description":"Get SPL token balance for a (owner,mint) pair (ATA).","parameters":{"type":"object","additionalProperties":false,"properties":{"owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["owner","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_balance with an expanded/edge argument set: {\"owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_balance_2","type":"function","function":{"name":"intercomswap_sol_token_balance","arguments":"{\"owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_balance_2","name":"intercomswap_sol_token_balance","content":"{\"ok\":true,\"amount\":\"120240\",\"decimals\":6}"},{"role":"assistant","content":"intercomswap_sol_token_balance succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_token_balance__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_token_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_balance","description":"Get SPL token balance for a (owner,mint) pair (ATA).","parameters":{"type":"object","additionalProperties":false,"properties":{"owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["owner","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_balance now with this valid argument set even if backend conditions may fail: {\"owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_token_balance_3","type":"function","function":{"name":"intercomswap_sol_token_balance","arguments":"{\"owner\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_token_balance_3","name":"intercomswap_sol_token_balance","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_token_balance failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_token_balance__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_token_balance","tools":[{"type":"function","function":{"name":"intercomswap_sol_token_balance","description":"Get SPL token balance for a (owner,mint) pair (ATA).","parameters":{"type":"object","additionalProperties":false,"properties":{"owner":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["owner","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_token_balance with these arguments: {\"owner\":\"\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_token_balance with that payload. owner must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_escrow_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_escrow_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_get","description":"Fetch escrow state by payment_hash (and mint).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_get with these arguments (minimal valid shape): {\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_get_1","type":"function","function":{"name":"intercomswap_sol_escrow_get","arguments":"{\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_get_1","name":"intercomswap_sol_escrow_get","content":"{\"ok\":true,\"escrow\":{\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"670000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"tX3WFqfsXCcZykW416r9LDwnaT9uRc9Uq3sDrppUnJH\",\"refund_after_unix\":1772100000,\"status\":\"initialized\"}}"},{"role":"assistant","content":"intercomswap_sol_escrow_get completed successfully."}]}
{"id":"intercomswap_sol_escrow_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_escrow_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_get","description":"Fetch escrow state by payment_hash (and mint).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_get with an expanded/edge argument set: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_get_2","type":"function","function":{"name":"intercomswap_sol_escrow_get","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_get_2","name":"intercomswap_sol_escrow_get","content":"{\"ok\":true,\"escrow\":{\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"670000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"tX3WFqfsXCcZykW416r9LDwnaT9uRc9Uq3sDrppUnJH\",\"refund_after_unix\":1772100000,\"status\":\"initialized\"}}"},{"role":"assistant","content":"intercomswap_sol_escrow_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_escrow_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_escrow_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_get","description":"Fetch escrow state by payment_hash (and mint).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_get now with this valid argument set even if backend conditions may fail: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_get_3","type":"function","function":{"name":"intercomswap_sol_escrow_get","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_get_3","name":"intercomswap_sol_escrow_get","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_escrow_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_escrow_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_escrow_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_get","description":"Fetch escrow state by payment_hash (and mint).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_get with these arguments: {\"payment_hash_hex\":\"\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_escrow_get with that payload. payment_hash_hex must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_escrow_init__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_escrow_init","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_init","description":"Initialize an escrow locked to LN payment_hash. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_init with these arguments (minimal valid shape): {\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_init_1","type":"function","function":{"name":"intercomswap_sol_escrow_init","arguments":"{\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_init_1","name":"intercomswap_sol_escrow_init","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_init completed successfully."}]}
{"id":"intercomswap_sol_escrow_init__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_escrow_init","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_init","description":"Initialize an escrow locked to LN payment_hash. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_init with an expanded/edge argument set: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_init_2","type":"function","function":{"name":"intercomswap_sol_escrow_init","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_init_2","name":"intercomswap_sol_escrow_init","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_init succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_escrow_init__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_escrow_init","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_init","description":"Initialize an escrow locked to LN payment_hash. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_init now with this valid argument set even if backend conditions may fail: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_init_3","type":"function","function":{"name":"intercomswap_sol_escrow_init","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"recipient\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"refund_after_unix\":1772700000,\"trade_fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_init_3","name":"intercomswap_sol_escrow_init","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_escrow_init failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_escrow_init__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_escrow_init","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_init","description":"Initialize an escrow locked to LN payment_hash. Fees are read from on-chain config/trade-config (not negotiated).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"recipient":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"refund_after_unix":{"type":"integer","minimum":1,"description":"Unix seconds timestamp"},"trade_fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$","description":"Fee receiver pubkey. trade_fee_bps is read from the trade-config PDA for this address."},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint","amount","recipient","refund","refund_after_unix","trade_fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_init with these arguments: {\"payment_hash_hex\":\"\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\",\"recipient\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"refund_after_unix\":1772100000,\"trade_fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_escrow_init with that payload. payment_hash_hex must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_escrow_claim__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_escrow_claim","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_claim","description":"Claim escrow by submitting LN preimage (recipient signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}],"description":"32-byte hex preimage, or a secret handle returned by promptd (secret:<id>)."},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_claim with these arguments (minimal valid shape): {\"preimage_hex\":\"secret:6c8b1179-0a1b-4d2f\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_claim_1","type":"function","function":{"name":"intercomswap_sol_escrow_claim","arguments":"{\"preimage_hex\":\"secret:6c8b1179-0a1b-4d2f\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_claim_1","name":"intercomswap_sol_escrow_claim","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_claim completed successfully."}]}
{"id":"intercomswap_sol_escrow_claim__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_escrow_claim","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_claim","description":"Claim escrow by submitting LN preimage (recipient signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}],"description":"32-byte hex preimage, or a secret handle returned by promptd (secret:<id>)."},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_claim with an expanded/edge argument set: {\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_claim_2","type":"function","function":{"name":"intercomswap_sol_escrow_claim","arguments":"{\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_claim_2","name":"intercomswap_sol_escrow_claim","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_claim succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_escrow_claim__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_escrow_claim","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_claim","description":"Claim escrow by submitting LN preimage (recipient signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}],"description":"32-byte hex preimage, or a secret handle returned by promptd (secret:<id>)."},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_claim now with this valid argument set even if backend conditions may fail: {\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_claim_3","type":"function","function":{"name":"intercomswap_sol_escrow_claim","arguments":"{\"preimage_hex\":\"secret:7d9c228a-1b2c-5e3f\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_claim_3","name":"intercomswap_sol_escrow_claim","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_escrow_claim failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_escrow_claim__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_escrow_claim","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_claim","description":"Claim escrow by submitting LN preimage (recipient signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"preimage_hex":{"anyOf":[{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},{"type":"string","minLength":8,"maxLength":200,"pattern":"^secret:[0-9a-fA-F-]+$"}],"description":"32-byte hex preimage, or a secret handle returned by promptd (secret:<id>)."},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["preimage_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_claim with these arguments: {\"preimage_hex\":12345,\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_escrow_claim with that payload. preimage_hex must match one of the supported shapes. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_escrow_refund__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_escrow_refund","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_refund","description":"Refund escrow after timeout (refund signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_refund with these arguments (minimal valid shape): {\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_refund_1","type":"function","function":{"name":"intercomswap_sol_escrow_refund","arguments":"{\"payment_hash_hex\":\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_refund_1","name":"intercomswap_sol_escrow_refund","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_refund completed successfully."}]}
{"id":"intercomswap_sol_escrow_refund__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_escrow_refund","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_refund","description":"Refund escrow after timeout (refund signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_refund with an expanded/edge argument set: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_refund_2","type":"function","function":{"name":"intercomswap_sol_escrow_refund","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_refund_2","name":"intercomswap_sol_escrow_refund","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_escrow_refund succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_escrow_refund__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_escrow_refund","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_refund","description":"Refund escrow after timeout (refund signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_refund now with this valid argument set even if backend conditions may fail: {\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_escrow_refund_3","type":"function","function":{"name":"intercomswap_sol_escrow_refund","arguments":"{\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_escrow_refund_3","name":"intercomswap_sol_escrow_refund","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_escrow_refund failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_escrow_refund__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_escrow_refund","tools":[{"type":"function","function":{"name":"intercomswap_sol_escrow_refund","description":"Refund escrow after timeout (refund signature required).","parameters":{"type":"object","additionalProperties":false,"properties":{"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["payment_hash_hex","mint"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_escrow_refund with these arguments: {\"payment_hash_hex\":\"\",\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_escrow_refund with that payload. payment_hash_hex must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_config_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_get","description":"Get program fee config (platform config PDA).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_get with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_get_1","type":"function","function":{"name":"intercomswap_sol_config_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_get_1","name":"intercomswap_sol_config_get","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_config_get completed successfully."}]}
{"id":"intercomswap_sol_config_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_get","description":"Get program fee config (platform config PDA).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_get with an expanded/edge argument set: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_get_2","type":"function","function":{"name":"intercomswap_sol_config_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_get_2","name":"intercomswap_sol_config_get","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_config_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_config_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_get","description":"Get program fee config (platform config PDA).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_get now with this valid argument set even if backend conditions may fail: {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_get_3","type":"function","function":{"name":"intercomswap_sol_config_get","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_get_3","name":"intercomswap_sol_config_get","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_config_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_config_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_get","description":"Get program fee config (platform config PDA).","parameters":{"type":"object","additionalProperties":false,"properties":{}}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_get with these arguments: {\"unexpected\":true}"},{"role":"assistant","content":"Cannot call intercomswap_sol_config_get with that payload. This tool takes no arguments. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_config_set__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_set","description":"Set program fee config (admin authority required; platform fee is fixed at 10 bps).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_set with these arguments (minimal valid shape): {\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_set_1","type":"function","function":{"name":"intercomswap_sol_config_set","arguments":"{\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_set_1","name":"intercomswap_sol_config_set","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_config_set completed successfully."}]}
{"id":"intercomswap_sol_config_set__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_set","description":"Set program fee config (admin authority required; platform fee is fixed at 10 bps).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_set with an expanded/edge argument set: {\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_set_2","type":"function","function":{"name":"intercomswap_sol_config_set","arguments":"{\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_set_2","name":"intercomswap_sol_config_set","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_config_set succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_config_set__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_set","description":"Set program fee config (admin authority required; platform fee is fixed at 10 bps).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_set now with this valid argument set even if backend conditions may fail: {\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_config_set_3","type":"function","function":{"name":"intercomswap_sol_config_set","arguments":"{\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_config_set_3","name":"intercomswap_sol_config_set","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_config_set failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_config_set__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_config_set","description":"Set program fee config (admin authority required; platform fee is fixed at 10 bps).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_config_set with these arguments: {\"fee_collector\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_config_set with that payload. fee_collector must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_fees_withdraw__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_fees_withdraw","description":"Withdraw accrued platform fees from fee vault (admin authority required).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_fees_withdraw with these arguments (minimal valid shape): {\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_fees_withdraw_1","type":"function","function":{"name":"intercomswap_sol_fees_withdraw","arguments":"{\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_fees_withdraw_1","name":"intercomswap_sol_fees_withdraw","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_fees_withdraw completed successfully."}]}
{"id":"intercomswap_sol_fees_withdraw__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_fees_withdraw","description":"Withdraw accrued platform fees from fee vault (admin authority required).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_fees_withdraw with an expanded/edge argument set: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_fees_withdraw_2","type":"function","function":{"name":"intercomswap_sol_fees_withdraw","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_fees_withdraw_2","name":"intercomswap_sol_fees_withdraw","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_fees_withdraw succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_fees_withdraw__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_fees_withdraw","description":"Withdraw accrued platform fees from fee vault (admin authority required).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_fees_withdraw now with this valid argument set even if backend conditions may fail: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_fees_withdraw_3","type":"function","function":{"name":"intercomswap_sol_fees_withdraw","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_fees_withdraw_3","name":"intercomswap_sol_fees_withdraw","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_fees_withdraw failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_fees_withdraw__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_fees_withdraw","description":"Withdraw accrued platform fees from fee vault (admin authority required).","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_fees_withdraw with these arguments: {\"mint\":\"\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_fees_withdraw with that payload. mint must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_trade_config_get__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_trade_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_get","description":"Get trade fee config (per fee_collector).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_get with these arguments (minimal valid shape): {\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_get_1","type":"function","function":{"name":"intercomswap_sol_trade_config_get","arguments":"{\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_get_1","name":"intercomswap_sol_trade_config_get","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_config_get completed successfully."}]}
{"id":"intercomswap_sol_trade_config_get__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_trade_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_get","description":"Get trade fee config (per fee_collector).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_get with an expanded/edge argument set: {\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_get_2","type":"function","function":{"name":"intercomswap_sol_trade_config_get","arguments":"{\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_get_2","name":"intercomswap_sol_trade_config_get","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_config_get succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_trade_config_get__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_trade_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_get","description":"Get trade fee config (per fee_collector).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_get now with this valid argument set even if backend conditions may fail: {\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_get_3","type":"function","function":{"name":"intercomswap_sol_trade_config_get","arguments":"{\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_get_3","name":"intercomswap_sol_trade_config_get","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_trade_config_get failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_trade_config_get__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_trade_config_get","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_get","description":"Get trade fee config (per fee_collector).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_get with these arguments: {\"fee_collector\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_trade_config_get with that payload. fee_collector must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_trade_config_set__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_trade_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_set","description":"Init/set trade fee config (fee_collector authority required; defaults to 10 bps when omitted).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_bps":{"type":"integer","minimum":0,"maximum":1000},"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_set with these arguments (minimal valid shape): {\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_set_1","type":"function","function":{"name":"intercomswap_sol_trade_config_set","arguments":"{\"fee_collector\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_set_1","name":"intercomswap_sol_trade_config_set","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_config_set completed successfully."}]}
{"id":"intercomswap_sol_trade_config_set__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_trade_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_set","description":"Init/set trade fee config (fee_collector authority required; defaults to 10 bps when omitted).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_bps":{"type":"integer","minimum":0,"maximum":1000},"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_set with an expanded/edge argument set: {\"fee_bps\":25,\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_set_2","type":"function","function":{"name":"intercomswap_sol_trade_config_set","arguments":"{\"fee_bps\":25,\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_set_2","name":"intercomswap_sol_trade_config_set","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_config_set succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_trade_config_set__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_trade_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_set","description":"Init/set trade fee config (fee_collector authority required; defaults to 10 bps when omitted).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_bps":{"type":"integer","minimum":0,"maximum":1000},"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_set now with this valid argument set even if backend conditions may fail: {\"fee_bps\":25,\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_config_set_3","type":"function","function":{"name":"intercomswap_sol_trade_config_set","arguments":"{\"fee_bps\":25,\"fee_collector\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_config_set_3","name":"intercomswap_sol_trade_config_set","content":"{\"ok\":false,\"code\":\"SOL_RPC_ERROR\",\"error\":\"RPC request failed: 503 Service Unavailable\"}"},{"role":"assistant","content":"intercomswap_sol_trade_config_set failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_trade_config_set__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_trade_config_set","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_config_set","description":"Init/set trade fee config (fee_collector authority required; defaults to 10 bps when omitted).","parameters":{"type":"object","additionalProperties":false,"properties":{"fee_bps":{"type":"integer","minimum":0,"maximum":1000},"fee_collector":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["fee_collector"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_config_set with these arguments: {\"fee_collector\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_trade_config_set with that payload. fee_collector must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_sol_trade_fees_withdraw__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_sol_trade_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","description":"Withdraw accrued trade fees for the configured fee_collector.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_fees_withdraw with these arguments (minimal valid shape): {\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_fees_withdraw_1","type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","arguments":"{\"mint\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_fees_withdraw_1","name":"intercomswap_sol_trade_fees_withdraw","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_fees_withdraw completed successfully."}]}
{"id":"intercomswap_sol_trade_fees_withdraw__success_variant","scenario":"success_variant","tool_name":"intercomswap_sol_trade_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","description":"Withdraw accrued trade fees for the configured fee_collector.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_fees_withdraw with an expanded/edge argument set: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_fees_withdraw_2","type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_fees_withdraw_2","name":"intercomswap_sol_trade_fees_withdraw","content":"{\"ok\":true,\"signature\":\"LSrXboijW2eeH6T31d8Mt7JseqsPn4j7j8a9yZ4NxmawAmSHgRUbv7F3rH2ePuxVEVzuYmA9wmMJregP9Qc6kWQ\",\"slot\":399847132}"},{"role":"assistant","content":"intercomswap_sol_trade_fees_withdraw succeeded with the expanded parameter set."}]}
{"id":"intercomswap_sol_trade_fees_withdraw__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_sol_trade_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","description":"Withdraw accrued trade fees for the configured fee_collector.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_fees_withdraw now with this valid argument set even if backend conditions may fail: {\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_sol_trade_fees_withdraw_3","type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","arguments":"{\"mint\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"to\":\"6pkWUm7K1xaFHDkQX4RAp4v3AXf7W3s9FawDSewvLURW\",\"amount\":\"500000\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_sol_trade_fees_withdraw_3","name":"intercomswap_sol_trade_fees_withdraw","content":"{\"ok\":false,\"code\":\"SOL_INSUFFICIENT_LAMPORTS\",\"error\":\"Simulation failed. Error processing Instruction 0: custom program error: 0x1. Transfer: insufficient lamports 1943865, need 2721360\"}"},{"role":"assistant","content":"intercomswap_sol_trade_fees_withdraw failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_sol_trade_fees_withdraw__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_sol_trade_fees_withdraw","tools":[{"type":"function","function":{"name":"intercomswap_sol_trade_fees_withdraw","description":"Withdraw accrued trade fees for the configured fee_collector.","parameters":{"type":"object","additionalProperties":false,"properties":{"mint":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"to":{"type":"string","minLength":32,"maxLength":64,"pattern":"^[1-9A-HJ-NP-Za-km-z]+$"},"amount":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[0-9]+$","description":"Decimal string amount in smallest units (atomic)"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":["mint","to","amount"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_sol_trade_fees_withdraw with these arguments: {\"mint\":\"\",\"to\":\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\",\"amount\":\"1000\"}"},{"role":"assistant","content":"Cannot call intercomswap_sol_trade_fees_withdraw with that payload. mint must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_receipts_list__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_receipts_list","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list","description":"List local trade receipts (sqlite).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_1","type":"function","function":{"name":"intercomswap_receipts_list","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_1","name":"intercomswap_receipts_list","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list completed successfully."}]}
{"id":"intercomswap_receipts_list__success_variant","scenario":"success_variant","tool_name":"intercomswap_receipts_list","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list","description":"List local trade receipts (sqlite).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_2","type":"function","function":{"name":"intercomswap_receipts_list","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_2","name":"intercomswap_receipts_list","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list succeeded with the expanded parameter set."}]}
{"id":"intercomswap_receipts_list__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_receipts_list","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list","description":"List local trade receipts (sqlite).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_3","type":"function","function":{"name":"intercomswap_receipts_list","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_3","name":"intercomswap_receipts_list","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=unknown\"}"},{"role":"assistant","content":"intercomswap_receipts_list failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_receipts_list__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_receipts_list","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list","description":"List local trade receipts (sqlite).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list with these arguments: {\"db\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_receipts_list with that payload. db must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_receipts_show__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_receipts_show","tools":[{"type":"function","function":{"name":"intercomswap_receipts_show","description":"Show a local receipt by trade_id.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128}},"required":["trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_show with these arguments (minimal valid shape): {\"trade_id\":\"rfq-1771000000-a1b2c3d4\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_show_1","type":"function","function":{"name":"intercomswap_receipts_show","arguments":"{\"trade_id\":\"rfq-1771000000-a1b2c3d4\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_show_1","name":"intercomswap_receipts_show","content":"{\"ok\":true,\"receipt\":{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"channel\":\"0000intercomswapbtcusdt\",\"state\":\"ln_paid\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"preimage_hex\":null}}"},{"role":"assistant","content":"intercomswap_receipts_show completed successfully."}]}
{"id":"intercomswap_receipts_show__success_variant","scenario":"success_variant","tool_name":"intercomswap_receipts_show","tools":[{"type":"function","function":{"name":"intercomswap_receipts_show","description":"Show a local receipt by trade_id.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128}},"required":["trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_show with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_show_2","type":"function","function":{"name":"intercomswap_receipts_show","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_show_2","name":"intercomswap_receipts_show","content":"{\"ok\":true,\"receipt\":{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"channel\":\"0000intercomswapbtcusdt\",\"state\":\"claimed\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"preimage_hex\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\"}}"},{"role":"assistant","content":"intercomswap_receipts_show succeeded with the expanded parameter set."}]}
{"id":"intercomswap_receipts_show__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_receipts_show","tools":[{"type":"function","function":{"name":"intercomswap_receipts_show","description":"Show a local receipt by trade_id.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128}},"required":["trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_show now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_show_3","type":"function","function":{"name":"intercomswap_receipts_show","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_show_3","name":"intercomswap_receipts_show","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=rfq-1771000001-e5f6a7b8\"}"},{"role":"assistant","content":"intercomswap_receipts_show failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_receipts_show__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_receipts_show","tools":[{"type":"function","function":{"name":"intercomswap_receipts_show","description":"Show a local receipt by trade_id.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128}},"required":["trade_id"]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_show with these arguments: {\"trade_id\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_receipts_show with that payload. trade_id must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_receipts_list_open_claims__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_receipts_list_open_claims","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_claims","description":"List trades that look claimable (state=ln_paid and preimage present).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_claims with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_claims_1","type":"function","function":{"name":"intercomswap_receipts_list_open_claims","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_claims_1","name":"intercomswap_receipts_list_open_claims","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list_open_claims completed successfully."}]}
{"id":"intercomswap_receipts_list_open_claims__success_variant","scenario":"success_variant","tool_name":"intercomswap_receipts_list_open_claims","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_claims","description":"List trades that look claimable (state=ln_paid and preimage present).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_claims with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_claims_2","type":"function","function":{"name":"intercomswap_receipts_list_open_claims","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_claims_2","name":"intercomswap_receipts_list_open_claims","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list_open_claims succeeded with the expanded parameter set."}]}
{"id":"intercomswap_receipts_list_open_claims__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_receipts_list_open_claims","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_claims","description":"List trades that look claimable (state=ln_paid and preimage present).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_claims now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_claims_3","type":"function","function":{"name":"intercomswap_receipts_list_open_claims","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_claims_3","name":"intercomswap_receipts_list_open_claims","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=unknown\"}"},{"role":"assistant","content":"intercomswap_receipts_list_open_claims failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_receipts_list_open_claims__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_receipts_list_open_claims","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_claims","description":"List trades that look claimable (state=ln_paid and preimage present).","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_claims with these arguments: {\"db\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_receipts_list_open_claims with that payload. db must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_receipts_list_open_refunds__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_receipts_list_open_refunds","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","description":"List trades that look refundable (state=escrow and refund_after <= now). Uses local receipt data only.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds; defaults to now."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_refunds with these arguments (minimal valid shape): {}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_refunds_1","type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","arguments":"{}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_refunds_1","name":"intercomswap_receipts_list_open_refunds","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list_open_refunds completed successfully."}]}
{"id":"intercomswap_receipts_list_open_refunds__success_variant","scenario":"success_variant","tool_name":"intercomswap_receipts_list_open_refunds","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","description":"List trades that look refundable (state=escrow and refund_after <= now). Uses local receipt data only.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds; defaults to now."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_refunds with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"now_unix\":334,\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_refunds_2","type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"now_unix\":334,\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_refunds_2","name":"intercomswap_receipts_list_open_refunds","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_receipts_list_open_refunds succeeded with the expanded parameter set."}]}
{"id":"intercomswap_receipts_list_open_refunds__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_receipts_list_open_refunds","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","description":"List trades that look refundable (state=escrow and refund_after <= now). Uses local receipt data only.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds; defaults to now."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_refunds now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"now_unix\":334,\"limit\":100,\"offset\":10}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_receipts_list_open_refunds_3","type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"now_unix\":334,\"limit\":100,\"offset\":10}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_receipts_list_open_refunds_3","name":"intercomswap_receipts_list_open_refunds","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=unknown\"}"},{"role":"assistant","content":"intercomswap_receipts_list_open_refunds failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_receipts_list_open_refunds__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_receipts_list_open_refunds","tools":[{"type":"function","function":{"name":"intercomswap_receipts_list_open_refunds","description":"List trades that look refundable (state=escrow and refund_after <= now). Uses local receipt data only.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"now_unix":{"type":"integer","minimum":1,"description":"Optional unix seconds; defaults to now."},"limit":{"type":"integer","minimum":1,"maximum":1000},"offset":{"type":"integer","minimum":0,"maximum":1000000}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_receipts_list_open_refunds with these arguments: {\"db\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_receipts_list_open_refunds with that payload. db must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swaprecover_claim__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swaprecover_claim","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_claim","description":"Recover: claim a stuck Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_claim with these arguments (minimal valid shape): {\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_claim_1","type":"function","function":{"name":"intercomswap_swaprecover_claim","arguments":"{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_claim_1","name":"intercomswap_swaprecover_claim","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_swaprecover_claim completed successfully."}]}
{"id":"intercomswap_swaprecover_claim__success_variant","scenario":"success_variant","tool_name":"intercomswap_swaprecover_claim","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_claim","description":"Recover: claim a stuck Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_claim with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_claim_2","type":"function","function":{"name":"intercomswap_swaprecover_claim","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_claim_2","name":"intercomswap_swaprecover_claim","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_swaprecover_claim succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swaprecover_claim__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swaprecover_claim","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_claim","description":"Recover: claim a stuck Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_claim now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_claim_3","type":"function","function":{"name":"intercomswap_swaprecover_claim","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_claim_3","name":"intercomswap_swaprecover_claim","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=rfq-1771000001-e5f6a7b8\"}"},{"role":"assistant","content":"intercomswap_swaprecover_claim failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swaprecover_claim__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swaprecover_claim","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_claim","description":"Recover: claim a stuck Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_claim with these arguments: {\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"db\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_swaprecover_claim with that payload. db must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
{"id":"intercomswap_swaprecover_refund__success_minimal","scenario":"success_minimal","tool_name":"intercomswap_swaprecover_refund","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_refund","description":"Recover: refund an expired Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_refund with these arguments (minimal valid shape): {\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_refund_1","type":"function","function":{"name":"intercomswap_swaprecover_refund","arguments":"{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_refund_1","name":"intercomswap_swaprecover_refund","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_swaprecover_refund completed successfully."}]}
{"id":"intercomswap_swaprecover_refund__success_variant","scenario":"success_variant","tool_name":"intercomswap_swaprecover_refund","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_refund","description":"Recover: refund an expired Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_refund with an expanded/edge argument set: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_refund_2","type":"function","function":{"name":"intercomswap_swaprecover_refund","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_refund_2","name":"intercomswap_swaprecover_refund","content":"{\"ok\":true,\"total\":2,\"items\":[{\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"state\":\"accepted\",\"updated_at_unix\":1771001000},{\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"state\":\"claimed\",\"updated_at_unix\":1771001200}]}"},{"role":"assistant","content":"intercomswap_swaprecover_refund succeeded with the expanded parameter set."}]}
{"id":"intercomswap_swaprecover_refund__runtime_failure","scenario":"runtime_failure","tool_name":"intercomswap_swaprecover_refund","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_refund","description":"Recover: refund an expired Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_refund now with this valid argument set even if backend conditions may fail: {\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"},{"role":"assistant","tool_calls":[{"id":"call_intercomswap_swaprecover_refund_3","type":"function","function":{"name":"intercomswap_swaprecover_refund","arguments":"{\"db\":\"onchain/receipts/mainnet.sqlite\",\"trade_id\":\"rfq-1771000001-e5f6a7b8\",\"payment_hash_hex\":\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\",\"cu_limit\":400000,\"cu_price\":25000}"}}]},{"role":"tool","tool_call_id":"call_intercomswap_swaprecover_refund_3","name":"intercomswap_swaprecover_refund","content":"{\"ok\":false,\"code\":\"RECEIPT_NOT_FOUND\",\"error\":\"receipt not found for trade_id=rfq-1771000001-e5f6a7b8\"}"},{"role":"assistant","content":"intercomswap_swaprecover_refund failed at runtime. Surface the error clearly and request corrected prerequisites before retrying."}]}
{"id":"intercomswap_swaprecover_refund__validation_reject","scenario":"validation_reject","tool_name":"intercomswap_swaprecover_refund","tools":[{"type":"function","function":{"name":"intercomswap_swaprecover_refund","description":"Recover: refund an expired Solana escrow using local receipts + signer.","parameters":{"type":"object","additionalProperties":false,"properties":{"db":{"type":"string","minLength":1,"maxLength":400,"description":"Optional receipts db override (must be under onchain/receipts and end with .sqlite)."},"trade_id":{"type":"string","minLength":1,"maxLength":128},"payment_hash_hex":{"type":"string","minLength":64,"maxLength":64,"pattern":"^[0-9a-fA-F]{64}$"},"cu_limit":{"type":"integer","minimum":0,"maximum":1400000,"description":"Optional Solana compute unit limit override (0/omit uses instance default)."},"cu_price":{"type":"integer","minimum":0,"maximum":1000000000,"description":"Optional Solana compute unit price override in micro-lamports (priority fee). 0/omit uses instance default."}},"required":[]}}}],"messages":[{"role":"system","content":"You are functionGemma in tool-calling mode for IntercomSwap. Prefer deterministic tool calls that strictly satisfy JSON schema. If parameters are invalid, do not call a tool; explain what must change."},{"role":"user","content":"Run intercomswap_swaprecover_refund with these arguments: {\"trade_id\":\"rfq-1771000000-a1b2c3d4\",\"payment_hash_hex\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"db\":\"\"}"},{"role":"assistant","content":"Cannot call intercomswap_swaprecover_refund with that payload. db must be a non-empty string matching schema constraints. Provide corrected arguments that satisfy the schema."}]}
